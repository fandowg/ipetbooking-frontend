(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67a39d2a","chunk-67a39d2a"],{"6c32":function(e,t,i){e.exports={slide:"Step3Available_slide_1qEst","slide-reverse":"Step3Available_slide-reverse_33XRL",box:"Step3Available_box_1Vtjw","services-wrap":"Step3Available_services-wrap_QQv2O",services:"Step3Available_services_2W1du"}},"80d9":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h4",{staticClass:"form-block-title"},[e._v("適用項目")]),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("h6",[e._v("可選服務項目(可複選)")]),i("div",{class:e.$style.box},[e.submitData.prices[0].title?e._l(e.submitData.prices,function(t,s){return i("el-button",{key:s,staticClass:"is-round is-fullwidth",class:{isActiveCheckBox:s===e.priceIndex},on:{click:function(t){return e.selectAvaliable(s)}}},[i("div",{staticClass:"input-in-buttom"},[i("span",{staticClass:"box__title"},[e._v(e._s(t.title))]),i("el-input",{model:{value:t.maxTimes,callback:function(i){e.$set(t,"maxTimes",e._n(i))},expression:"item.maxTimes"}},[i("span",{staticStyle:{"margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("次")])])],1)])}):e._e(),i("el-button",{staticClass:"is-round is-fullwidth",on:{click:e.creatAvaliable}},[i("BaseIcon",{attrs:{name:"plus"}}),e._v(" 選取適用服務")],1)],2)]),i("el-col",{attrs:{span:12}},[i("h6",[e._v("適用店家(可複選)")]),i("div",{class:e.$style.box},[null!==e.priceIndex?[i("el-input",{staticClass:"search-in-box",attrs:{placeholder:"輸入關鍵字篩選項目"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),i("el-checkbox-group",{class:e.$style.services,model:{value:e.submitData.prices[e.priceIndex].productIds,callback:function(t){e.$set(e.submitData.prices[e.priceIndex],"productIds",t)},expression:"submitData.prices[priceIndex].productIds"}},[e.$hasHomeService()?e._l(e.filterProducts,function(t,s){return i("el-checkbox",{key:s,attrs:{label:t.id,border:""}},[e._v("\n                "+e._s(t.name)+"\n              ")])}):e._l(e.filterProducts,function(t,s){return i("el-radio",{key:s,attrs:{border:"",label:t.id},on:{change:e.changeProductIds},model:{value:e.submitData.prices[e.priceIndex].productIds[0],callback:function(t){e.$set(e.submitData.prices[e.priceIndex].productIds,0,t)},expression:"submitData.prices[priceIndex].productIds[0]"}},[e._v("\n                "+e._s(t.name)+"\n              ")])})],2)]:i("span",[e._v("請先選擇服務項目")])],2)])],1),i("el-dialog",{attrs:{title:"選取適用服務",visible:e.pricesDialogVisible,width:"80%",top:"0","append-to-body":""},on:{"update:visible":function(t){e.pricesDialogVisible=t}}},[i("el-form",{staticClass:"isWrap",attrs:{"label-position":"top"}},[i("el-form-item",{class:e.$style["services-wrap"],staticStyle:{"min-height":"250px"}},[i("el-checkbox",{staticStyle:{"margin-left":"5px","margin-top":"10px","margin-bottom":"5px"},attrs:{indeterminate:e.isIndeterminate,border:""},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全 選")]),i("el-checkbox-group",{class:e.$style.services,model:{value:e.catchPrices,callback:function(t){e.catchPrices=t},expression:"catchPrices"}},e._l(e.filterPrices,function(t,s){return i("el-checkbox",{key:s,attrs:{label:t.priceGroupOrdering,border:""}},[e._v("\n            "+e._s(t.title)+"\n            ")])}),1)],1)],1),i("div",{staticClass:"btn-group-inline"},[i("el-button",{staticClass:"is-round",on:{click:e.cancelSelectPrices}},[e._v("取消")]),i("el-button",{staticClass:"is-round",attrs:{type:"primary"},on:{click:e.saveSelectPrices}},[e._v("儲存")])],1)],1)],1)},c=[],r=i("f210"),a=i("0644"),n=i.n(a),l={components:{},props:{products:{type:Array,required:!0},category:{type:Array,required:!0},prices:{type:Array,required:!0},defaultValue:{type:Object,default:function(){}}},data:function(){return{pricesDialogVisible:!1,catchPrices:[],checkAll:!1,priceIndex:null,search:""}},computed:{submitData:{get:function(){return this.defaultValue},set:function(e){this.$emit("update:defaultValue",e)}},filterPrices:function(){var e=this,t=this.prices.filter(function(t){return t.petCategoryId===e.submitData.categoryId});return t=t.map(function(e){return{title:e.title,priceGroupOrdering:e.groupOrdering,maxTimes:1,productIds:[]}}),t},filterProducts:function(){var e=this,t=[];return t=this.search?this.products.filter(function(t){return console.log(t.name.search(e.search)),-1!==t.name.search(e.search)}):this.products,t},isIndeterminate:function(){return this.checkAll=this.filterPrices.length===this.catchPrices.length,0!==this.catchPrices.length&&(this.catchPrices.length>0&&this.catchPrices.length<this.filterPrices.length)},isEditMode:function(){return!!this.defaultValue.groupOrdering}},created:function(){this.isEditMode&&this.getDefaultPrices()},methods:{creatAvaliable:function(){this.pricesDialogVisible=!0},selectAvaliable:function(e){this.priceIndex=e},getDefaultPrices:function(){this.catchPrices=this.submitData.prices.map(function(e){return e.priceGroupOrdering}),this.priceIndex=0},saveSelectPrices:function(){var e=this;if(0!==this.catchPrices.length){var t=[],i=n()(this.catchPrices),s=this.submitData.prices.map(function(e){return e.priceGroupOrdering});i.forEach(function(i){var c=s.indexOf(i);if(-1!==c)t.push(e.submitData.prices[c]);else{var r=e.filterPrices.find(function(e){return e.priceGroupOrdering===i});t.push(r)}}),this.submitData.prices=t,this.pricesDialogVisible=!1,1===this.submitData.prices.length&&(this.priceIndex=0)}else this.pricesDialogVisible=!1},cancelSelectPrices:function(){this.pricesDialogVisible=!1},handleCheckAllChange:function(e){this.catchPrices=e?Object(r["a"])(this.filterPrices.map(function(e){return e.priceGroupOrdering})):[]},changeProductIds:function(e){this.submitData.prices.forEach(function(t){t.productIds=[e]})}}},o=l,u=i("9e0b"),p=i("2877");function d(e){this["$style"]=u["default"].locals||u["default"]}var h=Object(p["a"])(o,s,c,!1,d,null,null);t["default"]=h.exports},"9e0b":function(e,t,i){"use strict";var s=i("6c32"),c=i.n(s);t["default"]=c.a}}]);
//# sourceMappingURL=chunk-67a39d2a.2596d34c.js.map