(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6acd3794"],{"2deb":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.$style.wrapper},[e("div",{class:t.$style.table},[e("h6",[t._v("訂單計算")]),e("div",{ref:"tableScroll",staticClass:"table__scroll",class:{isOutSide:t.isOutSide},style:"max-height:calc(100vh - "+t.tableFixHeight+"px - "+t.tableReduceHeight},[t.isChildren?[e("div",{staticClass:"table__block"},[t._m(0),t.addList.length>0?[e("div",{staticClass:"table__box"},t._l(t.addList,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},[a.title?e("span",[t._v(t._s(a.title))]):t._e()]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s(a.price)+"\n                ")]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s("x1")+"\n                ")]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s(a.price)+"\n                ")]),e("div",{staticClass:"table__button"},[e("div",{on:{click:function(a){return t.deleteAdd(s)}}},[e("BaseIcon",{attrs:{name:"trash-alt"}})],1)])])}),0)]:t._e(),e("div",{staticStyle:{"margin-top":"15px"}},[e("el-button",{staticStyle:{"padding-top":"0","text-decoration":"underline"},attrs:{type:"text"},on:{click:t.openAddEdit}},[t._v(" 加購 ")]),e("el-button",{staticStyle:{"padding-top":"0","text-decoration":"underline","margin-left":"15px"},attrs:{type:"text"},on:{click:t.openTotalEdit}},[t._v(" 變價 ")])],1),t.totalEditList.length>0?[e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px"}},t._l(t.totalEditList,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v("\n                  "+t._s(t.totalEditTitle(a.type))+"\n                  "),a.title?e("span",[e("br"),t._v("\n                    ("+t._s(a.title)+")")]):t._e()]),e("div",{staticClass:"table__item"},[t._v(" "+t._s(a.price)+" "),"%"===a.type?e("span",[t._v("%")]):t._e()]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s("x1")+"\n                ")]),e("div",{staticClass:"table__item"},["+"===a.type?e("span",[t._v("+ "+t._s(a.price))]):t._e(),"-"===a.type?e("span",[t._v("- "+t._s(a.price))]):t._e(),"%"===a.type?e("span",[t._v("- "+t._s(a.discount))]):t._e()]),e("div",{staticClass:"table__button"},[e("div",{on:{click:function(a){return t.deleteTotalEdit(s)}}},[e("BaseIcon",{attrs:{name:"trash-alt"}})],1)])])}),0)]:t._e(),e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" 應付金額 ")]),e("div",{staticClass:"table__single"},[t._v("\n                "+t._s(t.childrenOrderTotal)+"\n              ")]),e("div",{staticClass:"table__button"})])])],2)]:[t.isEditMode&&t.isOutSide?[e("div",{staticClass:"table__block"},[e("BaseCollapse",{staticStyle:{"margin-bottom":"30px"},attrs:{expanded:"","is-table":""},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"table__head",staticStyle:{padding:"0"}},[e("div",{staticClass:"table__title",staticStyle:{padding:"10px",width:"90%"}},[e("div",{staticStyle:{cursor:"pointer"}},[e("BaseIcon",{staticStyle:{"font-size":"16px"},attrs:{name:"angle-down"}}),t._v(" 訂單 "+t._s(t.submitData.id)+"\n                      "),0===t.submitData.status?[e("BaseStateLabel",{attrs:{state:"info",text:""}},[e("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t._f("bookingStatusFilter")(t.submitData.status,"text")))])])]:[e("BaseStateLabel",{attrs:{state:t._f("paymentStatusMapFilter")(t.submitData.paymentStatus,"color"),text:""}},[e("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t._f("paymentStatusMapFilter")(t.submitData.paymentStatus,"text")))])])]],2)]),e("div",{staticClass:"table__single"},[e("el-dropdown",{ref:"more",attrs:{trigger:"click","hide-on-click":!0},on:{command:t.handleCommand}},[e("div",{staticStyle:{cursor:"pointer",padding:"10px",width:"20%"},on:{click:function(a){a.stopPropagation(),t.$refs.more&&t.$refs.more.show()}}},[e("BaseIcon",{staticStyle:{"font-size":"16px"},attrs:{name:"ellipsis-v"}})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[0===t.submitData.status||t.isPaid?t._e():e("el-dropdown-item",{attrs:{command:{command:"editOpenTotalEdit",index:"main"}}},[t._v("編輯價格與折扣")]),0===t.submitData.status||t.isPaid?t._e():e("el-dropdown-item",{attrs:{command:{command:"editOpenPaymentMethod",index:"main"}}},[t._v("編輯付款方式")]),e("el-dropdown-item",{attrs:{command:{command:"editOpenHistory",index:"main"}}},[t._v("訂單變更記錄")]),0!==t.submitData.status&&6!==t.submitData.status?e("el-dropdown-item",{attrs:{command:{command:"tryToCancelOrder",index:"main"}}},[t._v("取消訂單")]):t._e(),t.isPaid&&"Prepaid"!==t.submitData.paymentMethod&&0!==t.submitData.backBalance?e("el-dropdown-item",{attrs:{command:{command:"editOpenRefund",index:"main"}}},[t._v("退款")]):t._e()],1)],1)],1)])]},proxy:!0}],null,!1,3562136563)},[e("div",[e("div",[e("div",{staticClass:"table__head isEdit"},[e("div",{staticClass:"table__title"},[t._v(" 預約項目 ")]),e("div",{staticClass:"table__item"},[t._v(" 售價 ")]),e("div",{staticClass:"table__item"},[t._v(" 數量 ")]),e("div",{staticClass:"table__item"},[t._v(" 小計 ")])]),e("div",{staticClass:"table__box"},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v("\n                        "+t._s(t.params[0].title)+"\n                      ")]),e("div",{staticClass:"table__item"},[t._v("\n                        "+t._s(t.params[0].price)+"\n                      ")]),e("div",{staticClass:"table__item"},[t._v(" x"+t._s(t.params[0].qty)+" ")]),e("div",{staticClass:"table__item"},[t._v("\n                        "+t._s(t.params[0].total*t.params[0].qty)+"\n                      ")])]),t.prepaidItem&&t.prepaidItem.id?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" "+t._s(t.prepaidItem.title)+" ")]),e("div",{staticClass:"table__single"},[t._v(" "+t._s(t.prepaidItem.total)+" ")])]):t._e(),t.couponItem&&t.couponItem.id?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" "+t._s("優惠券 ("+t.couponItem.title+")")+" ")]),e("div",{staticClass:"table__single"},[t._v("\n                        "+t._s(t.couponItem.total)+"\n                      ")])]):t._e(),e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" 小計 ")]),e("div",{staticClass:"table__single"},[t._v("\n                        "+t._s(t.editServiceTotal)+"\n                      ")])])])]),t.editPamamsOther.length>0?[e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px"}},t._l(t.editPamamsOther,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},["cosmetic-add"===a.type?e("span",[t._v(t._s(a.title))]):e("span",[t._v("\n                          "+t._s(t.totalEditTitle(a.type))+"\n                          "),a.title?e("span",[e("br"),t._v("\n                            ("+t._s(a.title)+")")]):t._e()])]),e("div",{staticClass:"table__item"},["%"===a.type?e("span",[t._v(t._s(a.description)+" %")]):e("span",[t._v(t._s(a.total)+" ")])]),e("div",{staticClass:"table__item"},[t._v("\n                        "+t._s("x1")+"\n                      ")]),e("div",{staticClass:"table__item"},[t._v("\n                        "+t._s(a.total)+"\n                      ")])])}),0)]:t._e(),e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title",staticStyle:{width:"50%"}},[t._v(" 應付金額 \n                      ")]),e("div",{staticClass:"table__single",staticStyle:{width:"40%"}},[t._v("\n                      "+t._s(t.submitData.payTotal)+"\n                    ")])]),t.submitData.refundHistories.length>0?t._l(t.submitData.refundHistories,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"alert-word table__title",staticStyle:{width:"50%"}},[t._v(t._s(a.refundDate)+"退款")]),e("div",{staticClass:" alert-word table__single",staticStyle:{width:"50%"}},[t._v("-"+t._s(a.Amt))])])}):t._e()],2)],2),e("BaseCollapse",{class:t.$style.payment,attrs:{title:"付款資訊"}},[e("ul",{staticStyle:{padding:"0 15px","padding-bottom":"10px"}},[e("li",[e("span",{staticClass:"title"},[t._v("付款方式")]),e("span",{staticClass:"content"},[t._v(t._s(t.orderPaymentMethodMap[t.submitData.paymentMethod]||"不指定"))]),t.submitData.prepaid?e("span",["Prepaid"===t.submitData.paymentMethod?e("span",{staticStyle:{color:"lightgray"}},[t._v("（"+t._s(t.submitData.prepaid.title)+"）")]):t._e()]):t._e()]),"Prepaid"===t.submitData.paymentMethod&&t.submitData.prepaid?e("li",[e("span",{staticClass:"title"},[t._v("抵扣次數")]),e("span",{staticClass:"content"},[t._v(t._s(t.submitData.prepaid.deductTimes)+" 次 ")])]):t._e(),e("li",[e("span",{staticClass:"title"},[t._v("付款時間")]),e("span",{staticClass:"content"},[t._v(t._s(t.paidAt(t.submitData)))])]),"Vacc"!==t.submitData.paymentMethod&&"Prepaid"!==t.submitData.paymentMethod?e("li",[e("span",{staticClass:"title"},[t._v("付款期限")]),e("span",{staticClass:"content"},[t._v(t._s(t.paymentExpiredDate(t.submitData)))])]):t._e(),t.submitData.Vacc?[e("li",{staticStyle:{"border-top":"1px solid #dcdfe6"}},[e("span",{staticClass:"title"},[t._v("轉帳銀行")]),e("span",{staticClass:"content"},[t._v(t._s(t.submitData.Vacc.Bank+" "+t.submitData.Vacc.BankCode))])]),e("li",[e("span",{staticClass:"title"},[t._v("轉帳帳號")]),e("span",{staticClass:"content"},[t._v(t._s(t.submitData.Vacc.VACCNo))])]),e("li",[e("span",{staticClass:"title"},[t._v("轉帳期限")]),e("span",{staticClass:"content"},[t._v(t._s(t._f("formatDate")(t.submitData.paymentExpiredDate,"dateTime")))])])]:t._e(),t.submitData.Card4No?[e("li",[e("span",{staticClass:"title"},[t._v("信用卡末四碼")]),e("span",{staticClass:"content"},[t._v(t._s(t.submitData.Card4No))])])]:t._e(),t.submitData.PayerAccount5Code?[e("li",[e("span",{staticClass:"title"},[t._v("匯款帳號末五碼")]),e("span",{staticClass:"content"},[t._v(t._s(t.submitData.PayerAccount5Code))])])]:t._e()],2)])],1),t._l(t.childrenOrders,function(a,s){return e("BaseCollapse",{key:s,staticStyle:{"margin-bottom":"30px"},attrs:{"is-table":""},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"table__head",staticStyle:{padding:"0"}},[e("div",{staticClass:"table__title",staticStyle:{padding:"10px 0 10px 10px",width:"90%"}},[e("div",{staticStyle:{cursor:"pointer"}},[e("BaseIcon",{staticStyle:{"font-size":"16px"},attrs:{name:"angle-down"}}),t._v(" 子訂單 "+t._s(a.id)+" \n                      "),0===a.status?[e("BaseStateLabel",{attrs:{state:"info",text:""}},[e("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t._f("bookingStatusFilter")(a.status,"text")))])])]:[e("BaseStateLabel",{attrs:{state:t._f("paymentStatusMapFilter")(a.paymentStatus,"color"),text:""}},[e("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t._f("paymentStatusMapFilter")(a.paymentStatus,"text")))])])]],2)]),e("div",{staticClass:"table__single"},[e("el-dropdown",{ref:"more"+s,refInFor:!0,attrs:{trigger:"click","hide-on-click":!0},on:{command:t.handleCommand}},[e("div",{staticStyle:{cursor:"pointer",padding:"10px",width:"20%"},on:{click:function(a){a.stopPropagation(),t.$refs["more"+s][0]&&t.$refs["more"+s][0].show()}}},[e("BaseIcon",{staticStyle:{"font-size":"16px"},attrs:{name:"ellipsis-v"}})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[0!==a.status&&"UNPAID"===a.paymentStatus?e("el-dropdown-item",{attrs:{command:{command:"editOpenTotalEdit",index:s}}},[t._v("編輯價格與折扣")]):t._e(),0!==a.status&&"UNPAID"===a.paymentStatus?e("el-dropdown-item",{attrs:{command:{command:"editOpenPaymentMethod",index:s}}},[t._v("編輯付款方式")]):t._e(),e("el-dropdown-item",{attrs:{command:{command:"editOpenHistory",index:s}}},[t._v("訂單變更記錄")]),0!==a.status&&6!==a.status?e("el-dropdown-item",{attrs:{command:{command:"tryToCancelOrder",index:s}}},[t._v("取消訂單")]):t._e(),"PAID"===a.paymentStatus&&"Prepaid"!==a.paymentMethod&&0!==a.backBalance?e("el-dropdown-item",{attrs:{command:{command:"editOpenRefund",index:s}}},[t._v("退款")]):t._e()],1)],1)],1)])]},proxy:!0}],null,!0)},[e("div",[e("div",[e("div",{staticClass:"table__head isEdit"},[e("div",{staticClass:"table__title"},[t._v(" 加購項目 ")]),e("div",{staticClass:"table__item"},[t._v(" 售價 ")]),e("div",{staticClass:"table__item"},[t._v(" 數量 ")]),e("div",{staticClass:"table__item"},[t._v(" 小計 ")])])]),a.params.length>0?[e("div",{staticClass:"table__box"},t._l(a.params,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},["cosmetic-add"===a.type?e("span",[t._v(t._s(a.title))]):e("span",[t._v("\n                          "+t._s(t.totalEditTitle(a.type))+"\n                          "),a.title?e("span",[e("br"),t._v("\n                            ("+t._s(a.title)+")")]):t._e()])]),e("div",{staticClass:"table__item"},["%"===a.type?e("span",[t._v(t._s(a.description)+" %")]):e("span",[t._v(t._s(a.total)+" ")])]),e("div",{staticClass:"table__item"},[t._v("\n                        "+t._s("x1")+"\n                      ")]),e("div",{staticClass:"table__item"},[t._v("\n                        "+t._s(a.total)+"\n                      ")])])}),0)]:t._e(),e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title",staticStyle:{width:"50%"}},[t._v(" 應付金額 \n                      ")]),e("div",{staticClass:"table__single",staticStyle:{width:"40%"}},[t._v("\n                      "+t._s(a.payTotal)+"\n                    ")])]),a.refundHistories.length>0?t._l(a.refundHistories,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"alert-word table__title",staticStyle:{width:"50%"}},[t._v(t._s(a.refundDate)+"退款")]),e("div",{staticClass:" alert-word table__single",staticStyle:{width:"50%"}},[t._v("-"+t._s(a.Amt))])])}):t._e()],2)],2),e("BaseCollapse",{class:t.$style.payment,attrs:{title:"付款資訊","small-title":""}},[e("ul",{staticStyle:{padding:"0 15px","padding-bottom":"10px"}},[e("li",[e("span",{staticClass:"title"},[t._v("付款方式")]),e("span",{staticClass:"content"},[t._v(t._s(t.orderPaymentMethodMap[a.paymentMethod]||"不指定"))]),a.prepaid?e("span",["Prepaid"===a.paymentMethod?e("span",{staticStyle:{color:"lightgray"}},[t._v("（"+t._s(a.prepaid.title)+"）")]):t._e()]):t._e()]),"Prepaid"===a.paymentMethod&&a.prepaid?e("li",[e("span",{staticClass:"title"},[t._v("抵扣次數")]),e("span",{staticClass:"content"},[t._v(t._s(a.prepaid.deductTimes)+" 次 ")])]):t._e(),e("li",[e("span",{staticClass:"title"},[t._v("付款時間")]),e("span",{staticClass:"content"},[t._v(t._s(t.paidAt(a)))])]),"Vacc"!==a.paymentMethod&&"Prepaid"!==a.paymentMethod?e("li",[e("span",{staticClass:"title"},[t._v("付款期限")]),e("span",{staticClass:"content"},[t._v(t._s(t.paymentExpiredDate(a)))])]):t._e(),a.Vacc?[e("li",{staticStyle:{"border-top":"1px solid #dcdfe6"}},[e("span",{staticClass:"title"},[t._v("轉帳銀行")]),e("span",{staticClass:"content"},[t._v(t._s(a.Vacc.Bank+" "+a.Vacc.BankCode))])]),e("li",[e("span",{staticClass:"title"},[t._v("轉帳帳號")]),e("span",{staticClass:"content"},[t._v(t._s(a.Vacc.VACCNo))])]),e("li",[e("span",{staticClass:"title"},[t._v("轉帳期限")]),e("span",{staticClass:"content"},[t._v(t._s(t._f("formatDate")(a.paymentExpiredDate,"dateTime")))])])]:t._e(),a.Card4No?[e("li",[e("span",{staticClass:"title"},[t._v("信用卡末四碼")]),e("span",{staticClass:"content"},[t._v(t._s(a.Card4No))])])]:t._e(),a.PayerAccount5Code?[e("li",[e("span",{staticClass:"title"},[t._v("匯款帳號末五碼")]),e("span",{staticClass:"content"},[t._v(t._s(a.PayerAccount5Code))])])]:t._e()],2)])],1)})],2)]:t._e(),t.isEditMode&&!t.isOutSide?e("div",{staticClass:"table__block"},[t.isMainOrder?e("div",[t._m(1),e("div",{staticClass:"table__box"},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v("\n                  "+t._s(t.params[0].title)+"\n                ")]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s(t.params[0].price)+"\n                ")]),e("div",{staticClass:"table__item"},[t._v(" x"+t._s(t.params[0].qty)+" ")]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s(t.params[0].total*t.params[0].qty)+"\n                ")]),e("div",{staticClass:"table__button"})]),t.prepaidItem&&t.prepaidItem.id?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" "+t._s(t.prepaidItem.title)+" ")]),e("div",{staticClass:"table__single"},[t._v(" "+t._s(t.prepaidItem.total)+" ")]),e("div",{staticClass:"table__button"})]):t._e(),t.hasCouponInfo?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" "+t._s("優惠券 ("+t.couponInfo.code+")")+" ")]),e("div",{staticClass:"table__single"},[t._v("\n                  "+t._s(t.couponPriceTotal-t.serviceTotal)+"\n                ")]),e("div",{staticClass:"table__button"})]):t._e(),e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" 小計 ")]),e("div",{staticClass:"table__single"},[t.prepaidItem?e("span",[t._v("0")]):e("span",[t._v(t._s(t.couponPriceTotal))])]),e("div",{staticClass:"table__button"})])])]):t._e(),t.haveItems.length>0?[t.isMainOrder?t._e():e("div",{staticClass:"table__head"},[e("div",{staticClass:"table__title"},[t._v(" 加購項目 ")]),e("div",{staticClass:"table__item"},[t._v(" 售價 ")]),e("div",{staticClass:"table__item"},[t._v(" 數量 ")]),e("div",{staticClass:"table__item"},[t._v(" 小計 ")]),e("div",{staticClass:"table__button"})]),e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px"}},t._l(t.haveItems,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},["cosmetic-add"===a.type?[a.title?e("span",[t._v(t._s(a.title))]):t._e()]:[t._v("\n                    "+t._s(t.totalEditTitle(a.type))+"\n                    "),a.title?e("span",[e("br"),t._v("\n                      ("+t._s(a.title)+")")]):t._e()]],2),e("div",{staticClass:"table__item"},["cosmetic-add"===a.type?[t._v("\n                    "+t._s(a.price)+"\n                  ")]:[t._v(" "+t._s(a.price)+" "),"%"===a.type?e("span",[t._v("%")]):t._e()]],2),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s("x1")+"\n                ")]),e("div",{staticClass:"table__item"},["cosmetic-add"===a.type?[t._v("\n                    "+t._s(a.price)+"\n                  ")]:["+"===a.type?e("span",[t._v("+ "+t._s(a.price))]):t._e(),"-"===a.type?e("span",[t._v("- "+t._s(a.price))]):t._e(),"%"===a.type?e("span",[t._v("- "+t._s(a.discount))]):t._e()]],2),e("div",{staticClass:"table__button"},[e("div",{on:{click:function(e){return t.deleteHave(a.id,s)}}},[e("BaseIcon",{attrs:{name:"trash-alt"}})],1)])])}),0)]:t._e(),e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},t._l(t.moreItems,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},["cosmetic-add"===a.type?[a.title?e("span",[t._v(t._s(a.title))]):t._e()]:[t._v("\n                  "+t._s(t.totalEditTitle(a.type))+"\n                  "),a.title?e("span",[e("br"),t._v("\n                    ("+t._s(a.title)+")")]):t._e()]],2),e("div",{staticClass:"table__item"},["cosmetic-add"===a.type?[t._v("\n                  "+t._s(a.price)+"\n                ")]:[t._v(" "+t._s(a.price)+" "),"%"===a.type?e("span",[t._v("%")]):t._e()]],2),e("div",{staticClass:"table__item"},[t._v("\n                "+t._s("x1")+"\n              ")]),e("div",{staticClass:"table__item"},["cosmetic-add"===a.type?[t._v("\n                  "+t._s(a.price)+"\n                ")]:["+"===a.type?e("span",[t._v("+ "+t._s(a.price))]):t._e(),"-"===a.type?e("span",[t._v("- "+t._s(a.price))]):t._e(),"%"===a.type?e("span",[t._v("- "+t._s(a.discount))]):t._e()]],2),e("div",{staticClass:"table__button"},[e("div",{on:{click:function(a){return t.deleteMore(s)}}},[e("BaseIcon",{attrs:{name:"trash-alt"}})],1)])])}),0),e("el-button",{staticStyle:{"padding-top":"0","text-decoration":"underline"},attrs:{type:"text"},on:{click:t.openAddEdit}},[t._v(" 新增加購 ")]),e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" 應付金額 ")]),e("div",{staticClass:"table__single"},[t._v("\n                "+t._s(t.submitPriceTotal)+"\n              ")]),e("div",{staticClass:"table__button"})])])],2):t._e(),t.isEditMode?t._e():e("div",{staticClass:"table__block"},[e("div",[t.submitDataPrepaid.prepaidId?[t._m(2),e("div",{staticClass:"table__box",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title",staticStyle:{width:"60%"}},[t._v(" "+t._s(t.currentBuyPrepaid.title)+" ")]),e("div",{staticClass:"table__single",staticStyle:{width:"30%"}},[t._v("\n                    "+t._s(t.currentBuyPrepaid.price)+"\n                  ")]),e("div",{staticClass:"table__button"})])])]:t._e(),t._m(3),t.params[0].priceId?e("div",{staticClass:"table__box"},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v("\n                  "+t._s(t.params[0].title)+"\n                ")]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s(t.params[0].price)+"\n                ")]),e("div",{staticClass:"table__item"},[t._v(" x"+t._s(t.MaxQty)+" ")]),e("div",{staticClass:"table__item"},[t._v("\n                  "+t._s(t.params[0].price*t.MaxQty)+"\n                ")]),e("div",{staticClass:"table__button"})]),t.submitData.prepaidOrderUuid?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" "+t._s("包月抵扣")+" ")]),e("div",{staticClass:"table__single"},[t._v(" -"+t._s(t.serviceTotal)+" ")]),e("div",{staticClass:"table__button"})]):t._e(),t.submitDataPrepaid.prepaidId?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" "+t._s("包月抵扣")+" ")]),e("div",{staticClass:"table__single"},[t._v(" -"+t._s(t.serviceTotal)+" ")]),e("div",{staticClass:"table__button"})]):t._e(),t.hasCouponInfo?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" "+t._s("優惠券 ("+t.couponInfo.code+")")+" ")]),e("div",{staticClass:"table__single"},[t._v("\n                  "+t._s(t.couponPriceTotal-t.serviceTotal)+"\n                ")]),e("div",{staticClass:"table__button"})]):t._e(),t.submitData.prepaidOrderUuid||t.submitDataPrepaid.prepaidId?e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" 小計 ")]),e("div",{staticClass:"table__single"},[t._v("\n                  "+t._s(0)+"\n                ")]),e("div",{staticClass:"table__button"})]):e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" 小計 ")]),e("div",{staticClass:"table__single"},[t._v("\n                  "+t._s(t.couponPriceTotal)+"\n                ")]),e("div",{staticClass:"table__button"})])]):t._e()],2),t.addList.length>0||t.totalEditList.length>0?e("div",[t.addList.length>0?[e("div",{staticClass:"inline-between",staticStyle:{"margin-top":"15px"}},[t._v("\n                加購項目\n                "),e("el-button",{staticStyle:{"padding-top":"0","text-decoration":"underline"},attrs:{type:"text"},on:{click:t.openAddEdit}},[t._v(" 編輯加購 ")])],1),e("div",{staticClass:"table__box"},t._l(t.addList,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},[a.title?e("span",[t._v(t._s(a.title))]):t._e()]),e("div",{staticClass:"table__item"},[t._v("\n                    "+t._s(a.price)+"\n                  ")]),e("div",{staticClass:"table__item"},[t._v("\n                    "+t._s("x1")+"\n                  ")]),e("div",{staticClass:"table__item"},[t._v("\n                    "+t._s(a.price)+"\n                  ")]),e("div",{staticClass:"table__button"},[e("div",{on:{click:function(a){return t.deleteAdd(s)}}},[e("BaseIcon",{attrs:{name:"trash-alt"}})],1)])])}),0)]:t._e(),t.totalEditList.length>0?[e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px"}},t._l(t.totalEditList,function(a,s){return e("div",{key:s,staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v("\n                    "+t._s(t.totalEditTitle(a.type))+"\n                    "),a.title?e("span",[e("br"),t._v("\n                      ("+t._s(a.title)+")")]):t._e()]),e("div",{staticClass:"table__item"},[t._v(" "+t._s(a.price)+" "),"%"===a.type?e("span",[t._v("%")]):t._e()]),e("div",{staticClass:"table__item"},[t._v("\n                    "+t._s("x1")+"\n                  ")]),e("div",{staticClass:"table__item"},["+"===a.type?e("span",[t._v("+ "+t._s(a.price))]):t._e(),"-"===a.type?e("span",[t._v("- "+t._s(a.price))]):t._e(),"%"===a.type?e("span",[t._v("- "+t._s(a.discount))]):t._e()]),e("div",{staticClass:"table__button"},[e("div",{on:{click:function(a){return t.deleteTotalEdit(s)}}},[e("BaseIcon",{attrs:{name:"trash-alt"}})],1)])])}),0)]:t._e()],2):t._e(),e("div",{staticClass:"table__box",staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"table__row"},[e("div",{staticClass:"table__title"},[t._v(" 應付金額 ")]),e("div",{staticClass:"table__single"},[t.submitDataPrepaid.prepaidId?e("span",[t._v(" "+t._s(t.currentBuyPrepaid.price)+" + ")]):t._e(),t._v("\n                "+t._s(t.submitPriceTotal)+"\n              ")]),e("div",{staticClass:"table__button"})])])])]],2)]),t._t("default")],2)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table__head"},[e("div",{staticClass:"table__title"},[t._v(" 加購項目 ")]),e("div",{staticClass:"table__item"},[t._v(" 售價 ")]),e("div",{staticClass:"table__item"},[t._v(" 數量 ")]),e("div",{staticClass:"table__item"},[t._v(" 小計 ")]),e("div",{staticClass:"table__button"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table__head"},[e("div",{staticClass:"table__title"},[t._v(" 預約項目 ")]),e("div",{staticClass:"table__item"},[t._v(" 售價 ")]),e("div",{staticClass:"table__item"},[t._v(" 數量 ")]),e("div",{staticClass:"table__item"},[t._v(" 小計 ")]),e("div",{staticClass:"table__button"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table__head"},[e("div",{staticClass:"table__title"},[t._v(" 購買包月 ")]),e("div",{staticClass:"table__single"},[t._v(" 售價 ")]),e("div",{staticClass:"table__button"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table__head"},[e("div",{staticClass:"table__title"},[t._v(" 預約項目 ")]),e("div",{staticClass:"table__item"},[t._v(" 售價 ")]),e("div",{staticClass:"table__item"},[t._v(" 數量 ")]),e("div",{staticClass:"table__item"},[t._v(" 小計 ")]),e("div",{staticClass:"table__button"})])}],l=e("f210"),n=e("a315"),_=e("6bea"),d=e("7e02"),c={components:{BaseStateLabel:function(){return Object(n["a"])(e.e("chunk-12bed50d").then(e.bind(null,"38d1")))},BaseCollapse:function(){return Object(n["a"])(e.e("chunk-f797d1f4").then(e.bind(null,"da06")))}},filters:{formatDate:_["a"],paymentStatusMapFilter:d["q"],bookingStatusFilter:d["a"]},props:{isMainOrder:{type:Boolean,default:!1},isChildren:{type:Boolean,default:!1},deleteIds:{type:Array,default:function(){return[]}},adds:{type:Array,default:function(){return[]}},haveItems:{type:Array,default:function(){return[]}},moreItems:{type:Array,default:function(){return[]}},submitData:{type:Object,default:function(){}},submitDataPrepaid:{type:Object,default:function(){}},currentBuyPrepaid:{type:Object,default:function(){}},orderParams:{type:Array,default:function(){return[]}},orderTotalEditList:{type:Array,default:function(){return[]}},orderAddList:{type:Array,default:function(){return[]}},couponInfo:{type:Object,default:function(){}},serviceTotal:{type:Number,default:0},couponPriceTotal:{type:Number,default:0},submitPriceTotal:{type:Number,default:0},childrenOrderTotal:{type:Number,default:0},hasCouponInfo:{type:Boolean,default:!1},isOutSide:{type:Boolean,default:!1},isEditMode:{type:Boolean,default:!1},isPaid:{type:Boolean,default:!1}},data:function(){return{orderPaymentMethodMap:d["l"],MaxQty:1,tableFixHeight:0,mainTableItemShow:!0}},computed:{params:{get:function(){return this.orderParams},set:function(t){this.$emit("update:orderParams",t)}},totalEditList:{get:function(){return this.orderTotalEditList},set:function(t){this.$emit("update:orderTotalEditList",t)}},addList:{get:function(){return this.orderAddList},set:function(t){this.$emit("update:orderAddList",t)}},prepaidItem:function(){return this.params.find(function(t){return"prepaid"===t.type})},couponItem:function(){return this.params.find(function(t){return"coupon"===t.type})},editTotalEditList:function(){var t=["+","-","%"];return this.params.filter(function(a){return t.includes(a.type)})},editAddList:function(){return this.params.filter(function(t){return"cosmetic-add"===t.type})},editServiceTotal:function(){var t=0;return t=this.prepaidItem?0:this.couponItem?this.params[0].total+this.couponItem.total:this.params[0].total,t},tableReduceHeight:function(){var t="";return t=this.isChildren?"230px":this.isOutSide?this.isEditMode?"230px":"380px":"270px",t},editPamamsOther:function(){var t=Object(l["a"])(this.submitData.params);return t.splice(0,1),t.forEach(function(a,e){"coupon"===a.type&&t.splice(e,1)}),t.forEach(function(a,e){"prepaid"===a.type&&t.splice(e,1)}),t},childrenOrders:function(){return this.submitData.childrenOrders}},watch:{},mounted:function(){},created:function(){},methods:{paymentExpiredDate:function(t){return 1===t.allowExpired?"無（可逾期付款）":Object(_["a"])(t.paymentExpiredDate,"dateTime")},paidAt:function(t){return!1===!!t.paidAt?"無":Object(_["a"])(t.paidAt,"dateTime")},totalEditTitle:function(t){var a="";switch(t){case"+":a="加價";break;case"-":a="減價";break;case"%":a="折扣";break}return a},discount:function(t){return t.price},deleteTotalEdit:function(t,a){this.isChildren?this.totalEditList.splice(t,1):this.isEditMode||this.totalEditList.splice(t,1),"isEdit"===a&&(this.deleteIds.push(this.totalEditList[t].id),this.totalEditList.splice(t,1))},deleteAdd:function(t,a){this.isChildren?this.addList.splice(t,1):this.isEditMode||this.addList.splice(t,1),"isEdit"===a&&(this.deleteIds.push(this.addList[t].id),this.addList.splice(t,1))},deleteMore:function(t){var a=Object(l["a"])(this.haveItems);a.splice(t,1),this.$emit("update:moreItems",a)},deleteHave:function(t,a){var e=Object(l["a"])(this.haveItems);e.splice(a,1),this.$emit("update:haveItems",e);var s=Object(l["a"])(this.deleteIds);s.push(t),this.$emit("update:deleteIds",s)},openAddEdit:function(){this.$emit("openAdd")},openTotalEdit:function(){this.$emit("openTotalEdit")},handleCommand:function(t){this[t.command](t.index)},editOpenTotalEdit:function(t){this.$emit("editOpenTotalEdit",t)},editOpenPaymentMethod:function(t){this.$emit("editOpenPaymentMethod",t)},editOpenHistory:function(t){this.$emit("editOpenHistory",t)},tryToCancelOrder:function(t){this.$emit("tryToCancelOrder",t)},editOpenRefund:function(t){this.$emit("editOpenRefund",t)}}},o=c,r=e("3799"),p=e("2877");function v(t){this["$style"]=r["default"].locals||r["default"]}var m=Object(p["a"])(o,s,i,!1,v,null,null);a["default"]=m.exports},3799:function(t,a,e){"use strict";var s=e("6e3b"),i=e.n(s);a["default"]=i.a},"6e3b":function(t,a,e){t.exports={slide:"TotalTable_slide_19yIj","slide-reverse":"TotalTable_slide-reverse_3Wiaw",wrapper:"TotalTable_wrapper_2suny",table:"TotalTable_table_1XQyd",payment:"TotalTable_payment_3y0TO"}}}]);
//# sourceMappingURL=chunk-6acd3794.a3603492.js.map