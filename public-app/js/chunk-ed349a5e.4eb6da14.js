(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed349a5e"],{2026:function(e,t,r){"use strict";var a=r("de7f"),i=r.n(a);t["default"]=i.a},"3fa5":function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return n});var a=r("5c96");function i(e){"add"===e&&Object(a["Message"])({message:"已新增",type:"success"}),"edit"===e&&Object(a["Message"])({message:"已儲存",type:"success"})}function n(){Object(a["Message"])({message:"已刪除",type:"success"})}},"565b":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("div",{staticClass:"btn-top-box p-0",class:e.$style.btnTop},[r("span",[r("el-button",{staticClass:"is-round",attrs:{type:"primary"},on:{click:function(t){return e.createDetail({})}}},[r("BaseIcon",{attrs:{name:"plus"}}),r("span",[e._v("新增")])],1)],1)])]),r("div",[r("BaseTableSearch",{staticClass:"isForTab",attrs:{"hide-action":"","default-value":e.filterData},on:{reset:e.onFilterReset,tryToFetchList:e.tryToFetchListFilter},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.fields;return[r("el-form-item",{attrs:{prop:"productId"}},[r("el-select",{attrs:{placeholder:"所有地點"},on:{change:e.tryToFetchListFilter},model:{value:a.productId,callback:function(t){e.$set(a,"productId",t)},expression:"fields.productId"}},[r("el-option",{attrs:{label:"所有分店",value:""}}),e._l(e.merchantProducts,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2)],1),r("el-form-item",{attrs:{prop:"petCategoryId"}},[r("el-select",{attrs:{placeholder:"選擇寵物類別"},on:{change:e.tryToFetchListFilter},model:{value:a.petCategoryId,callback:function(t){e.$set(a,"petCategoryId",t)},expression:"fields.petCategoryId"}},[r("el-option",{attrs:{label:"所有類別",value:""}}),e._l(e.serviceCategory,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})],2)],1)]}}])}),r("div",{staticClass:"el-table-wrapper"},[r("ElTableDraggable",{attrs:{handle:".handle"},on:{drag:e.startDraggable,drop:e.endDraggable}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tryingFetch,expression:"tryingFetch"}],class:e.$style["table"],attrs:{data:e.tableData,"element-loading-text":"取得服務資訊中"},on:{"~row-click":function(t){return e.goToDetail(t)},"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{label:"圖片","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("el-image",{staticClass:"image image--square",attrs:{src:t.images[0]?t.images[0].path:"",fit:"cover"}},[r("div",{attrs:{slot:"error"},slot:"error"},[r("BaseIcon",{staticClass:"image--error",attrs:{name:"image"}})],1)])]}}])}),r("el-table-column",{attrs:{label:"名稱",prop:"title","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("div",[e._v(e._s(a.title))])]}}])}),r("el-table-column",{attrs:{label:"類別",prop:"type","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(e._s(r.petCategoryTitle))]}}])}),e.filterData.productId||e.filterData.petCategoryId?e._e():r("el-table-column",{attrs:{"min-width":"60"}},[r("el-tooltip",{attrs:{content:"拖曳改變排序",placement:"top"}},[r("el-button",{staticClass:"handle",attrs:{type:"text"}},[r("BaseIcon",{attrs:{"icon-style":"fas",name:"grip-vertical"}})],1)],1)],1)],1)],1)],1)],1)])},i=[],n=r("f210"),s=r("4795"),o=r.n(s),c=r("cb0c"),l=r("a315"),u=r("62d4"),d=r("8914"),p=r("1b80"),h=r("7e02"),f=r("6bea"),g=(r("3fa5"),r("df73"),{page:{title:"服務項目",meta:[{name:"description",content:"Prepaid List"}]},components:{BaseButtonDialog:u["default"],ElTableDraggable:d["a"],BaseStateLabel:function(){return Object(l["a"])(r.e("chunk-12bed50d").then(r.bind(null,"38d1")))}},filters:{productTypeFilter:h["y"],priceStatusFilter:h["v"],prepaidCapacityFilter:h["t"],formatDateRange:f["b"]},mixins:[p["c"]],props:{merchantProducts:{type:Array,required:!0},serviceCategory:{type:Array,required:!0},type:{type:String,default:""}},data:function(){return{tableData:[],selectedCoupons:[],selectedDetail:{},filterData:{state:"",productId:"",type:"",petCategoryId:"",petSizeId:"",groupByGroupOrdering:1},productTypeList:Object.freeze(h["z"]),visibleDetail:!1,previousPage:1,previousTotal:0,tryingFetchDetail:!1,tryingFetch:!1,pageSize:10,isFilterChange:!1}},computed:{enabledBulkButton:function(){return 0===this.selectedCoupons.length},enabledCopyButton:function(){return 1===this.selectedCoupons.length},activeSizeList:function(){var e=this,t=[];return t=this.filterData.petCategoryId?this.serviceCategory.find(function(t){return t.id===e.filterData.petCategoryId}).children:[],t}},watch:{currentPage:{handler:"tryToFetchList",immediate:!0},filterData:{handler:function(){this.isFilterChange=!0},deep:!0},pageSize:{handler:function(e){1!==this.currentPage?this.currentPage=1:this.tryToFetchList()},immediate:!1},"filterData.petCategoryId":function(e){this.filterData.petSizeId=""}},created:function(){this.$route.params.createPrice&&this.createDetail()},methods:{tryToFetchListFilter:function(){var e=Object(c["a"])(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(1===this.currentPage){e.next=3;break}return this.currentPage=1,e.abrupt("return");case 3:return this.pageQuery.limit=this.pageSize,t="service"===this.type?"product/fetchServicePriceGroup":"product/fetchAdditionalPriceGroup",e.prev=5,this.tryingFetch=!0,e.next=9,this.$store.dispatch("".concat(t),Object.assign({},this.filterData,{paginate:0}));case 9:r=e.sent,this.tableData=r,this.isFilterChange=!1,e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](5);case 16:return e.prev=16,this.tryingFetch=!1,e.finish(16);case 19:case"end":return e.stop()}},e,this,[[5,14,16,19]])}));return function(){return e.apply(this,arguments)}}(),tryToFetchList:function(){var e=Object(c["a"])(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.pageQuery.limit=this.pageSize,t="service"===this.type?"product/fetchServicePriceGroup":"product/fetchAdditionalPriceGroup",e.prev=2,this.tryingFetch=!0,e.next=6,this.$store.dispatch("".concat(t),Object.assign({},this.filterData,{paginate:0}));case 6:r=e.sent,this.tableData=r,e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](2);case 12:return e.prev=12,this.tryingFetch=!1,e.finish(12);case 15:case"end":return e.stop()}},e,this,[[2,10,12,15]])}));return function(){return e.apply(this,arguments)}}(),goToDetail:function(){var e=Object(c["a"])(o.a.mark(function e(t){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{"service"===this.type&&(this.$store.commit("title/SET_TITLE","編輯一般服務"),this.$router.push({name:"view-service",params:{groupOrdering:t.groupOrdering,merchantProducts:this.merchantProducts,serviceCategory:this.serviceCategory}})),"addition"===this.type&&(this.$store.commit("title/SET_TITLE","編輯加購項目"),this.$router.push({name:"view-service",params:{type:"addition",groupOrdering:t.groupOrdering,merchantProducts:this.merchantProducts,serviceCategory:this.serviceCategory}})),this.$emit("update-mode","edit")}finally{}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),createDetail:function(e){"service"===this.type&&(this.$store.commit("title/SET_TITLE","新增一般服務"),this.$router.push({name:"add-service",params:{merchantProducts:this.merchantProducts,serviceCategory:this.serviceCategory}})),"addition"===this.type&&(this.$store.commit("title/SET_TITLE","新增加購項目"),this.$router.push({name:"add-service",params:{type:"addition",merchantProducts:this.merchantProducts,serviceCategory:this.serviceCategory}})),this.$emit("update-mode","add")},onFilterReset:function(){this.tryToFetchList()},handleSelectionChange:function(e){this.selectedCoupons=e},startDraggable:function(){this.cacheTableData=Object(n["a"])(this.tableData)},endDraggable:function(e){var t=e.targetObject,r=(e.list,this.cacheTableData.map(function(e){return e.groupOrdering}).indexOf(t.groupOrdering)),a=this.tableData.map(function(e){return e.groupOrdering}).indexOf(t.groupOrdering),i=a-r;this.tryToOrderingPriceGroup(t.groupOrdering,i)},tryToOrderingPriceGroup:function(){var e=Object(c["a"])(o.a.mark(function e(t,r){var a;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="service"===this.type?"product/orderingServicePriceGroup":"product/orderingAdditionalPriceGroup",e.next=3,this.$store.dispatch("".concat(a),{orderingData:{groupOrdering:t,indexDiff:r}});case 3:this.tryToFetchList();case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}}),m=g,y=r("2026"),v=r("2877");function b(e){this["$style"]=y["default"].locals||y["default"]}var C=Object(v["a"])(m,a,i,!1,b,null,null);t["a"]=C.exports},8012:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("listComponent",{attrs:{"merchant-products":e.merchantProducts,"service-category":e.serviceCategory,type:"service"}})},i=[],n=r("565b"),s={page:{title:"服務項目",meta:[{name:"description",content:"Prepaid List"}]},components:{listComponent:n["a"]},filters:{},props:{merchantProducts:{type:Array,required:!0},serviceCategory:{type:Array,required:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},methods:{}},o=s,c=r("2877"),l=Object(c["a"])(o,a,i,!1,null,null,null);t["default"]=l.exports},8914:function(e,t,r){"use strict";(function(e){var a=r("aa47"),i=function(e,t,r,a,i,n,s,o,c,l){"boolean"!=typeof s&&(c=o,o=s,s=!1);var u,d="function"==typeof r?r.options:r;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),a&&(d._scopeId=a),n?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},d._ssrRegister=u):t&&(u=s?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),u)if(d.functional){var p=d.render;d.render=function(e,t){return u.call(t),p(e,t)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,u):[u]}return r}({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"wrapper"},[t("div",{key:this.tableKey},[this._t("default")],2)])},staticRenderFns:[]},void 0,{name:"ElementUiElTableDraggable",props:{handle:{type:String,default:""},animate:{type:Number,default:100}},data:function(){return{tableKey:0}},methods:{makeTableSortAble:function(){var e=this,t=this.$children[0].$el.querySelector(".el-table__body-wrapper tbody");a["default"].create(t,{handle:this.handle,animation:this.animate,onStart:function(){e.$emit("drag")},onEnd:function(t){var r=t.newIndex,a=t.oldIndex;e.keepWrapperHeight(!0),e.tableKey=Math.random();var i=e.$children[0].data,n=i.splice(a,1)[0];i.splice(r,0,n),e.$emit("drop",{targetObject:n,list:i})}})},keepWrapperHeight:function(e){var t=this.$refs.wrapper;t.style.minHeight=e?t.clientHeight+"px":"auto"}},mounted:function(){this.makeTableSortAble()},watch:{tableKey:function(){var e=this;this.$nextTick(function(){e.makeTableSortAble(),e.keepWrapperHeight(!1)})}}},void 0,!1,void 0,void 0,void 0);function n(e){n.installed||(n.installed=!0,e.component("ElementUiElTableDraggable",i))}var s={install:n},o=null;"undefined"!=typeof window?o=window.Vue:"undefined"!=typeof e&&(o=e.Vue),o&&o.use(s),i.install=n,t["a"]=i}).call(this,r("c8ba"))},de7f:function(e,t,r){e.exports={slide:"listComponent_slide_J8zLM","slide-reverse":"listComponent_slide-reverse_1U3b6",table:"listComponent_table_38dVF",btnTop:"listComponent_btnTop_Q5OVo"}},df73:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return n});var a=r("5c96");function i(e){return a["MessageBox"].confirm("尚未完成新增，請問是否確定離開新增".concat(e),"您將離開此頁面",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}function n(e){return a["MessageBox"].confirm("您確定要刪除".concat(e,"嗎？"),"確認刪除",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}}}]);
//# sourceMappingURL=chunk-ed349a5e.4eb6da14.js.map