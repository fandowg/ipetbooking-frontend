{"version":3,"sources":["webpack:///./src/router/views/member/components/TagManagment.vue?e0a7","webpack:///./src/router/views/member/components/TagManagment.vue?d05a","webpack:///src/router/views/member/components/TagManagment.vue","webpack:///./src/router/views/member/components/TagManagment.vue?ffda","webpack:///./src/router/views/member/components/TagManagment.vue?6013","webpack:///./src/router/views/member/components/TagManagment.vue?3e42"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TagManagment_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TagManagment_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","render","_vm","this","_h","$createElement","_c","_self","ref","attrs","only-dialog","title","dialog-visible","show","destroy","width","floating","on","update:dialogVisible","$event","update:dialog-visible","closed","closeDialog","dialog-opened","tryToFetchList","staticClass","nativeOn","submit","preventDefault","class","$style","alert","type","show-icon","closable","createInput","placeholder","clearable","keydown","indexOf","_k","keyCode","key","model","value","callback","$$v","newTagTitle","trim","expression","slot","name","directives","rawName","create","click","onAdd","_v","list","_l","tag","index","default-value","item-index","current-active-index","activeItemIndex","update","updateActiveIndex","refresh","staticStyle","text-align","color","line-height","staticRenderFns","TagManagmentvue_type_script_lang_js_","components","BaseButtonDialog","TagManagmentListItem","Object","lazyload_component","e","then","bind","data","tagList","tryAdd","dialogVisible","props","Boolean","computed","isEmptyList","length","watch","methods","_tryToFetchList","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","$store","dispatch","search","sent","stop","apply","arguments","tryToAdd","_tryToAdd","_callee2","_context2","abrupt","$message","message","onSave","tryToRemove","$emit","components_TagManagmentvue_type_script_lang_js_","injectStyles","context","TagManagmentvue_type_style_index_0_lang_scss_module_true_","locals","component","componentNormalizer","module","exports","slide","slide-reverse","editInput"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAA2lBI,EAAA,WAAAF,EAAG,4CCA9lB,IAAAG,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,oBAA8BE,IAAA,SAAAC,MAAA,CAAoBC,eAAA,EAAAC,MAAA,OAAAC,iBAAAV,EAAAW,KAAAC,SAAA,EAAAC,MAAA,MAAAC,SAAA,IAAuGC,GAAA,CAAKC,uBAAA,SAAAC,GAAwCjB,EAAAW,KAAAM,GAAgBC,wBAAA,SAAAD,GAA0CjB,EAAAW,KAAAM,GAAgBE,OAAAnB,EAAAoB,YAAAC,gBAAArB,EAAAsB,iBAA8D,CAAAlB,EAAA,WAAgBmB,YAAA,8BAAAC,SAAA,CAAoDC,OAAA,SAAAR,GAA0BA,EAAAS,oBAA2B,CAAAtB,EAAA,gBAAAA,EAAA,YAAoCuB,MAAA3B,EAAA4B,OAAAC,MAAAtB,MAAA,CAA8BE,MAAA,wBAAAqB,KAAA,OAAAC,YAAA,GAAAC,UAAA,MAA+E,GAAA5B,EAAA,gBAAAA,EAAA,YAAwCuB,MAAA3B,EAAA4B,OAAAK,YAAA1B,MAAA,CAAoC2B,YAAA,QAAAC,UAAA,IAAqCpB,GAAA,CAAKqB,QAAA,SAAAnB,GAA2B,IAAAA,EAAAa,KAAAO,QAAA,QAAArC,EAAAsC,GAAArB,EAAAsB,QAAA,WAAAtB,EAAAuB,IAAA,SAAsF,YAAevB,EAAAS,mBAA0Be,MAAA,CAAQC,MAAA1C,EAAA,YAAA2C,SAAA,SAAAC,GAAiD5C,EAAA6C,YAAA,kBAAAD,IAAAE,OAAAF,GAA2DG,WAAA,gBAA2B,CAAA3C,EAAA,YAAiBmB,YAAA,iBAAAhB,MAAA,CAAoCyC,KAAA,SAAAC,KAAA,OAA6BD,KAAA,WAAe5C,EAAA,aAAkB8C,WAAA,EAAaD,KAAA,UAAAE,QAAA,YAAAT,MAAA1C,EAAA,OAAA+C,WAAA,WAA0EpB,MAAA3B,EAAA4B,OAAAwB,OAAA7C,MAAA,CAAiCyC,KAAA,UAAgBjC,GAAA,CAAKsC,MAAArD,EAAAsD,OAAkBN,KAAA,UAAe,CAAAhD,EAAAuD,GAAA,gBAAAnD,EAAA,OAAmCuB,MAAA3B,EAAA4B,OAAA4B,MAAsB,CAAAxD,EAAA,YAAAI,EAAA,oBAA2CG,MAAA,CAAO0C,KAAA,sBAA4B,CAAAjD,EAAAyD,GAAAzD,EAAA,iBAAA0D,EAAAC,GAA2C,OAAAvD,EAAA,wBAAmCoC,IAAA,OAAAkB,EAAA,GAAAnD,MAAA,CAA+BqD,gBAAAF,EAAAG,aAAAF,EAAAG,uBAAA9D,EAAA+D,iBAAkFhD,GAAA,CAAKiD,OAAAhE,EAAAiE,kBAAAC,QAAAlE,EAAAsB,sBAAgE,GAAAlB,EAAA,OAAgB+D,YAAA,CAAaC,aAAA,SAAAC,MAAA,WAAAC,cAAA,QAA8D,CAAAtE,EAAAuD,GAAA,2CACv1DgB,EAAA,4DCGAC,EAAA,CACAC,WAAA,CACAC,mBAAA,WACAC,qBAAA,kBAAAC,OAAAC,EAAA,KAAAD,CAAAjF,EAAAmF,EAAA,kBAAAC,KAAApF,EAAAqF,KAAA,iBAEAC,KALA,WAMA,OACAC,QAAA,GACArC,YAAA,GACAsC,QAAA,EACAxE,KAAAV,KAAAmF,cACArB,gBAAA,KAGAsB,MAAA,CACAD,cAAA,CACAtD,KAAAwD,UAGAC,SAAA,CACAC,YADA,WAEA,OAAAvF,KAAAiF,QAAAO,SAGAC,MAAA,CACAN,cAAA,WACAnF,KAAAU,KAAAV,KAAAmF,gBAGAO,QAAA,CACArE,eADA,eAAAsE,EAAAhB,OAAAiB,EAAA,KAAAjB,CAAAkB,EAAAC,EAAAC,KAAA,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEApG,KAAAqG,OAAAC,SAAA,oBACAC,OAAA,KAHA,OAEAvG,KAAAiF,QAFAiB,EAAAM,KAAA,wBAAAN,EAAAO,SAAAT,EAAAhG,SAAA,yBAAA2F,EAAAe,MAAA1G,KAAA2G,YAAA,GAMAC,SANA,eAAAC,EAAAlC,OAAAiB,EAAA,KAAAjB,CAAAkB,EAAAC,EAAAC,KAAA,SAAAe,IAAA,OAAAjB,EAAAC,EAAAG,KAAA,SAAAc,GAAA,eAAAA,EAAAZ,KAAAY,EAAAX,MAAA,WAOApG,KAAAkF,OAPA,CAAA6B,EAAAX,KAAA,eAAAW,EAAAC,OAAA,wBAQAhH,KAAAkF,QAAA,EARA6B,EAAAX,KAAA,EASApG,KAAAqG,OAAAC,SAAA,mBACA9F,MAAAR,KAAA4C,cAVA,OAYA5C,KAAAkF,QAAA,EACAlF,KAAAqB,iBAbA,wBAAA0F,EAAAN,SAAAK,EAAA9G,SAAA,yBAAA6G,EAAAH,MAAA1G,KAAA2G,YAAA,GAeAtD,MAfA,WAgBA,KAAArD,KAAA4C,YAOA5C,KAAA4G,WANA5G,KAAAiH,SAAA,CACAC,QAAA,UACArF,KAAA,aAMAsF,OAzBA,WA0BAnH,KAAAoH,eAEAjG,YA5BA,WA6BAnB,KAAAqH,MAAA,2BACArH,KAAA8D,gBAAA,IAMAE,kBApCA,SAoCAN,GACA1D,KAAA8D,gBAAAJ,KCtEmY4D,EAAA,0BCQnY,SAAAC,EAAAC,GAEAxH,KAAA,UAAoByH,EAAA,WAAMC,QAAWD,EAAA,WAMrC,IAAAE,EAAgBhD,OAAAiD,EAAA,KAAAjD,CACd2C,EACAxH,EACAwE,GACF,EACAiD,EACA,KACA,MAIe1H,EAAA,WAAA8H,kCC1BfE,EAAAC,QAAA,CAAkBC,MAAA,2BAAAC,gBAAA,mCAAApG,MAAA,2BAAAI,YAAA,iCAAAmB,OAAA,4BAAAI,KAAA,0BAAA0E,UAAA","file":"js/chunk-2d73098a.efe7caea.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagManagment.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagManagment.vue?vue&type=style&index=0&lang=scss&module=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BaseButtonDialog',{ref:\"dialog\",attrs:{\"only-dialog\":true,\"title\":'標籤管理',\"dialog-visible\":_vm.show,\"destroy\":true,\"width\":'36%',\"floating\":\"\"},on:{\"update:dialogVisible\":function($event){_vm.show=$event},\"update:dialog-visible\":function($event){_vm.show=$event},\"closed\":_vm.closeDialog,\"dialog-opened\":_vm.tryToFetchList}},[_c('el-form',{staticClass:\"el-form-item--normal-margin\",nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',[_c('el-alert',{class:_vm.$style.alert,attrs:{\"title\":\"注意： 移除標籤不會移除具有該標籤的客戶。\",\"type\":\"info\",\"show-icon\":\"\",\"closable\":false}})],1),_c('el-form-item',[_c('el-input',{class:_vm.$style.createInput,attrs:{\"placeholder\":\"建立新標籤\",\"clearable\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();}},model:{value:(_vm.newTagTitle),callback:function ($$v) {_vm.newTagTitle=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"newTagTitle\"}},[_c('BaseIcon',{staticClass:\"el-input__icon\",attrs:{\"slot\":\"prefix\",\"name\":\"tag\"},slot:\"prefix\"}),_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tryAdd),expression:\"tryAdd\"}],class:_vm.$style.create,attrs:{\"slot\":\"append\"},on:{\"click\":_vm.onAdd},slot:\"append\"},[_vm._v(\"新增\")])],1)],1),_c('div',{class:_vm.$style.list},[(_vm.isEmptyList)?_c('transition-group',{attrs:{\"name\":\"el-zoom-in-center\"}},[_vm._l((_vm.tagList),function(tag,index){return [_c('TagManagmentListItem',{key:(\"tag-\" + (tag.id)),attrs:{\"default-value\":tag,\"item-index\":index,\"current-active-index\":_vm.activeItemIndex},on:{\"update\":_vm.updateActiveIndex,\"refresh\":_vm.tryToFetchList}})]})],2):_c('div',{staticStyle:{\"text-align\":\"center\",\"color\":\"darkgray\",\"line-height\":\"5em\"}},[_vm._v(\"\\n        暫無資料顯示\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport lazyLoadComponent from '@router/lazyload-component'\nimport BaseButtonDialog from '@components/BaseButtonDialog'\n\nexport default {\n  components: {\n    BaseButtonDialog,\n    TagManagmentListItem: () => lazyLoadComponent(import('./TagManagmentListItem'))\n  },\n  data() {\n    return {\n      tagList: [],\n      newTagTitle: '',\n      tryAdd: false,\n      show: this.dialogVisible,\n      activeItemIndex: '',\n    }\n  },\n  props: {\n    dialogVisible: {\n      type: Boolean,\n    },\n  },\n  computed: {\n    isEmptyList() {\n      return this.tagList.length\n    }\n  },\n  watch: {\n    dialogVisible: function() {\n      this.show = this.dialogVisible\n    },\n  },\n  methods: {\n    async tryToFetchList() {\n      this.tagList = await this.$store.dispatch('member/fetchTags', {\n        search: '',\n      })\n    },\n    async tryToAdd() {\n      if (this.tryAdd) return\n      this.tryAdd = true\n      await this.$store.dispatch('member/storeTag', {\n        title: this.newTagTitle,\n      })\n      this.tryAdd = false\n      this.tryToFetchList()\n    },\n    onAdd() {\n      if (this.newTagTitle === '') {\n        this.$message({\n          message: '請輸入標籤名稱',\n          type: 'warning',\n        })\n        return\n      }\n      this.tryToAdd()\n    },\n    onSave() {\n      this.tryToRemove()\n    },\n    closeDialog() {\n      this.$emit('update:dialogVisible', false)\n      this.activeItemIndex = ''\n      // this.refs.dialog.handleClose()\n    },\n    // openDialog() {\n    //   this.refs.dialog.handleOpen()\n    // },\n    updateActiveIndex (index) {\n      this.activeItemIndex = index\n    }\n  },\n}\n</script>\n\n<template>\n  <BaseButtonDialog\n    ref=\"dialog\"\n    :only-dialog=\"true\"\n    :title=\"'標籤管理'\"\n    :dialog-visible.sync=\"show\"\n    :destroy=\"true\"\n    :width=\"'36%'\"\n    floating\n    @closed=\"closeDialog\"\n    @dialog-opened=\"tryToFetchList\"\n  >\n    <el-form class=\"el-form-item--normal-margin\" @submit.prevent.native>\n      <el-form-item>\n        <el-alert\n          title=\"注意： 移除標籤不會移除具有該標籤的客戶。\"\n          type=\"info\"\n          show-icon\n          :closable=\"false\"\n          :class=\"$style.alert\"\n        >\n        </el-alert>\n      </el-form-item>\n\n      <el-form-item>\n        <el-input\n          v-model.trim=\"newTagTitle\"\n          placeholder=\"建立新標籤\"\n          clearable\n          :class=\"$style.createInput\"\n          @keydown.enter.prevent\n          ><BaseIcon slot=\"prefix\" name=\"tag\" class=\"el-input__icon\" />\n          <el-button\n            v-loading=\"tryAdd\"\n            :class=\"$style.create\"\n            slot=\"append\"\n            @click=\"onAdd\"\n            >新增</el-button>\n        </el-input>\n      </el-form-item>\n\n      <div :class=\"$style.list\">\n        <transition-group v-if=\"isEmptyList\" name=\"el-zoom-in-center\">\n          <template v-for=\"(tag, index) in tagList\">\n            <TagManagmentListItem :key=\"`tag-${tag.id}`\" :default-value=\"tag\" :item-index=\"index\" :current-active-index=\"activeItemIndex\" @update=\"updateActiveIndex\" @refresh=\"tryToFetchList\"/>\n          </template>\n        </transition-group>\n        <div v-else style=\"text-align: center;color: darkgray;line-height: 5em;\">\n          暫無資料顯示\n        </div>\n      </div>\n    </el-form>\n  </BaseButtonDialog>\n</template>\n\n<style lang=\"scss\" module>\n@import '@design';\n\n.alert {\n  background-color: rgba($color-primary, 0.1) !important;\n  color: $color-primary !important;\n}\n.createInput {\n  :global {\n    .el-input__prefix {\n      left: 10px;\n    }\n  }\n}\n.create {\n  color: $color-primary !important;\n}\n.list {\n  overflow: auto;\n  max-height: 30vh;\n  margin-bottom: 20px;\n  &::-webkit-scrollbar {\n    display: block;\n    width: 4px;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    background-color: #d8d8d8;\n  }\n  :global {\n    .el-form-item {\n      margin-bottom: 15px;\n    }\n  }\n}\n.editInput {\n  :global {\n    .el-input__inner {\n      border: transparent;\n      background: transparent;\n      // &:focus {\n      //   border: 1px solid transparent;\n      //   background-color: #f2f2f2;\n      // }\n    }\n    .el-input-group__append {\n      border: none;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagManagment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagManagment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TagManagment.vue?vue&type=template&id=67ebfec9&\"\nimport script from \"./TagManagment.vue?vue&type=script&lang=js&\"\nexport * from \"./TagManagment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TagManagment.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"TagManagment_slide_2pa9U\",\"slide-reverse\":\"TagManagment_slide-reverse_2uL6W\",\"alert\":\"TagManagment_alert_hAj5a\",\"createInput\":\"TagManagment_createInput_2L8iL\",\"create\":\"TagManagment_create_3xLro\",\"list\":\"TagManagment_list_2mu2b\",\"editInput\":\"TagManagment_editInput_2vsTp\"};"],"sourceRoot":""}