{"version":3,"sources":["webpack:///./src/components/NotificationWrite.vue?fcc3","webpack:///src/components/NotificationWrite.vue","webpack:///./src/components/NotificationWrite.vue?538d","webpack:///./src/components/NotificationWrite.vue?5ff3","webpack:///./src/components/NotificationWrite.vue?68cf","webpack:///./src/components/NotificationWrite.vue?deff"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","$style","write","attrs","gutter","span","staticClass","shadow","staticStyle","color","_v","undefined","sourceInventory","_s","productName","date","startTime","endTime","qty","infinity","inventory","_e","sourceOrder","_f","created","source","margin-bottom","status","time","_l","param","index","key","fullName","phoneCode","phoneNumber","email","note","sourceMember","sourceName","selectedMemberIds","length","on","change","updateRouter","model","value","callback","$$v","router","expression","width","label","border","target","directives","name","rawName","search","placeholder","nativeOn","keyup","$event","type","indexOf","_k","keyCode","tryToFetchOrderList","searchQuery","trim","slot","border-right","border-left","height","element-loading-text","data","orderList","default-sort","prop","order","row-class-name","tableRowClassName","selection-change","handleSelectionChange","scopedSlots","_u","fn","ref","row","gender","sameAsUser","member","state","text","updateSendWhoType","sendWhoType","includes","oneline","fixed-phrase","mapSubjectFixedPhrase","update","updateSubjectTemplate","domProps","innerHTML","previewContent","previewSubjectTemplate","mapFixedPhrase","updateTemplate","previewTemplate","footer","click","emitClose","loading","tryingToSend","disabled","showMessageContent","validataSubmitData","staticRenderFns","NotificationWritevue_type_script_lang_js_","components","At","Object","lazyload_component","__webpack_require__","e","then","bind","BaseStateLabel","filters","genderFilter","filter_value_to_text","orderStatusFilter","orderPaymentMethodFilter","orderSourceFilter","formatDate","format_date","mixins","pagination","props","Array","default","selectedOrderIds","String","sourceMemberList","submitData","orderIds","memberIds","templateContent","subject","mapTemplateString","姓名","訂單成立時間","店家名稱","預約時間","付款時間","服務項目","reception","memberList","selectedCustom","computed","selectedMember","map","id","fetchDataParams","routeQuery","$route","query","queryData","assign","pageQuery","_this$filterData","filterData","startDate","endDate","filterDataWithoutDate","dateType","objectWithoutProperties","searchWithDate","searchParams","isByOrder","isByMember","showCustom","watch","currentPage","handler","immediate","methods","_tryToFetchOrderList","asyncToGenerator","regenerator_default","a","mark","_callee","_ref","items","wrap","_context","prev","next","abrupt","tryingToGetOrder","$store","dispatch","inventoryId","paymentMethod","limit","sent","total","$nextTick","stop","apply","arguments","$emit","tryToSend","_tryToSend","_callee2","_context2","$message","message","_x","sendData","objectSpread","mode","getTemplate","$refs","template","getTemplateContent","getSubjectTemplate","subjectTemplate","$forceUpdate","_ref2","rowStatus","usedStatus","groupSize","usedSize","_this","templateString","content","keys","forEach","replace","RegExp","concat","components_NotificationWritevue_type_script_lang_js_","injectStyles","context","NotificationWritevue_type_style_index_0_lang_scss_module_true_","locals","component","componentNormalizer","__webpack_exports__","module","exports","slide","slide-reverse","title","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NotificationWrite_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NotificationWrite_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6e54ddcf.2e7ee2b0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.write},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',{staticClass:\"source-info\",attrs:{\"shadow\":'never'}},[_c('h6',{staticStyle:{\"color\":\"#53c2cc\"}},[_vm._v(\"來源資訊\")]),(_vm.sourceInventory !== undefined)?[_c('div',[_vm._v(\"預約項目：\"+_vm._s(_vm.productName))]),_c('div',[_vm._v(\"日期： \"+_vm._s(_vm.sourceInventory.date))]),_c('div',[_vm._v(\"時間： \"+_vm._s(_vm.sourceInventory.startTime)+\" -\\n            \"+_vm._s(_vm.sourceInventory.endTime))]),_c('div',[_vm._v(\"販售狀況： \"+_vm._s(_vm.sourceInventory.qty)+\" /\\n            \"+_vm._s(_vm.sourceInventory.infinity === 1 ? '無限' : _vm.sourceInventory.inventory))])]:_vm._e(),(_vm.sourceOrder !== undefined)?[_c('div',[_vm._v(_vm._s((\"#\" + (_vm.sourceOrder.id))))]),_c('div',[_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.sourceOrder.created,'dateTime'))+\" 成立訂單\")]),_c('div',[_vm._v(\"訂單來源：\"+_vm._s(_vm._f(\"orderSourceFilter\")(_vm.sourceOrder.source)))]),_c('div',{staticStyle:{\"margin-bottom\":\"16px\"}},[_vm._v(_vm._s(_vm._f(\"orderStatusFilter\")(_vm.sourceOrder.status,'text')))]),_c('div',[_vm._v(\"預約項目：\"+_vm._s(_vm.sourceOrder.productName))]),_c('div',[_vm._v(\"預約時間：\"+_vm._s(_vm._f(\"formatDate\")(_vm.sourceOrder.date))+\"\\n            \"+_vm._s(_vm.sourceOrder.time))]),_c('div',{staticStyle:{\"margin-bottom\":\"16px\"}},[_vm._v(\"訂購項目：\\n            \"),_vm._l((_vm.sourceOrder.params),function(param,index){return _c('span',{key:((param.title) + \"-\" + index)},[_vm._v(\"\\n              \"+_vm._s(((param.title) + \"x\" + (param.qty) + \" \"))+\"\\n            \")])})],2),_c('div',[_vm._v(\"使用人姓名：\"+_vm._s(_vm.sourceOrder.fullName))]),_c('div',[_vm._v(\"使用人電話：\"+_vm._s(_vm.sourceOrder.phoneCode)+\"\\n            \"+_vm._s(_vm.sourceOrder.phoneNumber))]),_c('div',[_vm._v(\"電子信箱：\"+_vm._s(_vm.sourceOrder.email))]),_c('div',[_vm._v(\"使用人備註：\"+_vm._s(_vm.sourceOrder.note || '無'))])]:_vm._e(),(_vm.sourceMember !== undefined)?[_c('div',[_vm._v(\"客戶姓名：\"+_vm._s(_vm.sourceMember.fullName))]),_c('div',[_vm._v(\"電話：\"+_vm._s(_vm.sourceMember.phoneCode)+\"\\n            \"+_vm._s(_vm.sourceMember.phoneNumber))]),_c('div',[_vm._v(\"電子郵件：\"+_vm._s(_vm.sourceMember.email))])]:_vm._e(),(_vm.sourceName === 'memberList')?[_c('p',[_vm._v(\"已選擇名單上 \"+_vm._s(_vm.selectedMemberIds.length)+\" 位客戶\")])]:_vm._e()],2),_c('p',[_vm._v(\"發送方式（複選）\")])],1),_c('el-checkbox-group',{on:{\"change\":_vm.updateRouter},model:{value:(_vm.router),callback:function ($$v) {_vm.router=$$v},expression:\"router\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-checkbox',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"email\",\"border\":\"\"}},[_vm._v(\"電子郵件\")])],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-checkbox',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"sms\",\"border\":\"\"}},[_vm._v(\"簡訊\")])],1)],1),(_vm.sourceInventory !== undefined)?[_c('el-col',{attrs:{\"span\":24}},[_c('p',[_vm._v(\"發送對象（單選）\")]),_c('el-radio-group',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.target),callback:function ($$v) {_vm.target=$$v},expression:\"target\"}},[_c('el-col',{staticClass:\"no-padding-left\",attrs:{\"span\":12}},[_c('el-radio',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"all\",\"border\":\"\"}},[_vm._v(\"全部名單\")])],1),_c('el-col',{staticClass:\"no-padding-right\",attrs:{\"span\":12}},[_c('el-radio',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"custom\",\"border\":\"\"}},[_vm._v(\"自訂\")])],1)],1)],1),_c('el-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showCustom),expression:\"showCustom\"}],attrs:{\"span\":24}},[_c('p',[_vm._v(\"自訂發送對象：\")]),_c('el-input',{class:_vm.$style.search,attrs:{\"placeholder\":'搜尋訂單：輸入使用人姓名、手機號碼或訂單編號'},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.tryToFetchOrderList($event)}},model:{value:(_vm.searchQuery),callback:function ($$v) {_vm.searchQuery=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"searchQuery\"}},[_c('BaseIcon',{staticClass:\"el-input__icon\",attrs:{\"slot\":\"prefix\",\"name\":\"search\"},slot:\"prefix\"})],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tryingToGetOrder),expression:\"tryingToGetOrder\"}],staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"30px\",\"border-right\":\"1px solid #f6f7fa\",\"border-left\":\"1px solid #f6f7fa\"},attrs:{\"height\":\"370\",\"element-loading-text\":\"取得訂單資訊中\",\"data\":_vm.orderList,\"default-sort\":{ prop: 'created', order: 'descending' },\"row-class-name\":_vm.tableRowClassName},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"label\":\"#訂單編號\",\"width\":\"220\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_vm._v(_vm._s((\"#\" + (row.id))))])]}}],null,false,623682367)}),_c('el-table-column',{attrs:{\"label\":\"使用人\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_vm._v(_vm._s(row.fullName)+\" \"+_vm._s(_vm._f(\"genderFilter\")(row.gender)))]),_c('div',{staticStyle:{\"color\":\"#aaaaaa\"}},[_vm._v(_vm._s(((row.phoneCode) + \" \" + (row.phoneNumber))))])]}}],null,false,2713470529)}),_c('el-table-column',{attrs:{\"label\":\"客戶\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(_vm.sameAsUser(row))?[_c('div',{staticStyle:{\"color\":\"#aaaaaa\"}},[_vm._v(\"同使用人\")])]:[_c('div',[_vm._v(_vm._s(row.member.fullName)+\"\\n                \"+_vm._s(_vm._f(\"genderFilter\")(row.member.gender)))]),_c('div',{staticStyle:{\"color\":\"#aaaaaa\"}},[_vm._v(_vm._s(((row.member.phoneCode) + \" \" + (row.member.phoneNumber))))])]]}}],null,false,2437789981)}),_c('el-table-column',{attrs:{\"label\":\"狀態與來源\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('BaseStateLabel',{attrs:{\"state\":_vm._f(\"orderStatusFilter\")(row.status,'color'),\"text\":\"\"}},[_vm._v(_vm._s(_vm._f(\"orderStatusFilter\")(row.status,'text')))]),_c('br'),_c('BaseStateLabel',{attrs:{\"state\":\"info\",\"text\":\"\"}},[_vm._v(_vm._s(_vm._f(\"orderSourceFilter\")(row.source)))])]}}],null,false,3316611662)})],1)],1)]:_vm._e(),(_vm.sourceInventory !== undefined || _vm.sourceOrder !== undefined)?[_c('el-col',{attrs:{\"span\":24}},[_c('p',[_vm._v(\"發送給...（複選）\")])]),_c('el-checkbox-group',{on:{\"change\":_vm.updateSendWhoType},model:{value:(_vm.sendWhoType),callback:function ($$v) {_vm.sendWhoType=$$v},expression:\"sendWhoType\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-checkbox',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"onlyUser\",\"border\":\"\"}},[_vm._v(\"使用人\")])],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-checkbox',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"onlyBuyer\",\"border\":\"\"}},[_vm._v(\"客戶\")])],1)],1)]:_vm._e()],2),_c('el-divider'),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showMessageContent),expression:\"showMessageContent\"}]},[_c('el-col',{attrs:{\"span\":24}},[(_vm.router.includes('email'))?[_c('div',[_c('b',[_vm._v(\"Email 主旨：\")])]),_c('At',{ref:\"subjectTemplate\",attrs:{\"oneline\":true,\"fixed-phrase\":_vm.mapSubjectFixedPhrase[_vm.sourceName]},on:{\"update\":_vm.updateSubjectTemplate}}),_c('p',[_vm._v(\"預覽：\")]),_c('p',{staticStyle:{\"margin-bottom\":\"50px\"},domProps:{\"innerHTML\":_vm._s(_vm.previewContent(_vm.previewSubjectTemplate))}})]:_vm._e(),_c('div',[_c('b',[_vm._v(\"訊息內容：\")])]),_c('At',{ref:\"template\",attrs:{\"fixed-phrase\":_vm.mapFixedPhrase[_vm.sourceName]},on:{\"update\":_vm.updateTemplate}}),_c('p',[_vm._v(\"預覽：\")]),_c('p',{staticStyle:{\"margin-bottom\":\"50px\"},domProps:{\"innerHTML\":_vm._s(_vm.previewContent(_vm.previewTemplate))}})],2)],1),_c('div',{class:_vm.$style.footer},[_c('el-button',{on:{\"click\":_vm.emitClose}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.tryingToSend,\"disabled\":!_vm.showMessageContent},on:{\"click\":_vm.validataSubmitData}},[_vm._v(\"確認發送\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport lazyLoadComponent from '@router/lazyload-component'\nimport pageMixin from '@src/mixins/pagination'\n\nimport {\n  genderFilter,\n  orderStatusFilter,\n  orderPaymentMethodFilter,\n  orderSourceFilter,\n} from '@utils/filter-value-to-text'\nimport formatDate, { formatRequestData } from '@utils/format-date'\n\nexport default {\n  components: {\n    At: () => lazyLoadComponent(import('@components/At')),\n    BaseStateLabel: () =>\n      lazyLoadComponent(import('@components/BaseStateLabel')),\n  },\n  filters: {\n    genderFilter,\n    orderStatusFilter,\n    orderPaymentMethodFilter,\n    orderSourceFilter,\n    formatDate,\n  },\n  mixins: [pageMixin],\n  props: {\n    selectedMemberIds: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n    selectedOrderIds: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n    sourceName: {\n      type: String,\n      default: 'reception',\n    },\n    sourceInventory: {\n      type: Object,\n      default: () => {},\n    },\n    sourceOrder: {\n      type: Object,\n      default: () => {},\n    },\n    sourceMember: {\n      type: Object,\n      default: () => {},\n    },\n    sourceMemberList: {\n      type: Object,\n      default: () => {},\n    },\n    productName: {\n      type: String,\n      default: '',\n    },\n  },\n\n  data() {\n    return {\n      submitData: {\n        // mode: 'byOrder',\n        orderIds: [],\n        memberIds: this.selectedMemberIds,\n        templateContent: '',\n        router: 'sms',\n        sendWhoType: 'onlyUser',\n        subject: '',\n      },\n      router: ['sms'],\n      sendWhoType: ['onlyUser'],\n      mapTemplateString: {\n        姓名: '黃大明',\n        訂單成立時間: ' 2021/01/01 00:00 ',\n        店家名稱: '小捲尾寵物美容',\n        預約時間: ' 2021/01/03 13:00 ',\n        付款時間: ' 2021/01/01 10:00 ',\n        服務項目: '小捲尾美容SPA',\n        // 短網址: ' https://ipb.pet/yoga ',\n      },\n      mapFixedPhrase: {\n        reception: [\n          '姓名',\n          '店家名稱',\n          '服務項目',\n          '預約時間',\n          // '短網址',\n        ],\n        order: ['姓名', '店家名稱', '服務項目', '預約時間'],\n        memberList: ['姓名', '店家名稱'],\n        member: ['姓名', '店家名稱'],\n      },\n      mapSubjectFixedPhrase: {\n        reception: ['店家名稱', '服務項目'],\n        order: ['店家名稱', '服務項目'],\n        memberList: ['店家名稱'],\n        member: ['店家名稱'],\n      },\n      orderList: [],\n      target: 'all',\n      previewSubjectTemplate: '',\n      previewTemplate: '',\n      tryingToSend: false,\n      searchQuery: '',\n      selectedCustom: [],\n    }\n  },\n  computed: {\n    memberIds() {\n      return this.selectedMember.map((member) => {\n        return member.id\n      })\n    },\n    fetchDataParams() {\n      const routeQuery = this.$route.query\n      const queryData = Object.assign(routeQuery, this.pageQuery)\n      const {\n        startDate,\n        endDate,\n        dateType,\n        ...filterDataWithoutDate\n      } = this.filterData\n      const searchWithDate = startDate && endDate\n      const searchParams = searchWithDate\n        ? Object.assign(this.filterData, {\n            startDate: formatRequestData(startDate),\n            endDate: formatRequestData(endDate),\n          })\n        : filterDataWithoutDate\n      return Object.assign(searchParams, queryData)\n    },\n    isByOrder() {\n      return this.sourceName === 'reception' || this.sourceName === 'order'\n    },\n    isByMember() {\n      return this.sourceName === 'member' || this.sourceName === 'memberList'\n    },\n    showCustom() {\n      return this.sourceName === 'reception' && this.target === 'custom'\n    },\n    showMessageContent() {\n      if (this.isByOrder) {\n        return this.router.length && this.sendWhoType.length\n      } else {\n        return !!this.router.length\n      }\n    }\n  },\n  watch: {\n    currentPage: {\n      handler: 'tryToFetchOrderList',\n      immediate: true,\n    },\n  },\n  methods: {\n    async tryToFetchOrderList() {\n      if (this.sourceName !== 'reception') return\n      this.tryingToGetOrder = true\n\n      const { items, total } = await this.$store.dispatch('order/fetchList', {\n        inventoryId: this.sourceInventory.id,\n        paymentMethod: 'All',\n        limit: 0,\n        search: this.searchQuery,\n      })\n      this.orderList = items\n      this.tryingToGetOrder = false\n      this.$nextTick(() => {\n        // if (this.$refs.pagination !== undefined)\n        //   this.$refs.pagination.updateTotal(total)\n      })\n    },\n    emitClose() {\n      this.$emit('close')\n    },\n    async tryToSend(data) {\n      this.tryingToSend = true\n      await this.$store.dispatch('merchant/sendNoti', data)\n      this.$message({ message: '發送成功！', type: 'success' })\n      this.tryingToSend = false\n      // this.emitClose()\n    },\n    validataSubmitData() {\n      if (this.target === 'custom' && this.selectedCustom.length === 0) {\n        this.$message({ message: '請選擇發送對象！', type: 'error' })\n        return\n      }\n      if (this.router.includes('email') && this.previewSubjectTemplate === '') {\n        this.$message({ message: '請填寫 Email 主旨！', type: 'error' })\n        return\n      }\n      if (this.previewTemplate === '') {\n        this.$message({ message: '請填寫訊息內容！', type: 'error' })\n        return\n      }\n      const sendData = {\n        ...this.submitData,\n        sendWhoType: this.isByMember\n          ? undefined\n          : this.submitData.sendWhoType,\n        mode: this.isByOrder ? 'byOrder' : 'byMember',\n        orderIds: this.target === 'all' ?  this.selectedOrderIds : this.selectedCustom,\n        templateContent: this.previewTemplate,\n        subject: this.previewSubjectTemplate\n      }\n      this.tryToSend(sendData)\n    },\n    getTemplate() {\n      return this.$refs.template.getTemplateContent()\n    },\n    getSubjectTemplate() {\n      if (this.$refs.subjectTemplate === undefined) return ''\n      return this.$refs.subjectTemplate.getTemplateContent()\n    },\n    updateTemplate() {\n      this.previewTemplate = this.$refs.template.getTemplateContent()\n      this.$forceUpdate()\n    },\n    updateSubjectTemplate() {\n      this.previewSubjectTemplate = this.$refs.subjectTemplate.getTemplateContent()\n      this.$forceUpdate()\n    },\n    tableRowClassName({ row }) {\n      const rowStatus = row.status\n      const usedStatus = row.groupSize / row.usedSize\n      if (rowStatus === 0) return 'order--canceled'\n      if (usedStatus === 1) return 'order--used'\n    },\n    updateRouter(value) {\n      this.router = value\n      this.submitData.router = value[0]\n      if (value.length === 2) this.submitData.router = 'all'\n    },\n    updateSendWhoType(value) {\n      this.sendWhoType = value\n      this.submitData.sendWhoType = value[0]\n      if (value.length === 2) this.submitData.sendWhoType = 'all'\n    },\n    handleSelectionChange(value) {\n      this.selectedCustom = value.map((order) => order.id)\n    },\n    previewContent(templateString = '') {\n      let content = templateString\n      if (content === null) return ''\n      Object.keys(this.mapTemplateString).forEach((key) => {\n        content = content.replace(\n          new RegExp(`{${key}}`, 'g'),\n          this.mapTemplateString[key]\n        )\n      })\n      content = content.replace(new RegExp(`\\n`, 'g'), '<br>')\n      return content\n    },\n    sameAsUser(order) {\n      if (order.member.fullName !== order.fullName) return false\n      if (order.member.gender !== order.gender) return false\n      if (order.member.phoneCode !== order.phoneCode) return false\n      if (order.member.phoneNumber !== order.phoneNumber) return false\n      return true\n    },\n  },\n}\n</script>\n\n<template>\n  <div :class=\"$style.write\">\n    <el-row :gutter=\"20\">\n      <el-col :span=\"24\">\n        <el-card class=\"source-info\" :shadow=\"'never'\">\n          <h6 style=\"color: #53c2cc;\">來源資訊</h6>\n          <template v-if=\"sourceInventory !== undefined\">\n            <div>預約項目：{{ productName }}</div>\n            <div>日期： {{ sourceInventory.date }}</div>\n            <div\n              >時間： {{ sourceInventory.startTime }} -\n              {{ sourceInventory.endTime }}</div\n            >\n            <div\n              >販售狀況： {{ sourceInventory.qty }} /\n              {{ sourceInventory.infinity === 1 ? '無限' : sourceInventory.inventory }}</div\n            >\n          </template>\n          <template v-if=\"sourceOrder !== undefined\">\n            <div>{{ `#${sourceOrder.id}` }}</div>\n            <div\n              >{{ sourceOrder.created | formatDate('dateTime') }} 成立訂單</div\n            >\n            <div>訂單來源：{{ sourceOrder.source | orderSourceFilter }}</div>\n            <div style=\"margin-bottom: 16px;\">{{\n              sourceOrder.status | orderStatusFilter('text')\n            }}</div>\n            <div>預約項目：{{ sourceOrder.productName }}</div>\n            <div\n              >預約時間：{{ sourceOrder.date | formatDate }}\n              {{ sourceOrder.time }}</div\n            >\n            <div style=\"margin-bottom: 16px;\"\n              >訂購項目：\n              <span\n                v-for=\"(param, index) in sourceOrder.params\"\n                :key=\"`${param.title}-${index}`\"\n              >\n                {{ `${param.title}x${param.qty} ` }}\n              </span>\n            </div>\n            <div>使用人姓名：{{ sourceOrder.fullName }}</div>\n            <div\n              >使用人電話：{{ sourceOrder.phoneCode }}\n              {{ sourceOrder.phoneNumber }}</div\n            >\n            <div>電子信箱：{{ sourceOrder.email }}</div>\n            <div>使用人備註：{{ sourceOrder.note || '無' }}</div>\n          </template>\n          <template v-if=\"sourceMember !== undefined\">\n            <div>客戶姓名：{{ sourceMember.fullName }}</div>\n            <div\n              >電話：{{ sourceMember.phoneCode }}\n              {{ sourceMember.phoneNumber }}</div\n            >\n            <div>電子郵件：{{ sourceMember.email }}</div>\n          </template>\n          <template v-if=\"sourceName === 'memberList'\">\n            <p>已選擇名單上 {{ selectedMemberIds.length }} 位客戶</p>\n          </template>\n        </el-card>\n        <p>發送方式（複選）</p>\n      </el-col>\n      <el-checkbox-group v-model=\"router\" @change=\"updateRouter\">\n\n        <el-col :span=\"12\">\n          <el-checkbox label=\"email\" border style=\"width: 100%;\"\n            >電子郵件</el-checkbox\n          ></el-col\n        >\n        <el-col :span=\"12\"\n          ><el-checkbox label=\"sms\" border style=\"width: 100%;\"\n            >簡訊</el-checkbox\n          >\n        </el-col>\n      </el-checkbox-group>\n      <template v-if=\"sourceInventory !== undefined\">\n        <el-col :span=\"24\">\n          <p>發送對象（單選）</p>\n          <el-radio-group v-model=\"target\" style=\"width: 100%;\">\n            <el-col :span=\"12\" class=\"no-padding-left\">\n              <el-radio label=\"all\" border style=\"width: 100%;\"\n                >全部名單</el-radio\n              ></el-col\n            >\n            <el-col :span=\"12\" class=\"no-padding-right\"\n              ><el-radio label=\"custom\" border style=\"width: 100%;\"\n                >自訂</el-radio\n              >\n            </el-col>\n          </el-radio-group>\n        </el-col>\n\n        <el-col v-show=\"showCustom\" :span=\"24\">\n          <p>自訂發送對象：</p>\n\n          <el-input\n            v-model.trim.lazy=\"searchQuery\"\n            :class=\"$style.search\"\n            :placeholder=\"'搜尋訂單：輸入使用人姓名、手機號碼或訂單編號'\"\n            @keyup.native.enter=\"tryToFetchOrderList\"\n          >\n            <BaseIcon slot=\"prefix\" name=\"search\" class=\"el-input__icon\" />\n          </el-input>\n\n          <el-table\n            v-loading=\"tryingToGetOrder\"\n            style=\"\n              width: 100%;\n              margin-bottom: 30px;\n              border-right: 1px solid #f6f7fa;\n              border-left: 1px solid #f6f7fa;\n            \"\n            height=\"370\"\n            element-loading-text=\"取得訂單資訊中\"\n            :data=\"orderList\"\n            :default-sort=\"{ prop: 'created', order: 'descending' }\"\n            :row-class-name=\"tableRowClassName\"\n            @selection-change=\"handleSelectionChange\"\n          >\n            <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n            <!-- <el-table-column v-slot=\"{ row }\" type=\"expand\">\n              <el-table :data=\"[row]\" border>\n                <el-table-column v-slot=\"child\" width=\"230\" label=\"#訂單編號\"\n                  ><div>{{ `#${child.row.id}` }}</div></el-table-column\n                >\n                <el-table-column v-slot=\"child\" label=\"狀態與來源\"\n                  ><BaseStateLabel\n                    :state=\"child.row.status | orderStatusFilter('color')\"\n                    text\n                    >{{\n                      child.row.status | orderStatusFilter('text')\n                    }}</BaseStateLabel\n                  >\n                  <br />\n                  <BaseStateLabel state=\"info\" text>{{\n                    child.row.source | orderSourceFilter\n                  }}</BaseStateLabel></el-table-column\n                >\n              </el-table>\n            </el-table-column> -->\n\n            <el-table-column v-slot=\"{ row }\" label=\"#訂單編號\" width=\"220\">\n              <div>{{ `#${row.id}` }}</div>\n              <!-- <div>{{ row.created | formatDate('dateTime') }}</!-->\n            </el-table-column>\n\n            <!-- <el-table-column\n            v-slot=\"{ row }\"\n            label=\"付款方式\"\n            width=\"100\"\n            sortable\n            >{{ row.paymentMethod | orderPaymentMethodFilter }}</el-table-column\n          > -->\n            <el-table-column v-slot=\"{ row }\" label=\"使用人\">\n              <div>{{ row.fullName }} {{ row.gender | genderFilter }}</div>\n              <div style=\"color: #aaaaaa;\">{{\n                `${row.phoneCode} ${row.phoneNumber}`\n              }}</div>\n            </el-table-column>\n            <el-table-column v-slot=\"{ row }\" label=\"客戶\">\n              <template v-if=\"sameAsUser(row)\">\n                <div style=\"color: #aaaaaa;\">同使用人</div>\n              </template>\n              <template v-else\n                ><div\n                  >{{ row.member.fullName }}\n                  {{ row.member.gender | genderFilter }}</div\n                >\n                <div style=\"color: #aaaaaa;\">{{\n                  `${row.member.phoneCode} ${row.member.phoneNumber}`\n                }}</div></template\n              >\n            </el-table-column>\n            <el-table-column v-slot=\"{ row }\" label=\"狀態與來源\" width=\"120\">\n              <BaseStateLabel\n                :state=\"row.status | orderStatusFilter('color')\"\n                text\n                >{{ row.status | orderStatusFilter('text') }}</BaseStateLabel\n              >\n              <br />\n              <BaseStateLabel state=\"info\" text>{{\n                row.source | orderSourceFilter\n              }}</BaseStateLabel>\n            </el-table-column>\n            <!-- <el-table-column v-slot=\"{ row }\" label=\"訂購項目\">\n            <div>\n              <b>{{ row.productName }}</b>\n            </div>\n            <div>{{ row.date | formatDate }} {{ row.time }}</div>\n          </el-table-column>\n          <el-table-column v-slot=\"{ row }\">\n            <el-button @click=\"tryToGetOrder(row.id)\">查看詳情</el-button>\n          </el-table-column> -->\n          </el-table>\n          <!-- <BasePagination ref=\"pagination\" :current-page.sync=\"currentPage\" /> -->\n        </el-col>\n      </template>\n\n      <template\n        v-if=\"sourceInventory !== undefined || sourceOrder !== undefined\"\n      >\n        <el-col :span=\"24\">\n          <p>發送給...（複選）</p>\n        </el-col>\n        <el-checkbox-group\n          v-model=\"sendWhoType\"\n          @change=\"updateSendWhoType\"\n        >\n          <el-col :span=\"12\">\n            <el-checkbox label=\"onlyUser\" border style=\"width: 100%;\"\n              >使用人</el-checkbox\n            ></el-col\n          >\n          <el-col :span=\"12\"\n            ><el-checkbox label=\"onlyBuyer\" border style=\"width: 100%;\"\n              >客戶</el-checkbox\n            >\n          </el-col>\n        </el-checkbox-group>\n      </template>\n    </el-row>\n    <el-divider></el-divider>\n    <el-row v-show=\"showMessageContent\">\n      <el-col :span=\"24\">\n        <template v-if=\"router.includes('email')\">\n          <div><b>Email 主旨：</b></div>\n          <At\n            ref=\"subjectTemplate\"\n            :oneline=\"true\"\n            :fixed-phrase=\"mapSubjectFixedPhrase[sourceName]\"\n            @update=\"updateSubjectTemplate\"\n          ></At>\n          <p>預覽：</p>\n          <p\n            style=\"margin-bottom: 50px;\"\n            v-html=\"previewContent(previewSubjectTemplate)\"\n          ></p>\n        </template>\n\n        <div><b>訊息內容：</b></div>\n        <At\n          ref=\"template\"\n          :fixed-phrase=\"mapFixedPhrase[sourceName]\"\n          @update=\"updateTemplate\"\n        ></At>\n        <p>預覽：</p>\n        <p\n          style=\"margin-bottom: 50px;\"\n          v-html=\"previewContent(previewTemplate)\"\n        ></p>\n      </el-col>\n    </el-row>\n    <div :class=\"$style.footer\">\n      <el-button @click=\"emitClose\">取消</el-button>\n      <el-button\n        type=\"primary\"\n        :loading=\"tryingToSend\"\n        :disabled=\"!showMessageContent\"\n        @click=\"validataSubmitData\"\n        >確認發送</el-button\n      >\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" module>\n@import '@design';\n.title {\n  color: $color-primary;\n}\n.footer {\n  text-align: right;\n}\n.write {\n  :global {\n    .source-info {\n      .el-card__body {\n        padding: 5px 20px;\n        div {\n          margin: 5px 0;\n        }\n      }\n    }\n    .no-padding-left {\n      padding-left: 0 !important;\n    }\n    .no-padding-right {\n      padding-right: 0 !important;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationWrite.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationWrite.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NotificationWrite.vue?vue&type=template&id=5f35f38a&\"\nimport script from \"./NotificationWrite.vue?vue&type=script&lang=js&\"\nexport * from \"./NotificationWrite.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NotificationWrite.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"NotificationWrite_slide_3J1yj\",\"slide-reverse\":\"NotificationWrite_slide-reverse_1pPPW\",\"title\":\"NotificationWrite_title_DizYY\",\"footer\":\"NotificationWrite_footer_oxCT6\",\"write\":\"NotificationWrite_write_1WfF5\"};","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationWrite.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationWrite.vue?vue&type=style&index=0&lang=scss&module=true&\""],"sourceRoot":""}