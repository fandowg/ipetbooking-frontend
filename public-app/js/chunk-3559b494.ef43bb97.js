(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3559b494"],{"0ac6":function(e,t,a){"use strict";a.r(t);var i=function(){var e,t,a=this,i=a.$createElement,n=a._self._c||i;return n("div",[n("div",{class:[a.$style.container,(e={},e[a.$style["uploader--circle"]]=a.circle,e)]},[n("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:a.tryingToUpload,expression:"tryingToUpload"}],class:[a.$style.uploader,(t={},t[a.$style["is-emtpy"]]=!a.value,t[a.$style["uploader--circle"]]=a.circle,t)],attrs:{action:"string","on-success":a.sendSuccess,"http-request":a.handleUpload,"before-upload":a.beforeImageUpload,"show-file-list":!1}},[a.value?n("el-image",{attrs:{src:a.value,fit:"cover"}},[n("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[a._v("\n          載入中\n          "),n("span",{staticClass:"dot"},[a._v("...")])])]):n("div",[n("BaseIcon",{class:a.$style["uploader__icon"],attrs:{name:"image"}}),n("div",[a._v(a._s(a.$root.isTouchDevice?"觸碰上傳圖片":"點擊上傳圖片"))])],1)],1),a.value?n("span",{class:a.$style.actions},[n("el-tooltip",{attrs:{effect:"dark",content:"預覽圖片",placement:"top"}},[n("span",{on:{click:function(e){return a.handlePreview(a.value)}}},[n("BaseIcon",{attrs:{name:"eye"}})],1)]),a.noRemove?a._e():n("el-tooltip",{attrs:{effect:"dark",content:"刪除圖片",placement:"top"}},[n("span",{on:{click:function(e){return a.handleRemove(a.value)}}},[n("BaseIcon",{attrs:{name:"trash-alt"}})],1)])],1):a._e()],1),a.onlyUpLoad?a._e():n("div",{class:a.$style.uploader__limit},[a._v("\n    圖檔最大 10 MB，檔案格式限 JPG 或 PNG 或 SVG\n    "),a.suggestSize?[n("br"),a.imageSize?n("span",[a._v("圖片比例："+a._s(a.imageSize)+"，")]):a._e(),a._v("建議尺寸："+a._s(a.suggestSize.replace("/","*"))+"px\n    ")]:a._e()],2),n("el-dialog",{attrs:{visible:a.dialogVisible,width:"1135px",top:"0","append-to-body":""},on:{"update:visible":function(e){a.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:a.dialogImageUrl}})])],1)},n=[],s=a("4795"),r=a.n(s),o=a("cb0c"),l=a("b775"),p={props:{value:{type:String,default:""},resource:{type:String,required:!0,validator:function(e){return-1!==["staff","merchant","product","prepaid","pet"].indexOf(e)}},circle:{type:Boolean,default:!1},onlyUpLoad:{type:Boolean,default:!1},suggestSize:{type:String,default:""},imageSize:{type:String,default:""},dir:{type:String,default:""},noRemove:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1,dialogImageUrl:"",tryingToUpload:!1}},computed:{urlWithTimestamp:function(){var e=Date.now();return"".concat(this.value,"?").concat(e)}},methods:{emitInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$emit("input",e)},beforeImageUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/svg+xml"===e.type,a=e.size/1024/1024<=10;return t||this.$message.error("上傳的頭像圖片只能是 JPG 或 PNG 格式"),a||this.$message.error("上傳的頭像圖片大小不能超過 10 MB"),t&&a},handleUpload:function(){var e=Object(o["a"])(r.a.mark(function e(t){var a,i;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("files[]",t.file),this.dir&&a.append("dir",this.dir),this.tryingToUpload=!0,e.next=6,l["a"].post("/admin/merchant/media/upload",a,{headers:{"Content-Type":"multipart/form-data"}});case 6:i=e.sent,this.emitInput(i),this.tryingToUpload=!1;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleRemove:function(){var e=Object(o["a"])(r.a.mark(function e(t){var a,i;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=/^(https?:)/.test(t),a){e.next=7;break}return i=new FormData,i.append("paths[]",t),i.append("resource",this.resource),e.next=7,l["a"].post("/admin/merchant/media/delete",i,{headers:{"Content-Type":"multipart/form-data"}});case 7:this.emitInput();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handlePreview:function(e){this.dialogImageUrl=e,this.dialogVisible=!0},sendSuccess:function(){this.$emit("sendSuccess",!0)}}},c=p,d=a("99ba"),u=a("2877");function m(e){this["$style"]=d["default"].locals||d["default"]}var f=Object(u["a"])(c,i,n,!1,m,null,null);t["default"]=f.exports},"99ba":function(e,t,a){"use strict";var i=a("e599"),n=a.n(i);t["default"]=n.a},e599:function(e,t,a){e.exports={slide:"BaseUpload_slide_pLGOZ","slide-reverse":"BaseUpload_slide-reverse_g9S96",container:"BaseUpload_container_2LjuC",uploader:"BaseUpload_uploader_1LS51",uploader__icon:"BaseUpload_uploader__icon_3BW9H",uploader__limit:"BaseUpload_uploader__limit_1r9Gx","uploader--circle":"BaseUpload_uploader--circle_2_hVU",actions:"BaseUpload_actions_aSsGE","is-emtpy":"BaseUpload_is-emtpy_2Ex3X"}}}]);
//# sourceMappingURL=chunk-3559b494.ef43bb97.js.map