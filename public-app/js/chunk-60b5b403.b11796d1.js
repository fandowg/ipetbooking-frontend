(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60b5b403"],{"0d86":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isNoSize?a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"請新增子分類，若沒有子分類，將無法建立服務方案",type:"warning"}}):t._e(),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{md:10,span:24}},[a("el-form",{ref:"newForm",staticClass:"el-form--floating mb-5 mb-md-0",attrs:{model:t.submitDataCreate,rules:t.submitRules,"label-position":"top"}},[a("h4",{staticStyle:{"margin-bottom":"40px"}},[t._v(" 新增自訂分類 ")]),a("el-form-item",{attrs:{label:"名稱",prop:"title"}},[a("el-input",{attrs:{placeholder:"請輸入分類名稱"},model:{value:t.submitDataCreate.title,callback:function(e){t.$set(t.submitDataCreate,"title",e)},expression:"submitDataCreate.title"}})],1),a("el-form-item",{attrs:{label:"指派上層分類",prop:"parentId"}},[a("el-select",{attrs:{placeholder:"指派上層分類"},on:{change:t.changeParentCreate},model:{value:t.submitDataCreate.parentId,callback:function(e){t.$set(t.submitDataCreate,"parentId",e)},expression:"submitDataCreate.parentId"}},[a("el-option",{attrs:{value:"",label:"無上層分類"}}),t._l(t.categoryList,function(t,e){return a("el-option",{key:e,attrs:{label:t.title,value:t.id}})})],2)],1),a("el-button",{staticClass:"is-round",attrs:{type:"primary"},on:{click:function(e){return t.tryToSave(!0)}}},[a("BaseIcon",{attrs:{name:"plus"}}),a("span",[t._v("新增自訂分類")])],1)],1)],1),a("el-col",{attrs:{md:14,span:24}},[a("div",{staticClass:"el-table-wrapper isCategory"},[a("el-table",{staticClass:"tree-table",class:t.$style["table"],attrs:{data:t.categoryList,"default-expand-all":"","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"categoryTitle",label:"名稱","min-width":20}}),a("el-table-column",{attrs:{prop:"children.length",label:"項目數量","min-width":10,align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.children.length>1?a.children.length:1)+" ")]}}])}),a("el-table-column",{attrs:{width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tooltip",{attrs:{content:"編輯",placement:"top"}},[a("el-button",{staticClass:"is-round",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.tryToEdit(i)}}},[a("BaseIcon",{attrs:{name:"edit"}})],1)],1)]}}])})],1)],1)])],1),a("el-dialog",{attrs:{title:"編輯自訂分類",visible:t.visibleDialog,top:"0",width:"680px","append-to-body":""},on:{"update:visible":function(e){t.visibleDialog=e}}},[a("el-form",{ref:"editForm",staticClass:"el-form--floating",attrs:{model:t.submitData,"label-position":"top"}},[a("el-form-item",{attrs:{label:"名稱",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"請輸入分類名稱"},model:{value:t.submitData.title,callback:function(e){t.$set(t.submitData,"title",e)},expression:"submitData.title"}})],1),0!==t.submitData.level?a("el-form-item",{attrs:{label:"指派上層分類",prop:"parentId"}},[a("el-select",{attrs:{placeholder:"指派上層分類"},on:{change:t.changeParent},model:{value:t.submitData.parentId,callback:function(e){t.$set(t.submitData,"parentId",e)},expression:"submitData.parentId"}},t._l(t.categoryList,function(t,e){return a("el-option",{key:e,attrs:{label:t.title,value:t.id}})}),1)],1):t._e()],1),a("div",{staticClass:"bottom-btn-center"},[a("el-button",{staticClass:"is-round",on:{click:function(e){t.visibleDialog=!1}}},[t._v("取消")]),a("el-button",{staticClass:"is-round",attrs:{type:"primary"},on:{click:function(e){return t.tryToSave(!1)}}},[t._v("儲存")])],1)],1)],1)},r=[],n=a("9395"),s=a("4795"),c=a.n(s),l=a("cb0c"),o=a("f210"),u=a("a315"),d=a("62d4"),p=a("1b80"),b=a("7e02"),f=a("6bea"),h=a("3fa5"),m=a("df73"),v=a("21ac"),g=function(){return{level:0,state:1}},y={page:{title:"分類設定",meta:[{name:"description",content:"Prepaid List"}]},components:{BaseButtonDialog:d["default"],BaseStateLabel:function(){return Object(u["a"])(a.e("chunk-12bed50d").then(a.bind(null,"38d1")))},ItemDetail:function(){return Object(u["a"])(a.e("chunk-4d00f364").then(a.bind(null,"044d")))}},filters:{productTypeFilter:b["y"],priceStatusFilter:b["v"],prepaidCapacityFilter:b["t"],formatDateRange:f["b"]},mixins:[p["c"]],props:{serviceCategory:{type:Array,required:!0}},data:function(){return{categoryList:Object(o["a"])(this.serviceCategory),tableData:[{id:1,title:"狗狗",children:[{id:11,title:"大型犬"},{id:12,title:"中型犬"},{id:13,title:"小型犬"}]},{id:2,title:"貓咪",children:[{id:21,title:"短毛"},{id:22,title:"長毛"}]}],selectedCoupons:[],selectedDetail:{},filterData:{state:"",productId:"",type:"",body:""},productTypeList:Object.freeze(b["z"]),visibleDetail:!1,previousPage:1,previousTotal:0,tryingFetchDetail:!1,visibleDialog:!1,submitData:Object.assign(g(),this.defaultValue),submitDataCreate:Object.assign(g(),this.defaultValue),editData:{},isNoSize:!1}},computed:{submitRules:function(){return{title:[{required:!0,message:"請填寫分類名"}]}}},watch:{},created:function(){this.tryToFetchList()},methods:{tryToFetchList:function(){var t=Object(l["a"])(c.a.mark(function t(){return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("product/fetchServiceCategory");case 2:this.categoryList=t.sent,this.isNoSize=this.categoryList.some(function(t){return 0===t.children.length});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),tryToStoreCategory:function(){var t=Object(l["a"])(c.a.mark(function t(){return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),tryToRemove:function(){var t=Object(l["a"])(c.a.mark(function t(e){return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m["a"])("分類");case 3:return t.prev=3,t.next=6,this.$store.dispatch("product/removeServiceCategory",{ids:[e]});case 6:Object(h["a"])(),this.tryToFetchList();case 8:return t.prev=8,t.finish(8);case 10:t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](0);case 14:case"end":return t.stop()}},t,this,[[0,12],[3,,8,10]])}));return function(e){return t.apply(this,arguments)}}(),tryToEdit:function(t){this.visibleDialog=!0,this.submitData=Object(n["a"])({},t),this.submitData.state=1,this.submitData.params=""},tryToSave:function(){var t=Object(l["a"])(c.a.mark(function t(e){var a;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e?Object(n["a"])({},this.submitDataCreate):Object(n["a"])({},this.submitData),!e){t.next=6;break}return t.next=4,this.$refs.newForm.validate();case 4:t.next=8;break;case 6:return t.next=8,this.$refs.editForm.validate();case 8:return t.next=10,this.$store.dispatch("product/storeServiceCategory",a);case 10:return t.next=12,this.tryToFetchList();case 12:e?Object(h["b"])("add"):Object(h["b"])("edit"),e&&!this.isNoSize&&Object(v["a"])("分類資訊","一般服務","prices"),this.visibleDialog=!1,this.$emit("update-category");case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),changeParentCreate:function(){this.submitDataCreate.level=this.submitDataCreate.parentId?1:0},changeParent:function(){this.submitData.level=this.submitData.parentId?1:0}}},D=y,C=a("95a4"),w=a("2877");function x(t){this["$style"]=C["default"].locals||C["default"]}var k=Object(w["a"])(D,i,r,!1,x,null,null);e["default"]=k.exports},"21ac":function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("5c96");a("a18c");function r(t,e,a){Object(i["Notification"])({title:"提示",dangerouslyUseHTMLString:!0,message:"已更新".concat(t,'!\n    <br>您可前往\n    <a href="/').concat(a,'" style="cursor: pointer;">').concat(e,"</a>\n    進行更多設定")})}},3511:function(t,e,a){t.exports={slide:"Category_slide_HeI9N","slide-reverse":"Category_slide-reverse_snN5l",table:"Category_table_3BLMr"}},"3fa5":function(t,e,a){"use strict";a.d(e,"b",function(){return r}),a.d(e,"a",function(){return n});var i=a("5c96");function r(t){"add"===t&&Object(i["Message"])({message:"已新增",type:"success"}),"edit"===t&&Object(i["Message"])({message:"已儲存",type:"success"})}function n(){Object(i["Message"])({message:"已刪除",type:"success"})}},"95a4":function(t,e,a){"use strict";var i=a("3511"),r=a.n(i);e["default"]=r.a},df73:function(t,e,a){"use strict";a.d(e,"b",function(){return r}),a.d(e,"a",function(){return n});var i=a("5c96");function r(t){return i["MessageBox"].confirm("尚未完成新增，請問是否確定離開新增".concat(t),"您將離開此頁面",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}function n(t){return i["MessageBox"].confirm("您確定要刪除".concat(t,"嗎？"),"確認刪除",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}}}]);
//# sourceMappingURL=chunk-60b5b403.b11796d1.js.map