{"version":3,"sources":["webpack:///./src/utils/message.js","webpack:///./src/router/views/prepaid/add.vue?0fc1","webpack:///./src/router/views/prepaid/add.vue?7805","webpack:///./src/utils/message-box.js","webpack:///./src/router/views/prepaid/add.vue?d328","webpack:///src/router/views/prepaid/add.vue","webpack:///./src/router/views/prepaid/add.vue?9285","webpack:///./src/router/views/prepaid/add.vue?bcdb"],"names":["__webpack_require__","d","__webpack_exports__","messageStroe","messageDelete","element_ui__WEBPACK_IMPORTED_MODULE_0__","state","Message","message","type","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_add_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_add_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n","module","exports","slide","slide-reverse","page","card-wrapper","footer","messageBoxLeave","messageBoxDelete","pageTitle","MessageBox","confirm","concat","confirmButtonText","cancelButtonText","center","showClose","itemName","render","_vm","this","_h","$createElement","_c","_self","attrs","active","activeStep","list","stepList","class","$style","component","ref","tag","default-value","submitData","products","category","prices","on","update:defaultValue","$event","update:default-value","staticClass","data-tour-text","click","onClickLeave","_v","goBack","_e","loading","tryingNextStep","onClickNextStep","_s","staticRenderFns","initData","groupOrdering","groupAlias","title","categoryId","times","infinity","inventory","expireDays","slogan","description","notice","images","usageRules","maxTimes","priceGroupOrdering","productIds","prepaids","sizeId","basePrice","price","addvue_type_script_lang_js_","meta","name","content","components","Layout","main","BaseSteps","e","then","bind","props","Array","required","data","Object","freeze","Promise","all","nextStepButtonVisible","assign","computed","pagination","$route","params","filterData","created","methods","_onClickNextStep","asyncToGenerator","regenerator_default","a","mark","_callee","currentStep","wrap","_context","prev","next","t0","$refs","step","validate","abrupt","length","$confirm","showCancelButton","some","item","objectSpread","map","image","index","default","$store","dispatch","$router","push","t1","stop","_x","apply","arguments","_onClickLeave","_callee2","_context2","message_box","finish","prepaid_addvue_type_script_lang_js_","injectStyles","context","addvue_type_style_index_0_lang_scss_module_true_","locals","componentNormalizer"],"mappings":"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","file":"js/chunk-29ca9d2a.a8723821.js","sourcesContent":["import { Message } from 'element-ui';\n\nexport function messageStroe(state){\n  if(state==='add'){\n    Message({\n      message:'已新增',\n      type:'success'\n    });\n  }\n  if(state==='edit'){\n    Message({\n      message:'已儲存',\n      type:'success'\n    });\n  }\n}\n\nexport function messageDelete(){\n\n    Message({\n      message:'已刪除',\n      type:'success'\n    });\n\n\n}","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&lang=scss&module=true&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"add_slide_2SIJ7\",\"slide-reverse\":\"add_slide-reverse_4ejMR\",\"page\":\"add_page_38tQm\",\"card-wrapper\":\"add_card-wrapper_1a39v\",\"footer\":\"add_footer_1cU1o\"};","import { MessageBox } from 'element-ui';\n\nexport function messageBoxLeave(pageTitle){\n return MessageBox.confirm(\n    `尚未完成新增，請問是否確定離開新增${pageTitle}`,\n    '您將離開此頁面',\n    {\n      confirmButtonText: '確定',\n      cancelButtonText: '取消',\n      type: 'warning',\n      center: true,\n      showClose: false,\n    }\n  )\n}\nexport function messageBoxDelete(itemName){\n  return MessageBox.confirm(\n     `您確定要刪除${itemName}嗎？`,\n     '確認刪除',\n     {\n       confirmButtonText: '刪除',\n       cancelButtonText: '取消',\n       type: 'warning',\n       center: true,\n       showClose: false,\n     }\n   )\n }\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',[_c('BaseSteps',{attrs:{\"active\":_vm.activeStep,\"list\":_vm.stepList}}),_c('el-card',{class:_vm.$style['card-wrapper']},[_c('keep-alive',[_c(_vm.stepList[_vm.activeStep - 1].component,{ref:\"step\",tag:\"component\",attrs:{\"default-value\":_vm.submitData,\"products\":_vm.products,\"category\":_vm.category,\"prices\":_vm.prices},on:{\"update:defaultValue\":function($event){_vm.submitData=$event},\"update:default-value\":function($event){_vm.submitData=$event}}})],1)],1),_c('div',{class:_vm.$style.footer},[_c('el-button',{staticClass:\"is-round\",attrs:{\"data-tour-text\":\"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。\"},on:{\"click\":_vm.onClickLeave}},[_vm._v(\"離開\")]),(_vm.activeStep !== 1)?_c('el-button',{staticClass:\"is-round\",attrs:{\"data-tour-text\":\"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。\"},on:{\"click\":_vm.goBack}},[_vm._v(\"上一步\")]):_vm._e(),_c('el-button',{staticClass:\"is-round\",attrs:{\"data-tour-text\":\"若欄位皆已填寫完成，點擊「下一步」儲存此步驟填寫的資料，前往下一步\",\"type\":\"primary\",\"loading\":_vm.tryingNextStep},on:{\"click\":function($event){return _vm.onClickNextStep(_vm.activeStep)}}},[_vm._v(_vm._s(_vm.activeStep !== 4 ? '下一步' : '儲存'))])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Layout from '@layouts/main'\nimport { messageStroe, messageDelete } from '@utils/message'\nimport { messageBoxLeave } from '@utils/message-box'\nconst initData = () => {\n  return {\n    groupOrdering: 0,\n    groupAlias:'',\n    title: '',\n    categoryId: '',\n    times: 1,\n    infinity: 0,\n    inventory: 100,\n    expireDays: 90,\n    slogan: '',\n    description: '',\n    notice: '',\n    images: [],\n    usageRules: [],\n    prices: [\n      {\n        maxTimes: 5,\n        priceGroupOrdering: null,\n        productIds: [],\n      },\n    ],\n    prepaids: [\n      {\n        sizeId: null,\n        basePrice: 0,\n        price: 0,\n        state: 0,\n      },\n    ],\n  }\n}\n\nexport default {\n  page: {\n    title: '新增包月方案',\n    meta: [{ name: 'description', content: 'Add Prepaid' }],\n  },\n  components: {\n    Layout,\n    BaseSteps: () => import('@components/BaseSteps'),\n    // Step1: () => import('./components/Step1Basic'),\n    // Step2: () => import('./components/Step2Limit'),\n    // Step3: () => import('./components/Step3Available'),\n    // Step4: () => import('./components/Step4Prices'),\n  },\n  props: {\n    products: {\n      type: Array,\n      required: true,\n    },\n    category: {\n      type: Array,\n      required: true,\n    },\n    prices: {\n      type: Array,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      activeStep: 1,\n      stepList: Object.freeze([\n        {\n          title: '基本資訊',\n          description: '請填寫下方欄位',\n          component: () => import('./components/Step1Basic'),\n        },\n        {\n          title: '限制設定',\n          description: '請選取可抵扣的購買方案',\n          component: () => import('./components/Step2Limit'),\n        },\n        {\n          title: '適用設定',\n          description: '請填寫下方欄位',\n          component: () => import('./components/Step3Available'),\n        },\n        {\n          title: '價格設定',\n          description: '請選取可抵扣的購買方案',\n          component: () => import('./components/Step4Prices'),\n        },\n      ]),\n      tryingNextStep: false,\n      nextStepButtonVisible: false,\n      submitData: Object.assign({}, initData()),\n    }\n  },\n  computed: {\n    pagination() {\n      return this.$route.params.pagination\n    },\n    filterData(){\n      return this.$route.params.filterData\n    }\n  },\n  created() {\n    // console.log(this.$route.params.data)\n    // if (this.$route.params.data.title) {\n    //   this.step1Data = this.$route.params.data\n    // }\n  },\n  methods: {\n    async onClickNextStep(currentStep) {\n      this.tryingNextStep = true\n      try {\n        // console.log(this.$refs.step.submitData.times)\n        // await this.$refs.step.validate()\n        switch (currentStep) {\n          case 1:\n            // this.step1Data = this.$refs.step.submitData\n            await this.$refs.step.validate()\n            this.activeStep++\n            // console.log('換頁')\n            this.tryingNextStep = false\n            break\n          case 2:\n            await this.$refs.step.validate()\n            // this.step1Data = this.$refs.step.submitData\n            this.activeStep++\n            // console.log('換頁')\n            this.tryingNextStep = false\n            break\n          case 3:\n            // this.step1Data = this.$refs.step.submitData\n\n            if (this.submitData.prices[0].productIds.length === 0) {\n              await this.$confirm('請至少選擇一個服務項目，並設定適用店家', '提示', {\n                confirmButtonText: '確定',\n                showCancelButton: false,\n                type: 'warning',\n                center: true,\n              })\n              this.tryingNextStep = false\n              return\n            } else{\n              if (this.submitData.prices.some(item =>{\n                  return item.productIds.length === 0\n                })) {\n              await this.$confirm('有適用項目尚無選擇適用店家', '提示', {\n                  confirmButtonText: '確定',\n                  showCancelButton: false,\n                  type: 'warning',\n                  center: true,\n                })\n                this.tryingNextStep = false\n                return\n              }\n            }\n           \n            this.activeStep++\n            // console.log('換頁')\n            this.tryingNextStep = false\n            break\n\n          case 4:\n            await this.$refs.step.validate()\n            this.submitData = {\n              ...this.submitData,\n              images: this.submitData.images.map((image, index) => {\n                return {\n                  ...image,\n                  default: index === 0 ? 1 : 0,\n                }\n              }),\n            }\n            await this.$store.dispatch('prepaid/storeGroup', this.submitData)\n            messageStroe('add')\n            this.$router.push({ name: 'prepaid', params: { pagination: this.pagination,filterData:this.filterData } })\n            // this.$router.push({ name: 'prepaid',params: {  pagination:this.pagination } })\n            // try {\n            //   // console.log(this.$refs.step.submitData.prices)\n            //   if (this.$refs.step.submitData.prices.length === 0) {\n            //     await this.$confirm('請至少選擇一個適用項目', '提示', {\n            //       confirmButtonText: '確定',\n            //       showCancelButton: false,\n            //       type: 'warning',\n            //       center: true,\n            //     })\n            //     this.tryingNextStep = false\n            //     return\n            //   }\n            //   // 檢查包月方案適用項目總數必須大於方案總抵用次數\n            //   let allPricesMaxTimes = 0\n            //   this.$refs.step.submitData.prices.forEach((item) => {\n            //     allPricesMaxTimes = allPricesMaxTimes + item.maxTimes\n            //   })\n            //   // console.log(allPricesMaxTimes)\n            //   if (allPricesMaxTimes < this.submitData.times) {\n            //     await this.$confirm('適用項目總抵扣次數不得小於方案抵扣次數', '提示', {\n            //       confirmButtonText: '確定',\n            //       showCancelButton: false,\n            //       type: 'warning',\n            //       center: true,\n            //     })\n            //     this.tryingNextStep = false\n            //     return\n            //   }\n            //   // this.step1Data = Object.assign({}, this.step1Data, this.$refs.step.submitData)\n            //   await this.$store.dispatch('prepaid/store', this.submitData)\n            //   messageStroe('add')\n            //   this.$router.push({ name: 'prepaid',params: {  pagination:this.pagination } })\n            // } catch (error) {}\n            // this.tryingNextStep = false\n            break\n        }\n      } catch (error) {\n        this.tryingNextStep = false\n      }\n    },\n    goBack() {\n      this.activeStep--\n      // this.step1Data = this.$refs.step.submitData\n    },\n    async onClickLeave() {\n      try {\n        await messageBoxLeave('包月方案')\n        this.$router.push({ name: 'prepaid', params: { pagination: this.pagination,filterData:this.filterData } })\n      } catch (error) {\n      } finally {\n      }\n    },\n  },\n}\n</script>\n\n<template>\n  <Layout>\n    <BaseSteps :active=\"activeStep\" :list=\"stepList\" />\n\n    <el-card :class=\"$style['card-wrapper']\">\n      <keep-alive>\n        <component :is=\"stepList[activeStep - 1].component\" ref=\"step\" :default-value.sync=\"submitData\" :products=\"products\" :category=\"category\" :prices=\"prices\" />\n      </keep-alive>\n    </el-card>\n    <div :class=\"$style.footer\">\n      <el-button class=\"is-round\" data-tour-text=\"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。\" @click=\"onClickLeave\">離開</el-button>\n      <el-button v-if=\"activeStep !== 1\" class=\"is-round\" data-tour-text=\"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。\" @click=\"goBack\">上一步</el-button>\n      <el-button class=\"is-round\" data-tour-text=\"若欄位皆已填寫完成，點擊「下一步」儲存此步驟填寫的資料，前往下一步\" type=\"primary\" :loading=\"tryingNextStep\" @click=\"onClickNextStep(activeStep)\">{{\n        activeStep !== 4 ? '下一步' : '儲存'\n      }}</el-button>\n    </div>\n  </Layout>\n</template>\n\n<style lang=\"scss\" module>\n@import '@src/design/layout_detail_steps.scss';\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=63c1603e&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}