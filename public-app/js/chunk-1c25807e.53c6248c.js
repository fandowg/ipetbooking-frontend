(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c25807e"],{"19b2":function(e,t,a){e.exports={slide:"FileUpload_slide_2lNMM","slide-reverse":"FileUpload_slide-reverse_uiZJb",wrap:"FileUpload_wrap_uaacx",uploader:"FileUpload_uploader_3j7yJ",uploader__icon:"FileUpload_uploader__icon_1byfO",uploader__limit:"FileUpload_uploader__limit_2yi9K","uploader--circle":"FileUpload_uploader--circle_3bHKd",actions:"FileUpload_actions_1pOMi","is-emtpy":"FileUpload_is-emtpy_chXmG","add-btn":"FileUpload_add-btn_38qFu"}},c6b0:function(e,t,a){"use strict";var i=a("19b2"),n=a.n(i);t["default"]=n.a},fb25:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUpload,expression:"showUpload"}],class:e.$style.wrap},[e._l(e.fileList,function(t,i){return a("div",{key:"image-and-action--"+i,class:[e.$style.uploader,"image-and-action"]},[t.path?a("el-image",{attrs:{src:t.path,fit:"cover"}},[a("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n        載入中\n        "),a("span",{staticClass:"dot"},[e._v("...")])])]):e._e(),0===i&&"service"===e.type?a("span",{staticClass:"first",staticStyle:{"font-size":"12px",color:"darkgray"}},[a("BaseIcon",{attrs:{name:"flag"}}),e._v(" 此為服務項目首圖")],1):e._e(),t.path?a("span",{class:e.$style.actions},[a("el-tooltip",{attrs:{effect:"dark",content:"預覽圖片",placement:"top"}},[a("span",{on:{click:function(a){return e.handlePreview(t.path)}}},[a("BaseIcon",{attrs:{name:"eye"}})],1)]),a("el-tooltip",{attrs:{effect:"dark",content:"刪除圖片",placement:"top"}},[a("span",{on:{click:function(a){return e.handleRemove(t.path)}}},[a("BaseIcon",{attrs:{name:"trash-alt"}})],1)])],1):e._e()],1)}),e.showUploadBtn?a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.tryingToUpload,expression:"tryingToUpload"}],ref:"el-upload",class:[e.$style.uploader,e.$style["add-btn"]],attrs:{"list-type":"picture-card",action:"string","http-request":e.handleUpload,"before-upload":e.beforeImageUpload,"show-file-list":!1}},[a("BaseIcon",{attrs:{name:"image"}}),a("div",{staticClass:"text"},[e._v("點擊上傳圖片")])],1):e._e(),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"1135px",top:"0","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl}})])],2)},n=[],l=a("4795"),s=a.n(l),o=a("cb0c"),r=a("f210"),p=a("b775"),d={props:{isDeleteSave:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}},showUpload:{type:Boolean,default:!1},resource:{type:String,required:!0,validator:function(e){return-1!==["staff","merchant","product","prepaid"].indexOf(e)}},single:{type:Boolean,default:!1},type:{type:String,default:""}},data:function(){return{fileList:Object.assign([],this.value),tryingToUpload:!1,dialogImageUrl:"",dialogVisible:!1}},computed:{showUploadBtn:function(){return!this.single||0===this.value.length}},methods:{emitInput:function(){this.$emit("input",Object(r["a"])(this.fileList))},beforeImageUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<=25;return t||this.$message.error("上傳的圖片只能是 JPG 或 PNG 格式"),a||this.$message.error("上傳的圖片大小不能超過 25 MB"),t&&a},handleUpload:function(){var e=Object(o["a"])(s.a.mark(function e(t){var a,i;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("files[]",t.file),this.tryingToUpload=!0,e.next=5,p["a"].post("/admin/merchant/media/upload",a,{headers:{"Content-Type":"multipart/form-data"}});case 5:i=e.sent,this.fileList.push({type:"image",path:i}),this.tryingToUpload=!1,this.emitInput();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleRemove:function(){var e=Object(o["a"])(s.a.mark(function e(t){var a,i;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=/^(https?:)/.test(t),a||(i=new FormData,i.append("paths[]",t),i.append("resource",this.resource),p["a"].post("/admin/merchant/media/delete",i,{headers:{"Content-Type":"multipart/form-data"}})),this.afterHandleRemove(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),afterHandleRemove:function(e){var t=this;this.fileList.some(function(a,i){return a.path===e&&(t.fileList.splice(i,1),!0)}),this.emitInput(),this.isDeleteSave&&this.$emit("deleteSave")},handlePreview:function(e){this.dialogImageUrl=e,this.dialogVisible=!0},clearFileList:function(){this.fileList=[],this.emitInput()}}},c=d,u=a("c6b0"),h=a("2877");function f(e){this["$style"]=u["default"].locals||u["default"]}var m=Object(h["a"])(c,i,n,!1,f,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-1c25807e.53c6248c.js.map