{"version":3,"sources":["webpack:///./src/utils/notification.js","webpack:///./src/utils/message.js","webpack:///./src/router/views/product/add.vue?6306","webpack:///./src/router/views/product/add.vue?32a5","webpack:///./src/utils/message-box.js","webpack:///./src/router/views/product/add.vue?56e3","webpack:///src/router/views/product/add.vue","webpack:///./src/router/views/product/add.vue?8e95","webpack:///./src/router/views/product/add.vue?7189"],"names":["__webpack_require__","d","__webpack_exports__","notification","element_ui__WEBPACK_IMPORTED_MODULE_0__","from","to","link","Notification","title","dangerouslyUseHTMLString","message","concat","messageStroe","messageDelete","state","Message","type","module","exports","slide","slide-reverse","page","card-wrapper","footer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_add_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_add_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n","messageBoxLeave","messageBoxDelete","pageTitle","MessageBox","confirm","confirmButtonText","cancelButtonText","center","showClose","itemName","render","_vm","this","_h","$createElement","_c","_self","class","$style","attrs","active","activeStep","list","stepList","shadow","ref","tag","item-type","productType","default-value","formDataAll","on","validate","handleFormValidate","data-tour-text","click","onClickLeave","_v","_e","$event","nextStepButtonVisible","loading","tryingNextStep","onClickNextStep","_s","staticRenderFns","addvue_type_script_lang_js_","meta","name","content","components","Layout","main","BaseSteps","Object","lazyload_component","e","then","bind","Step1","Promise","all","Step2","Step3","props","defaultStep","Number","required","String","default","defaultValue","data","description","tryingUpdateState","geocoder","map","hasGeo","computed","productId","$route","params","mounted","initGeocoder","methods","valid","_onClickLeave","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","message_box","$router","push","t0","finish","stop","apply","arguments","handleStorePrice","storeData","$store","dispatch","handleStoreInventory","submitData","handleStoreProduct","_handleStoreProduct","_callee2","_context2","geocode","lat","lng","objectSpread","staffs","staff","id","hostTitle","abrupt","_x","handleStoreExtraField","extraFields","toConsumableArray","byOrder","bySize","length","incrementActiveStep","_onClickNextStep","_callee3","timeData","i","newProduct","routeTo","_context3","$refs","step","formatSubmitData","serviceTimeSetting","start","timeRange","end","sent","resolve","location","t1","updateItemState","_updateItemState","_callee4","_args4","_context4","undefined","ids","google","maps","Geocoder","_geocode","_callee5","callback","_context5","address","city","district","componentRestrictions","country","results","geometry","_x2","product_addvue_type_script_lang_js_","injectStyles","context","addvue_type_style_index_0_lang_scss_module_true_","locals","component","componentNormalizer"],"mappings":"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","file":"js/chunk-62afd811.b9a4e767.js","sourcesContent":["import { Notification } from 'element-ui';\nimport router from '@router'\n\nexport function notification(from,to,link){\n  Notification({\n    title:'提示',\n    dangerouslyUseHTMLString: true,\n    message:`已更新${from}!\n    <br>您可前往\n    <a href=\"/${link}\" style=\"cursor: pointer;\">${to}</a>\n    進行更多設定`,\n    // onClick(){\n    //   router.push({\n    //         name:'staff'\n    //       })\n    // }\n  })\n}\n\n","import { Message } from 'element-ui';\n\nexport function messageStroe(state){\n  if(state==='add'){\n    Message({\n      message:'已新增',\n      type:'success'\n    });\n  }\n  if(state==='edit'){\n    Message({\n      message:'已儲存',\n      type:'success'\n    });\n  }\n}\n\nexport function messageDelete(){\n\n    Message({\n      message:'已刪除',\n      type:'success'\n    });\n\n\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"add_slide_3EBF5\",\"slide-reverse\":\"add_slide-reverse_CEYkU\",\"page\":\"add_page_GKYzw\",\"card-wrapper\":\"add_card-wrapper_9HR59\",\"footer\":\"add_footer_1g-aF\"};","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&lang=scss&module=true&\"","import { MessageBox } from 'element-ui';\n\nexport function messageBoxLeave(pageTitle){\n return MessageBox.confirm(\n    `尚未完成新增，請問是否確定離開新增${pageTitle}`,\n    '您將離開此頁面',\n    {\n      confirmButtonText: '確定',\n      cancelButtonText: '取消',\n      type: 'warning',\n      center: true,\n      showClose: false,\n    }\n  )\n}\nexport function messageBoxDelete(itemName){\n  return MessageBox.confirm(\n     `您確定要刪除${itemName}嗎？`,\n     '確認刪除',\n     {\n       confirmButtonText: '刪除',\n       cancelButtonText: '取消',\n       type: 'warning',\n       center: true,\n       showClose: false,\n     }\n   )\n }\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{class:_vm.$style.page},[_c('BaseSteps',{attrs:{\"active\":_vm.activeStep,\"list\":_vm.stepList}}),_c('el-card',{class:_vm.$style['card-wrapper'],attrs:{\"shadow\":\"never\"}},[_c('keep-alive',[_c((\"step-\" + _vm.activeStep),{ref:\"step\",tag:\"component\",attrs:{\"item-type\":_vm.productType,\"default-value\":_vm.formDataAll},on:{\"validate\":_vm.handleFormValidate}})],1)],1),_c('div',{class:_vm.$style.footer},[(_vm.activeStep === 1)?_c('el-button',{attrs:{\"data-tour-text\":\"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。\"},on:{\"click\":_vm.onClickLeave}},[_vm._v(\"離開\")]):_vm._e(),(_vm.activeStep !== 1)?_c('el-button',{on:{\"click\":function($event){_vm.activeStep--}}},[_vm._v(\"上一步\")]):_vm._e(),(_vm.activeStep !== 3 ? true : _vm.nextStepButtonVisible)?_c('el-button',{attrs:{\"data-tour-text\":\"若欄位皆已填寫完成，點擊「下一步」儲存此步驟填寫的資料，前往下一步\",\"type\":\"primary\",\"loading\":_vm.tryingNextStep},on:{\"click\":_vm.onClickNextStep}},[_vm._v(_vm._s(_vm.activeStep !== 3 ? '下一步' : '儲存'))]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport lazyLoadComponent from '@router/lazyload-component'\n\nimport Layout from '@layouts/main'\nimport { messageStroe, messageDelete } from '@utils/message'\nimport { messageBoxLeave } from '@utils/message-box'\nimport { notification } from '@utils/notification'\n\nexport default {\n  page: {\n    title: '新增項目',\n    meta: [{ name: 'description', content: 'Add Product' }],\n  },\n  components: {\n    Layout,\n    BaseSteps: () => lazyLoadComponent(import('@components/BaseSteps')),\n    Step1: () => lazyLoadComponent(import('./components/Step1Basic')),\n    Step2: () => lazyLoadComponent(import('./components/Step6ServiceTime')),\n    Step3: () => lazyLoadComponent(import('./components/Step4ExtraField')),\n  },\n  props: {\n    defaultStep: {\n      type: Number,\n      required: true,\n    },\n    productType: {\n      type: String,\n      default: 'service',\n    },\n    defaultValue: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      tryingNextStep: false,\n      nextStepButtonVisible: false,\n      activeStep: this.defaultStep,\n      stepList: [\n        {\n          title: '基本資訊',\n          description: '設定分店資訊',\n        },\n        {\n          title: '營業時間',\n          description: '設定營業時間',\n        },\n        // {\n        //   title: '時段',\n        //   description: '想要在什麼時間讓客戶參與活動呢？可以設定多重時段及重複週期喔！暫不編輯時段，請按離開，完成時段編輯，請按下一步。',\n        // },\n        // {\n        //   title: '購買方案',\n        //   description: '可以設定各式各樣的購買方案讓客戶選擇，請將購買方案所包含的項目或使用方式寫在內容中。暫不編輯購買方案，請按離開，完成購買方案編輯，請按下一步。',\n        // },\n        {\n          title: '自訂問題',\n          description: '想知道客戶是如何得知你們的嗎？或是需要統計餐點數量提前做準備嗎？可以自訂問題與客戶互動喔～完成或想略過額外欄位新增請按下一步。',\n        },\n        // {\n        //   title: '設定上下架',\n        //   description: '是否上架？',\n        // },\n      ],\n      formDataAll:{},\n      tryingUpdateState: false,\n      geocoder:'',\n      map:[],\n      hasGeo: false,\n    }\n  },\n  computed: {\n    productId() {\n      return this.$route.params.productId\n    },\n  },\n   mounted() {\n    this.initGeocoder();\n  },\n  methods: {\n    handleFormValidate(valid) {\n      this.nextStepButtonVisible = valid\n    },\n    async onClickLeave() {\n      try{\n        await messageBoxLeave('分店')\n        this.$router.push({ name: 'products' })\n      }\n      catch (error) {\n\n      } finally {\n\n      }\n      // this.$confirm(\n      //   this.$t('PRODUCT.LEAVE_ADD_CONFIRM_MESSAGE', {\n      //     name: this.$t(`PRODUCT.${this.productType}.NAME`),\n      //   }),\n      //   '您將離開此頁面',\n      //   {\n      //     confirmButtonText: '確定',\n      //     cancelButtonText: '取消',\n      //     type: 'warning',\n      //     center: true,\n      //   }\n      // ).then(() => {\n      //   this.$router.push({ name: 'products' })\n      // })\n\n\n    },\n    handleStorePrice(storeData) {\n      return this.$store.dispatch('product/storePrices', {\n        productId: this.productId,\n        storeData,\n      })\n    },\n    handleStoreInventory(submitData) {\n      return this.$store.dispatch('inventory/storeGroups', {\n        productId: this.productId,\n        submitData,\n      })\n    },\n   async handleStoreProduct(submitData) {\n       await this.geocode(submitData)\n      // console.log(this.map)\n      submitData.lat=this.map[0]\n      submitData.lng=this.map[1]\n      const storeData = {\n        ...submitData,\n        type: this.productType,\n        staffs: submitData.staffs.map((staff) => {\n          return {\n            id: staff.id,\n            hostTitle: staff.hostTitle,\n          }\n        }),\n      }\n      return this.$store.dispatch('product/store', storeData)\n    },\n    handleStoreExtraField(submitData) {\n      const extraFields = [...submitData.byOrder, ...submitData.bySize]\n      const storeData = {\n        productId: this.productId,\n      }\n      if (extraFields.length > 0) storeData.extraFields = extraFields\n      return this.$store.dispatch('product/updateExtraField', storeData)\n    },\n    incrementActiveStep() {\n      if (this.activeStep++ === this.stepList.length) this.activeStep = 1\n      this.tryingNextStep = false\n    },\n    async onClickNextStep() {\n      \n      // const step1Ref = this.$refs.step1[0]\n      // const formData = step1Ref.submitData\n      // const step2Ref = this.$refs.step2[0]\n      // const timeData = step2Ref.serviceTimeSetting\n      try {\n        switch (this.activeStep) {\n          case 1:\n            // const formData = this.$refs.step.submitData\n            await this.$refs.step.validate()\n            this.formDataAll = this.$refs.step.formatSubmitData\n            this.activeStep++\n       \n            // const newProduct = await this.handleStoreProduct(formData)\n           \n\n            break\n          case 2:\n            // console.log(this.$refs.step2[0].serviceTimeSetting)\n            \n            await this.$refs.step.validate()\n            this.tryingNextStep = true\n            const timeData = this.$refs.step.serviceTimeSetting\n            // console.log(formData,timeData)\n            for(let i in timeData){\n              timeData[i].start = timeData[i].timeRange[0]\n              timeData[i].end = timeData[i].timeRange[1]\n            }\n            // console.log(timeData)\n            const newProduct = await this.handleStoreProduct({...this.formDataAll,serviceTimeSetting:timeData})\n            const routeTo = this.$router.resolve({\n              params: { productId: newProduct.id },\n            })\n            this.$router.push(routeTo.location)\n             this.activeStep=3\n            this.tryingNextStep=false\n            // this.incrementActiveStep()\n           \n            break\n          case 3:\n            const list = this.$refs.step.list\n            this.tryingNextStep = true\n            await this.handleStoreExtraField(list)\n            this.tryingNextStep = false\n            messageStroe('add')\n            notification('分店資訊','分類設定','prices?tab=category')\n             this.$router.push({ name: 'products' })\n            // this.updateItemState()\n\n            break\n        }\n      } catch (error) {\n        this.tryingNextStep = false\n      }\n    },\n    async updateItemState(state = 1) {\n      this.tryingUpdateState = true\n      try {\n        await this.$store.dispatch('product/updateState', {\n          ids: [this.productId],\n          state,\n        })\n        this.$router.push({ name: 'products' })\n        this.tryingUpdateState = false\n      } catch (error) {\n        this.tryingUpdateState = false\n      }\n    },\n      initGeocoder() {\n      this.geocoder = new google.maps.Geocoder();\n    },\n    async geocode(submitData) {\n\n      // const address = this.restaurant.address;\n    const callback = await this.geocoder.geocode(\n        // GeocoderRequest 物件: 帶入要轉換的地址與相關設定\n        {\n     \n          address:`${submitData.location.city}${submitData.location.district}${submitData.location.address}`,\n          // 限制轉換的結果必須是在台灣的範圍\n          componentRestrictions: {\n            country: \"TW\"\n          }\n        }\n  \n      );\n      const lat = callback.results[0].geometry.location.lat()\n      const lng = callback.results[0].geometry.location.lng()\n      this.map = [lat,lng]\n      // console.log(callback)\n    }\n  },\n}\n</script>\n\n<template>\n  <Layout :class=\"$style.page\">\n    <!-- <BasePageHeader\n      :title=\"\n        $t('GLOBAL.HEADER_ADD_PREFIX', {\n          name: $t(`PRODUCT.${productType}.NAME`),\n        })\n      \"\n    > -->\n   <BaseSteps  :active=\"activeStep\" :list=\"stepList\" />\n    <!-- :header=\"stepList[activeStep - 1].description\" -->\n    <el-card shadow=\"never\" :class=\"$style['card-wrapper']\">\n      <keep-alive>\n        <component :is=\"`step-${activeStep}`\" ref=\"step\" :item-type=\"productType\" :default-value=\"formDataAll\" @validate=\"handleFormValidate\"></component>\n      </keep-alive>\n    </el-card>\n    <div  :class=\"$style.footer\">\n      <el-button v-if=\"activeStep === 1\" data-tour-text=\"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。\" @click=\"onClickLeave\">離開</el-button>\n      <el-button  v-if=\"activeStep !== 1\"  @click=\"activeStep--\">上一步</el-button>\n      <el-button\n        v-if=\"activeStep !== 3 ? true : nextStepButtonVisible\"\n        data-tour-text=\"若欄位皆已填寫完成，點擊「下一步」儲存此步驟填寫的資料，前往下一步\"\n        type=\"primary\"\n        :loading=\"tryingNextStep\"\n        @click=\"onClickNextStep\"\n        >{{activeStep !== 3 ? '下一步' : '儲存'}}</el-button\n      >\n    </div>\n     <!-- <div v-show=\"activeStep !== stepList.length\" :class=\"$style.footer\">\n      <el-button data-tour-text=\"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。\" @click=\"onClickLeave\">離開</el-button>\n      <el-button\n        v-if=\"activeStep === 1 ? true : nextStepButtonVisible\"\n        data-tour-text=\"若欄位皆已填寫完成，點擊「下一步」儲存此步驟填寫的資料，前往下一步\"\n        type=\"primary\"\n        :loading=\"tryingNextStep\"\n        @click=\"onClickNextStep\"\n        >下一步</el-button\n      >\n    </div> -->\n  </Layout>\n</template>\n\n<style lang=\"scss\" module>\n@import '@src/design/layout_detail_steps.scss';\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=47bf9ea8&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}