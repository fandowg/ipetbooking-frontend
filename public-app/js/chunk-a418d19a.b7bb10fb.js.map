{"version":3,"sources":["webpack:///./src/router/views/settings/TabNotification.vue?f65f","webpack:///./src/router/views/settings/TabNotification.vue?c72f","webpack:///./src/router/views/settings/TabNotification.vue?8f1f","webpack:///src/router/views/settings/TabNotification.vue","webpack:///./src/router/views/settings/TabNotification.vue?d086","webpack:///./src/router/views/settings/TabNotification.vue?cf3f"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TabNotification_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TabNotification_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","module","exports","slide","slide-reverse","notification","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","class","$style","attrs","element-loading-text","staticStyle","height","_e","margin-bottom","padding","border","model","callback","$$v","activeNames","_l","data","index","key","title","mapItemName","item-name","default-value","on","save","tryToStoreConfig","staticRenderFns","TabNotificationvue_type_script_lang_js_","page","meta","content","components","ListItem","Object","lazyload_component","e","then","bind","tourName","recevie","merchantConfigs","order_Cancel","order_ChangeTime","order_Qrcode","order_CheckoutLink","order_Remind","order_RequestDeduct","prepaid_Cancel","prepaid_Qrcode","prepaid_CheckoutLink","member_SendPassword","orderAdd_CheckoutLink","orderAdd_PaySuccess","orderAdd_Cancel","tryingToFetchConfig","computed","configData","lodash","sendTypeData","sendType","productTypeData","productType","itemTypeData","itemType","undefined","concat","created","tryToFetchConfig","methods","changeMode","mode","_tryToFetchConfig","asyncToGenerator","regenerator_default","a","mark","_callee","config","wrap","_context","prev","next","$store","dispatch","sent","email","coupon","sms","stop","apply","arguments","_tryToStoreConfig","_callee2","submitData","_context2","state","merchant","cached","merchantConfig","objectSpread","$message","message","type","_x","_x2","settings_TabNotificationvue_type_script_lang_js_","injectStyles","context","TabNotificationvue_type_style_index_0_lang_scss_module_true_","locals","component","componentNormalizer"],"mappings":"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","file":"js/chunk-a418d19a.b7bb10fb.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabNotification.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabNotification.vue?vue&type=style&index=0&lang=scss&module=true&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"TabNotification_slide_342mP\",\"slide-reverse\":\"TabNotification_slide-reverse_FTH93\",\"notification\":\"TabNotification_notification_8MUSc\"};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tryingToFetchConfig),expression:\"tryingToFetchConfig\"}],class:_vm.$style.notification,attrs:{\"element-loading-text\":\"取得資訊中\"}},[(_vm.tryingToFetchConfig)?_c('div',{staticStyle:{\"height\":\"40vh\"}}):_vm._e(),_c('el-collapse',{staticStyle:{\"margin-bottom\":\"20px\",\"padding\":\"0 20px\",\"border\":\"none\"},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},_vm._l((_vm.configData),function(data,index){return _c('el-collapse-item',{key:(\"config-\" + index),attrs:{\"title\":_vm.mapItemName[index],\"name\":index}},[_c('ListItem',{attrs:{\"item-name\":index,\"default-value\":data},on:{\"save\":_vm.tryToStoreConfig}})],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport lazyLoadComponent from '@router/lazyload-component'\nimport { forOwn } from 'lodash'\n\nexport default {\n  page: {\n    title: '商店設定',\n    meta: [{ name: 'description', content: 'Notification' }],\n  },\n  components: {\n    ListItem: () => lazyLoadComponent(import('./components/ListItem')),\n  },\n  tourName: 'merchantPlan',\n  data() {\n    return {\n      recevie: '1',\n      activeNames: [],\n      merchantConfigs: {},\n      mapItemName: {\n        order_Cancel: '預約已取消',\n        order_ChangeTime: '預約改期',\n        order_Qrcode: '確認收款通知',\n        order_CheckoutLink: '預約付款通知',\n        order_Remind: '行前提醒通知',\n        order_RequestDeduct: '訂單確認折抵通知',\n        prepaid_Cancel: '包月方案訂單取消通知',\n        prepaid_Qrcode: '包月方案購買完成通知',\n        prepaid_CheckoutLink: '包月方案付款通知',\n        member_SendPassword: '成功加入會員',\n        orderAdd_CheckoutLink: '加購訂單付款通知',\n        orderAdd_PaySuccess: '加購訂單購買完成通知',\n        orderAdd_Cancel: '加購訂單取消通知',\n      },\n      tryingToFetchConfig: false,\n    }\n  },\n  computed: {\n    configData() {\n      const configData = {}\n      forOwn(this.merchantConfigs, (sendTypeData, sendType) => {\n        forOwn(sendTypeData, (productTypeData, productType) => {\n          forOwn(productTypeData, (itemTypeData, itemType) => {\n            if (configData[`${productType}_${itemType}`] === undefined) configData[`${productType}_${itemType}`] = {}\n            configData[`${productType}_${itemType}`][sendType] = itemTypeData\n          })\n        })\n      })\n      delete configData['prepaid_Remind']\n      delete configData['member_SendPassword']\n      // delete configData['order_Cancel']\n      // delete configData['order_RequestDeduct']\n      // delete configData['prepaid_Cancel']\n      return configData\n    },\n  },\n  created() {\n    this.tryToFetchConfig()\n  },\n  methods: {\n    changeMode(mode) {\n      this.mode = mode\n    },\n    async tryToFetchConfig() {\n      this.tryingToFetchConfig = true\n      let config = await this.$store.dispatch('merchant/fetchConfig')\n      if(config.email.coupon){\n        delete config.email.coupon\n      }\n      if(config.sms.coupon){\n        delete config.sms.coupon\n      }\n      this.merchantConfigs = config\n      this.tryingToFetchConfig = false\n    },\n    async tryToStoreConfig(config, callback) {\n      const submitData = {\n        name: this.$store.state.merchant.cached.name,\n        merchantConfig: {\n          notification: {\n            ...config,\n          },\n        },\n      }\n      await this.$store.dispatch('merchant/store', submitData)\n      this.$message({\n        message: '儲存成功！',\n        type: 'success',\n      })\n      callback()\n    },\n  },\n}\n</script>\n\n<template>\n  <div v-loading=\"tryingToFetchConfig\" :class=\"$style.notification\" element-loading-text=\"取得資訊中\">\n    <div v-if=\"tryingToFetchConfig\" style=\"height: 40vh;\"></div>\n    <el-collapse v-model=\"activeNames\" style=\"margin-bottom: 20px; padding: 0 20px; border: none;\">\n      <el-collapse-item v-for=\"(data, index) in configData\" :key=\"`config-${index}`\" :title=\"mapItemName[index]\" :name=\"index\">\n        <ListItem :item-name=\"index\" :default-value=\"data\" @save=\"tryToStoreConfig\"></ListItem>\n      </el-collapse-item>\n    </el-collapse>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n.notification {\n  :global {\n    .el-collapse-item__header {\n      font-size: 18px;\n      height: 60px;\n    }\n    .el-collapse-item__wrap {\n      padding: 0 10px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabNotification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TabNotification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabNotification.vue?vue&type=template&id=63baa262&\"\nimport script from \"./TabNotification.vue?vue&type=script&lang=js&\"\nexport * from \"./TabNotification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TabNotification.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}