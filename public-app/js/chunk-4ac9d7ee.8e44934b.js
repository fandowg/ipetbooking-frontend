(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ac9d7ee"],{"298b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,fullscreen:e.isMobile,top:"0","append-to-body":""},on:{close:e.onClose}},[a("div",{class:e.$style.info},[a("div",{staticClass:"service"},[e._v(e._s(e.defaultValue.params[0].title))]),a("div",{staticClass:"product"},[e._v(e._s(e.defaultValue.productName))]),a("p",{staticClass:"booking-date Jost",staticStyle:{"margin-bottom":"5px"}},[e._v(e._s(e._f("formatDate")(new Date(e.defaultValue.date)))+" "+e._s(e.defaultValue.time))]),a("div",[e._v(e._s(e.defaultValue.fullName)+" "+e._s(e._f("genderFilter")(e.defaultValue.gender)))])]),a("el-divider"),e.noShow?a("div",[a("p",[e._v("請說明情況")]),a("el-form",{ref:"form",attrs:{model:e.submitData,rules:{note:[{required:!0,message:"請輸入情況！",trigger:"blur"}]}}},[a("el-form-item",{attrs:{prop:"note"}},[a("el-input",{staticClass:"is-round is-light is-border",attrs:{type:"textarea",rows:4,placeholder:"請輸入備註"},model:{value:e.submitData.note,callback:function(t){e.$set(e.submitData,"note",t)},expression:"submitData.note"}})],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"is-round is-fullwidth",on:{click:e.onClose}},[e._v("返回")])],1),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"is-round is-fullwidth",attrs:{loading:e.tryingNoShow,disabled:e.tryingNoShow,type:"danger"},on:{click:e.onClickNoShow}},[e._v("未報到")])],1)],1)],1):a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tryingCheckIn,expression:"tryingCheckIn"}]},[e.cameraVisible?e._e():a("el-button",{staticClass:"is-round is-fullwidth is-border",attrs:{type:"primary",plain:""},on:{click:e.onClickManualCheckIn}},[e._v("報到")])],1),a("el-divider"),a("el-button",{staticClass:"is-round is-fullwidth",attrs:{plain:""},on:{click:e.onClose}},[e._v("返回訂單")])],1)],1)},r=[],i=a("4795"),s=a.n(i),o=a("cb0c"),c=a("9395"),l=a("6d12"),u=a("6bea"),d=a("7e02"),h={NotAllowedError:"請允許 j'tails 存取您的相機",NotFoundError:"此裝置無相機",NotSupportedError:"此頁面非安全瀏覽（如：HTTPS、localhost 或 file://）",NotReadableError:"無法存取您的相機。相機是否正在使用中？",OverconstrainedError:"您裝置的相機無法使用",StreamApiNotSupportedError:"掃描憑證不支援此瀏覽器"},p=function(){return{decodeResult:"",codeInfo:"",codeCanCheckIn:!1,codeInvalidMessage:""}},f={name:"CheckInDialog",components:{QrcodeStream:l["QrcodeStream"]},filters:{formatDate:u["a"],genderFilter:d["h"]},props:{visible:{type:Boolean,default:!1},defaultValue:{type:Object,default:function(){}},noShow:{type:Boolean,default:!1}},data:function(){return Object(c["a"])({edit:!1,note:"",submitData:{note:""},cameraStatus:"auto",cameraErrorMessage:"",cameraVisible:!1,cameraLoading:!1},p(),{tryingCheckIn:!1,tryingNoShow:!1})},computed:{isMobile:function(){return/Mobi/.test(navigator.userAgent)}},methods:{onClose:function(){this.$emit("update:visible",!1)},changeCameraStatus:function(e){this.cameraStatus=e},onInit:function(){var e=Object(o["a"])(s.a.mark(function e(t){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.cameraLoading=!0,e.prev=1,e.next=4,t;case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),this.cameraErrorMessage=h[e.t0.name]||"未預期的錯誤：".concat(e.t0);case 9:return e.prev=9,this.cameraLoading=!1,e.finish(9);case 12:case"end":return e.stop()}},e,this,[[1,6,9,12]])}));return function(t){return e.apply(this,arguments)}}(),onDecode:function(){var e=Object(o["a"])(s.a.mark(function e(t){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:this.tryToCheckIn(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),tryToCheckIn:function(){var e=Object(o["a"])(s.a.mark(function e(t){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("確定將此訂單改為「已報到」？","警告",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning",center:!0});case 2:return e.prev=2,this.tryingCheckIn=!0,e.next=6,this.$store.dispatch("order/verifySingleCode",{codeId:t,orderId:this.defaultValue.id});case 6:this.$message({type:"success",message:"報到成功！"}),this.$emit("update"),this.onClose(),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](2);case 13:return e.prev=13,this.tryingCheckIn=!1,e.finish(13);case 16:case"end":return e.stop()}},e,this,[[2,11,13,16]])}));return function(t){return e.apply(this,arguments)}}(),onClickManualCheckIn:function(){this.tryToCheckIn(this.defaultValue.params[0].codes[0].id)},onClickNoShow:function(){var e=Object(o["a"])(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate();case 2:return e.next=4,this.$confirm("確定將此訂單改為「未報到」？","警告",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning",center:!0});case 4:return this.tryingNoShow=!0,t=Object(c["a"])({},this.defaultValue,{status:5,merchantNote:this.submitData.note}),e.next=8,this.$store.dispatch("order/store",t);case 8:this.$emit("update"),this.$emit("update:visible",!1),this.tryingNoShow=!1;case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},m=f,v=a("8c20"),b=a("2877");function g(e){this["$style"]=v["default"].locals||v["default"]}var w=Object(b["a"])(m,n,r,!1,g,null,null);t["default"]=w.exports},"8c20":function(e,t,a){"use strict";var n=a("a27e"),r=a.n(n);t["default"]=r.a},a27e:function(e,t,a){e.exports={slide:"CheckInDialog_slide_5hL7T","slide-reverse":"CheckInDialog_slide-reverse_1iPYi",info:"CheckInDialog_info_2cbSS"}}}]);
//# sourceMappingURL=chunk-4ac9d7ee.8e44934b.js.map