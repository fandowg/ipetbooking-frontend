(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca10d574"],{"819e":function(t,e,s){t.exports={slide:"listContent_slide_2NzGm","slide-reverse":"listContent_slide-reverse_3aDkB",page:"listContent_page_1UPYs","card-wrapper":"listContent_card-wrapper_3ue96",footer:"listContent_footer_3qxfR",listContentSection:"listContent_listContentSection_X8UIy"}},"93ca":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"notification",class:[t.$style.listContentSection,{employeeBox:t.isEmployee}]},[s("el-tabs",{attrs:{stretch:"",type:"border-card"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.tabList,function(e,n){return s("el-tab-pane",{key:n,attrs:{name:e.type}},[s("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.title)+" "),0!==t.readData[e.readType]&&t.readData[e.readType]?s("span",[t._v("("),s("span",{staticClass:"hidden-mobile"},[t._v("未讀")]),t._v(t._s(t.readData[e.readType])+")")]):t._e()]),0===t.activeList.length?s("p",{staticStyle:{padding:"35px 30px"}},[t._v("尚未有任何通知")]):t._e(),s("div",[t._l(t.activeList,function(n,i){return s("ListItem",{key:i,attrs:{item:n,index:i,type:e.type},on:{update:t.tryToFetchPushes}})}),t.tryingPush?s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tryingPush,expression:"tryingPush"}],staticStyle:{height:"80px"}}):t._e()],2),t.isListEnd[e.type]?s("div",{staticClass:"listEnd"},[t._v("已經到最後囉")]):t._e()])}),1)],1)},i=[],a=s("4795"),r=s.n(a),o=s("cb0c"),c=s("9395"),l=s("a315"),u=s("7e02"),h=s("1b80"),d=s("2f62"),p={components:{ListItem:function(){return Object(l["a"])(s.e("chunk-4841235c").then(s.bind(null,"1770")))}},filters:{genderFilter:u["h"]},mixins:[h["c"]],props:{isEmployee:{type:Boolean,default:!1}},data:function(){return{activeTab:"normal",tabList:Object.freeze([{title:"一般通知",type:"normal",readType:"unRead"},{title:"系統公告",type:"system",readType:"sysUnRead"}]),tryingPush:!1,next_cursor:{normal:null,system:null},isListEnd:{normal:!1,system:!1}}},computed:Object(c["a"])({},Object(d["d"])("push",["readData","normalPushes","systemPushes"]),{activeList:function(){var t=[];return t="normal"===this.activeTab?this.normalPushes:this.systemPushes,t}}),watch:{},created:function(){this.$store.commit("push/CLEAR_PUSHES"),this.tryToFetchPushes(),this.clearUnRead()},mounted:function(){this.$refs.notification.style.height="".concat(window.innerHeight-0,"px"),this.$refs.notification.addEventListener("scroll",this.onScroll),this.$route.name},methods:Object(c["a"])({},Object(d["b"])("push",["fetchPushes","clearUnRead"]),{tryToFetchPushes:function(){var t=Object(o["a"])(r.a.mark(function t(){var e,s;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tryingPush=!0,e=this.next_cursor[this.activeTab],t.next=4,this.fetchPushes({type:this.activeTab,nextCursorRequest:e});case 4:s=t.sent,"not"!==s.normal&&(this.next_cursor.normal=s.normal),"not"!==s.system&&(this.next_cursor.system=s.system),this.tryingPush=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onScroll:function(){var t=this.$refs.notification.scrollHeight-this.$refs.notification.scrollTop<window.innerHeight+20;this.next_cursor[this.activeTab]&&t&&!this.tryingPush&&this.tryToFetchPushes(),this.next_cursor[this.activeTab]||(this.isListEnd[this.activeTab]=!0)}})},y=p,f=s("d125"),m=s("2877");function v(t){this["$style"]=f["default"].locals||f["default"]}var _=Object(m["a"])(y,n,i,!1,v,null,null);e["default"]=_.exports},d125:function(t,e,s){"use strict";var n=s("819e"),i=s.n(n);e["default"]=i.a}}]);
//# sourceMappingURL=chunk-ca10d574.2eb3ddcb.js.map