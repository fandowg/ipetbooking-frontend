{"version":3,"sources":["webpack:///./src/components/Order/OrderDetail.vue?87b5","webpack:///src/components/Order/OrderDetail.vue","webpack:///./src/components/Order/OrderDetail.vue?9ab0","webpack:///./src/components/Order/OrderDetail.vue?758f","webpack:///./src/components/Order/OrderDetail.vue?0652","webpack:///./src/components/Order/OrderDetail.vue?3913"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","$style","tabs","model","value","callback","$$v","activeTab","expression","_l","tab","index","key","attrs","label","name","default-value","defaultValue","assign-list","assignList","loading","tryingAssign","on","update:loading","$event","update","handleStore","tag","to","status","isAllPaid","staticClass","type","click","showSignDialog","_v","_e","paymentMethod","staticStyle","display","width","top","left","closable","slot","paymentStatus","openPaidDialog","tryingCheckIn","disabled","openCheckDialog","noShowDialogVisible","tryToCancel","signDialogKey","visible","signDialogVisible","order","Object","assign","update:visible","title","append-to-body","ref","submitData","rules","note","required","message","trigger","prop","rows","placeholder","$set","margin-top","gutter","span","tryingNoShow","onClickNoShow","paidDialogVisible","item","tryToPayOrder","_s","checkDialogVisible","check","submitRules","label-width","label-position","scheduleItem","directives","rawName","element-loading-background","length","id","sameStore","tryToStoreAssignAndCheckIn","statusDialogVisible","cancelled","emitStore","staticRenderFns","OrderDetailvue_type_script_lang_js_","components","Info","lazyload_component","Promise","all","__webpack_require__","e","then","bind","Service","Orders","More","BaseCollapse","Portal","portal_vue_common","SignatureDialog","OrderChangeStatusDialog","filters","orderStatusFilter","filter_value_to_text","genderFilter","orderSourceFilter","bookingStatusFilter","props","default","data","mode","cancelDialogVisible","tabList","payMethods","Cash","StoreCredit","Atm","helperId","computed","objectSpread","helpers","isPaid","isEmptyBySizeExtrafields","customerInfos","bySizeExtrafields","Array","isAddOrdersCanceled","childrenOrders","every","mainOrderPaid","addOrderPaid","created","$parent","$el","querySelector","style","borderBottom","minHeight","tryToFetchHelperList","helper","methods","updateMode","_handleStore","asyncToGenerator","regenerator_default","a","mark","_callee","updatedValue","wrap","_context","prev","next","$store","dispatch","sent","$emit","stop","apply","arguments","showCancelDialog","tryToCheckIn","_tryToCheckIn","_callee2","_context2","$refs","beauticianForm","validate","codeId","params","codes","orderId","$message","t0","finish","_onClickNoShow","_callee3","storeData","_context3","form","$confirm","confirmButtonText","cancelButtonText","center","merchantNote","_tryToFetchHelperList","_callee4","_ref","items","_this","_context4","forEach","splice","_tryToStoreAssignAndCheckIn","_callee5","_context5","itemId","_tryToPayOrder","_callee6","method","_context6","concat","showCancelButton","_x","Order_OrderDetailvue_type_script_lang_js_","injectStyles","context","OrderDetailvue_type_style_index_0_lang_scss_module_true_","locals","component","componentNormalizer","__webpack_exports__","module","exports","slide","slide-reverse","meta","header","info","params__item","total","total__item","total__item--discount","buttons","info-byOrder","question-list","question","payment","chat","tab-content","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OrderDetail_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OrderDetail_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-1542bfb8.e06bb8f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-tabs',{class:_vm.$style.tabs,model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},_vm._l((_vm.tabList),function(tab,index){return _c('el-tab-pane',{key:index,attrs:{\"label\":tab.label,\"name\":tab.name}})}),1),_c('Info',{attrs:{\"default-value\":_vm.defaultValue,\"assign-list\":_vm.assignList,\"loading\":_vm.tryingAssign},on:{\"update:loading\":function($event){_vm.tryingAssign=$event},\"update\":_vm.handleStore}}),_c(_vm.activeTab,{tag:\"component\",class:_vm.$style['tab-content'],attrs:{\"default-value\":_vm.defaultValue},on:{\"update\":_vm.handleStore}}),_c('Portal',{attrs:{\"to\":\"drawer-header\"}},[(_vm.defaultValue.status !== 0)?[(_vm.defaultValue.status === 4 && _vm.isAllPaid)?_c('el-button',{staticClass:\"is-round\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showSignDialog}},[_vm._v(\"簽名請款\")]):_vm._e(),(_vm.defaultValue.status === 4 && !_vm.isAllPaid && _vm.defaultValue.paymentMethod !== 'Credit')?_c('el-alert',{staticStyle:{\"display\":\"inline-block\",\"width\":\"auto\",\"top\":\"14px\",\"left\":\"-10px\"},attrs:{\"type\":\"error\",\"closable\":false}},[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"請將訂單及加購款項結清，\"),_c('br'),_vm._v(\"始可完成簽名請款\")])]):_vm._e(),(_vm.defaultValue.status === 4 && !_vm.isAllPaid && _vm.defaultValue.paymentMethod === 'Credit')?_c('el-alert',{staticStyle:{\"display\":\"inline-block\",\"width\":\"auto\",\"top\":\"14px\",\"left\":\"-10px\"},attrs:{\"type\":\"error\",\"closable\":false}},[_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"客戶選定線上信用卡結帳，\"),_c('br'),_vm._v(\"無法快速付款\")])]):_vm._e(),(_vm.defaultValue.paymentStatus === 'UNPAID' \n              && _vm.defaultValue.paymentMethod !== 'Credit' \n              && _vm.defaultValue.paymentMethod !== 'Vacc' \n              && _vm.defaultValue.paymentMethod !== 'Prepaid')?_c('el-button',{staticClass:\"is-round\",attrs:{\"type\":\"success\"},on:{\"click\":_vm.openPaidDialog}},[_vm._v(\"\\n        付款\\n      \")]):_vm._e(),(_vm.defaultValue.status === 3)?_c('el-button',{staticClass:\"is-round\",attrs:{\"loading\":_vm.tryingCheckIn,\"disabled\":_vm.tryingCheckIn || _vm.tryingAssign,\"type\":\"primary\"},on:{\"click\":_vm.openCheckDialog}},[_vm._v(\"報到\")]):_vm._e(),(_vm.defaultValue.status === 3)?_c('el-button',{staticClass:\"is-round\",attrs:{\"loading\":_vm.tryingCheckIn,\"disabled\":_vm.tryingCheckIn || _vm.tryingAssign,\"type\":\"danger\"},on:{\"click\":function($event){_vm.noShowDialogVisible = true}}},[_vm._v(\"未報到\")]):_vm._e(),(_vm.defaultValue.status !== 6 )?_c('el-button',{staticClass:\"is-round\",attrs:{\"type\":\"info\"},on:{\"click\":_vm.tryToCancel}},[_vm._v(\"取消\")]):_vm._e()]:_vm._e()],2),_c('SignatureDialog',{key:_vm.signDialogKey,attrs:{\"visible\":_vm.signDialogVisible,\"order\":Object.assign({}, _vm.defaultValue)},on:{\"update:visible\":function($event){_vm.signDialogVisible=$event},\"update\":_vm.handleStore}}),_c('el-dialog',{attrs:{\"title\":\"請說明未報到情況\",\"visible\":_vm.noShowDialogVisible,\"top\":\"0\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.noShowDialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.submitData,\"rules\":{ note: [{ required: true, message: '請輸入情況！', trigger: 'blur' }] }}},[_c('el-form-item',{attrs:{\"prop\":\"note\"}},[_c('el-input',{staticClass:\"is-round is-light is-border\",attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"請輸入備註\"},model:{value:(_vm.submitData.note),callback:function ($$v) {_vm.$set(_vm.submitData, \"note\", $$v)},expression:\"submitData.note\"}})],1)],1),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-button',{staticClass:\"is-round is-fullwidth\",on:{\"click\":function($event){_vm.noShowDialogVisible = false}}},[_vm._v(\"返回\")])],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-button',{staticClass:\"is-round is-fullwidth\",attrs:{\"loading\":_vm.tryingNoShow,\"disabled\":_vm.tryingNoShow,\"type\":\"danger\"},on:{\"click\":_vm.onClickNoShow}},[_vm._v(\"未報到\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":'請選擇付款方式',\"visible\":_vm.paidDialogVisible,\"top\":\"0\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.paidDialogVisible=$event}}},[_c('div',{staticClass:\"bottom-btn-center\"},_vm._l((_vm.payMethods),function(item,key){return _c('el-button',{key:key,staticClass:\"is-round\",on:{\"click\":function($event){return _vm.tryToPayOrder(key)}}},[_vm._v(_vm._s(item))])}),1)]),(_vm.defaultValue.scheduleItem)?_c('el-dialog',{attrs:{\"title\":'確認將此訂單改為「已報到」',\"visible\":_vm.checkDialogVisible,\"top\":\"0\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.checkDialogVisible=$event}}},[_c('el-form',{ref:\"beauticianForm\",staticClass:\"el-form-item--normal-margin\",attrs:{\"model\":_vm.check,\"rules\":_vm.submitRules,\"label-width\":\"100px\",\"label-position\":\"left\"}},[_c('el-form-item',{staticClass:\"el-form-item--normal-margin\",attrs:{\"label\":\"美容師\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.defaultValue.scheduleItem ? _vm.defaultValue.scheduleItem.name : '')+\"\\n        \")]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tryingAssign),expression:\"tryingAssign\"}],attrs:{\"element-loading-background\":\"rgba(0, 0, 0,0)\"}},[(_vm.assignList.length > 0)?_c('el-form-item',{staticClass:\"el-form-item--normal-margin\",attrs:{\"label\":\"助理\",\"prop\":\"assistant\"}},[_c('el-select',{model:{value:(_vm.check.helperId),callback:function ($$v) {_vm.$set(_vm.check, \"helperId\", $$v)},expression:\"check.helperId\"}},[_c('el-option',{attrs:{\"label\":\"不指派\",\"value\":\"\"}}),_vm._l((_vm.assignList),function(item,index){return _c('el-option',{key:index,attrs:{\"value\":item.id,\"label\":((item.name) + \" \" + (item.sameStore ? '(同分店)' : '(不同分店)'))}})})],2)],1):_vm._e(),(_vm.assignList.length === 0 && !_vm.tryingAssign)?_c('el-form-item',{staticClass:\"el-form-item--normal-margin\",attrs:{\"label\":\"助理\",\"prop\":\"assistant\"}},[_c('el-alert',{attrs:{\"title\":\"目前無人員可指派\",\"type\":\"warning\",\"closable\":false}})],1):_vm._e()],1)],1),_c('div',{staticClass:\"bottom-btn-center\"},[_c('el-button',{staticClass:\"is-round\",on:{\"click\":function($event){_vm.checkDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{staticClass:\"is-round\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.tryToStoreAssignAndCheckIn}},[_vm._v(\"確認\")])],1)],1):_vm._e(),_c('OrderChangeStatusDialog',{attrs:{\"visible\":_vm.statusDialogVisible,\"order\":Object.assign({}, _vm.defaultValue,{status: 0})},on:{\"update:visible\":function($event){_vm.statusDialogVisible=$event},\"cancelled\":_vm.emitStore}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport lazyLoadComponent from '@router/lazyload-component'\n\nimport { Portal } from 'portal-vue'\n\nimport { genderFilter, orderStatusFilter, orderSourceFilter, bookingStatusFilter } from '@utils/filter-value-to-text'\n\nimport { authComputed } from '@state/helpers'\n\nexport default {\n  name: 'OrderDetail',\n  components: {\n    Info: () => lazyLoadComponent(import('@components/Order/Info')),\n    Service: () => lazyLoadComponent(import('@components/Order/Service')),\n    Orders: () => lazyLoadComponent(import('@components/Order/Orders')),\n    More: () => lazyLoadComponent(import('@components/Order/More')),\n    BaseCollapse: () => lazyLoadComponent(import('@components/BaseCollapse')),\n    Portal,\n    SignatureDialog: () => lazyLoadComponent(import('@components/SignatureDialog')),\n    OrderChangeStatusDialog: () => lazyLoadComponent(import('@components/OrderChangeStatusDialog')),\n  },\n  filters: {\n    orderStatusFilter,\n    genderFilter,\n    orderSourceFilter,\n    bookingStatusFilter,\n  },\n  props: {\n    defaultValue: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      mode: 'view', // view 檢視、edit 編輯\n      cancelDialogVisible: false,\n      signDialogVisible: false,\n      signDialogKey: 0,\n      tryingCheckIn: false,\n      noShowDialogVisible: false,\n      tryingNoShow: false,\n      submitData: {\n        note: '',\n      },\n\n      activeTab: 'service',\n      tabList: [\n        {\n          name: 'service',\n          label: '服務',\n        },\n        {\n          name: 'orders',\n          label: '訂單',\n        },\n        {\n          name: 'more',\n          label: '更多',\n        },\n      ],\n      payMethods:{\n        'Cash': '到店付款(現金)',\n        'StoreCredit': '現場刷卡',\n        'Atm': '線下匯款',\n      },\n\n      check: {\n        // beautician: 'Cindy Lee',\n        helperId: '',\n      },\n      assignList: [],\n      checkDialogVisible: false,\n      helperId: '',\n      tryingAssign: false,\n      paidDialogVisible:false,\n      statusDialogVisible:false\n    }\n  },\n  computed: {\n    ...authComputed,\n    isPaid() {\n      return this.defaultValue.status === 1\n    },\n    isEmptyBySizeExtrafields() {\n      if (this.defaultValue.customerInfos.length === 0) return true\n      return this.defaultValue.customerInfos[0].bySizeExtrafields instanceof Array\n    },\n    submitRules() {\n      return {\n        // beautician: [\n        //   {\n        //     required: true,\n        //     message: '請選擇美容師',\n        //     trigger: 'change',\n        //   },\n        // ],\n        helperId: [\n          {\n            required: true,\n            message: '請選擇助理',\n            trigger: 'change',\n          },\n        ],\n      }\n    },\n    isAddOrdersCanceled() {\n      return this.defaultValue.childrenOrders.every((order)=> order.status !== 1)\n    },\n    isAllPaid(){\n      let mainOrderPaid = this.defaultValue.paymentStatus === 'PAID'\n      let addOrderPaid = this.defaultValue.childrenOrders.every((order)=> order.status !== 2)\n      return mainOrderPaid && addOrderPaid\n    }\n  },\n  created() {\n    this.$parent.$el.querySelector('.el-drawer__header').style.borderBottom = 'none'\n    this.$parent.$el.querySelector('.el-drawer__header').style.minHeight = '82px'\n    // this.tryToFetchCalendar()\n    this.tryToFetchHelperList()\n    this.check.helperId = this.defaultValue.helper ? this.defaultValue.helper.id : ''\n  },\n  methods: {\n    updateMode(value) {\n      this.mode = value\n    },\n    async handleStore() {\n      const updatedValue = await this.$store.dispatch('order/fetchSingle', this.defaultValue.id)\n      this.$emit('update:defaultValue', updatedValue)\n      this.$emit('update')\n      this.updateMode('view')\n    },\n    showCancelDialog() {\n      this.cancelDialogVisible = true\n    },\n    async tryToCheckIn() {\n      await this.$refs.beauticianForm.validate()\n      this.checkDialogVisible = false\n      // await this.$confirm('確定將此訂單改為「已報到」？', '警告', {\n      //   confirmButtonText: '確定',\n      //   cancelButtonText: '取消',\n      //   type: 'warning',\n      //   center: true,\n      // })\n      try {\n        this.tryingCheckIn = true\n        await this.$store.dispatch('order/verifySingleCode', {\n          codeId: this.defaultValue.params[0].codes[0].id,\n          orderId: this.defaultValue.id,\n        })\n        this.$message({\n          type: 'success',\n          message: '報到成功！',\n        })\n        this.handleStore()\n      } catch (e) {\n      } finally {\n        this.tryingCheckIn = false\n      }\n    },\n    async onClickNoShow() {\n      await this.$refs.form.validate()\n      await this.$confirm('確定將此訂單改為「未報到」？', '警告', {\n        confirmButtonText: '確定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        center: true,\n      })\n      this.tryingNoShow = true\n      const storeData = {\n        ...this.defaultValue,\n        status: 5,\n        merchantNote: this.submitData.note,\n      }\n      await this.$store.dispatch('order/store', storeData)\n      this.handleStore()\n      this.submitData.note = ''\n      this.noShowDialogVisible = false\n      this.tryingNoShow = false\n    },\n    showSignDialog() {\n      this.signDialogKey++\n      this.signDialogVisible = true\n    },\n  /*   async tryToFetchCalendar() {\n      if (!this.defaultValue.scheduleItem) {\n        this.tryingAssign = false\n        return\n      }\n      this.tryingAssign = true\n      const { scheduleItems } = await this.$store.dispatch('schedule/fetchList', { date: this.defaultValue.date })\n      this.assignList = scheduleItems.filter((assign) => {\n        return assign.scheduleDetails.some((item) => {\n          const minute = this.defaultValue.time.split(':')\n          const endDate = new Date(this.defaultValue.endDate).getTime()\n          let startDate = new Date(this.defaultValue.date)\n          // console.log(minute)\n          startDate.setHours(Number(minute[0]))\n          startDate.setMinutes(Number(minute[1]))\n          startDate = startDate.getTime()\n          // console.log(startDate,endDate)\n          // console.log(new Date(item.startDate).getTime(),new Date(item.endDate).getTime())\n          return startDate >= new Date(item.startDate).getTime() && endDate <= new Date(item.endDate).getTime()\n        })\n\n        // return  item.scheduleDetails.length > 0\n      })\n      this.assignList.forEach((item, index) => {\n        if (item.id === this.defaultValue.scheduleItem.id) {\n          this.assignList.splice(index, 1)\n        }\n      })\n      this.tryingAssign = false\n      console.log(this.assignList)\n    }, */\n    async tryToFetchHelperList(){\n     this.tryingAssign = true\n     const {items} = await this.$store.dispatch('order/fetchHelperList', this.defaultValue.id)\n     this.assignList = items\n     this.assignList.forEach((item,index)=>{\n       if(item.id===this.defaultValue.scheduleItem.id){\n         this.assignList.splice(index,1)\n       }\n     })\n     this.tryingAssign = false\n    },\n    async tryToStoreAssignAndCheckIn() {\n      // this.tryingAssign=true\n      this.tryingCheckIn = true\n    /*   if (this.check.helperId) {\n        await this.$store.dispatch('order/storeAssignHelper', { id: this.defaultValue.id, itemId: this.check.helperId })\n      } */\n      await this.$store.dispatch('order/storeAssignHelper', { id: this.defaultValue.id, itemId: this.check.helperId })\n      this.tryToCheckIn()\n      // this.$emit('update')\n      // this.tryingAssign=false\n      // this.editAssistantEnabled = false\n    },\n    openCheckDialog(){\n      this.checkDialogVisible = true\n      this.check.helperId = this.defaultValue.helper ? this.defaultValue.helper.id : ''\n    },\n    openPaidDialog(){\n      this.paidDialogVisible = true\n    },\n    async tryToPayOrder(method){\n      try {\n        await this.$confirm(`確認付款方式為「 ${this.payMethods[method]} 」？`, '提示', {\n            confirmButtonText: '確定',\n            showCancelButton: true,\n            type: 'warning',\n            center: true,\n          })\n        await this.$store.dispatch('order/store', {\n          ...this.defaultValue,\n          paymentMethod:method,\n          paymentStatus:'PAID',\n        })\n          this.$message({\n          type: 'success',\n          message: '編輯成功！',\n          })\n        this.handleStore()\n        this.paidDialogVisible = false\n      } catch {\n      }\n      finally{\n        \n      }\n     \n    },\n    \n    tryToCancel(){\n      if(!this.isAddOrdersCanceled){\n         this.$confirm('請先將加購訂單全數取消', '提示', {\n            confirmButtonText: '確定',\n            // cancelButtonText:'放棄',\n            showCancelButton: false,\n            type: 'warning',\n            center: true,\n          })\n      }else{\n        this.statusDialogVisible = true\n      }\n      \n    },\n    // async tryToCancel(){\n    //   try{\n    //     await this.$confirm('確定取消訂單？', '提示', {\n    //         confirmButtonText: '確定',\n    //         cancelButtonText:'放棄',\n    //         showCancelButton: true,\n    //         type: 'warning',\n    //         center: true,\n    //       })\n    //     await this.$store.dispatch('order/store', {\n    //       ...this.defaultValue,\n    //       status:0\n    //     })\n    //     this.$message({\n    //     type: 'success',\n    //     message: '已取消訂單！',\n    //     })\n    //     this.handleStore()\n    //   } catch {\n\n    //   }\n    // },\n    emitStore(){\n      this.handleStore()\n    }\n  },\n}\n</script>\n\n<template>\n  <div>\n    <el-tabs v-model=\"activeTab\" :class=\"$style.tabs\">\n      <el-tab-pane v-for=\"(tab, index) in tabList\" :key=\"index\" :label=\"tab.label\" :name=\"tab.name\"></el-tab-pane>\n    </el-tabs>\n    <Info :default-value=\"defaultValue\" :assign-list=\"assignList\" :loading.sync=\"tryingAssign\" @update=\"handleStore\"></Info>\n    <component :is=\"activeTab\" :class=\"$style['tab-content']\" :default-value=\"defaultValue\" @update=\"handleStore\"></component>\n\n    <Portal to=\"drawer-header\">\n      <template v-if=\"defaultValue.status !== 0\">\n        <!-- 判斷「待報到」的狀態才能顯示 -->\n        <el-button v-if=\"defaultValue.status === 4 && isAllPaid\" class=\"is-round\" type=\"primary\" @click=\"showSignDialog\">簽名請款</el-button>\n        <el-alert v-if=\"defaultValue.status === 4 && !isAllPaid && defaultValue.paymentMethod !== 'Credit'\" style=\"display:inline-block; width:auto;top:14px;left:-10px\" type=\"error\" :closable=\"false\">\n          <span slot=\"title\">請將訂單及加購款項結清，<br>始可完成簽名請款</span>\n        </el-alert>\n        <el-alert v-if=\"defaultValue.status === 4 && !isAllPaid && defaultValue.paymentMethod === 'Credit'\" style=\"display:inline-block; width:auto;top:14px;left:-10px\" type=\"error\" :closable=\"false\">\n          <span slot=\"title\">客戶選定線上信用卡結帳，<br>無法快速付款</span>\n        </el-alert>\n        <el-button \n          v-if=\"defaultValue.paymentStatus === 'UNPAID' \n                && defaultValue.paymentMethod !== 'Credit' \n                && defaultValue.paymentMethod !== 'Vacc' \n                && defaultValue.paymentMethod !== 'Prepaid'\" \n          class=\"is-round\" \n          type=\"success\" \n          @click=\"openPaidDialog\"\n        >\n          付款\n        </el-button>\n        <el-button v-if=\"defaultValue.status === 3\" :loading=\"tryingCheckIn\" :disabled=\"tryingCheckIn || tryingAssign\" class=\"is-round\" type=\"primary\" @click=\"openCheckDialog\">報到</el-button>\n        <el-button v-if=\"defaultValue.status === 3\" :loading=\"tryingCheckIn\" :disabled=\"tryingCheckIn || tryingAssign\" class=\"is-round\" type=\"danger\" @click=\"noShowDialogVisible = true\">未報到</el-button>\n        <el-button v-if=\"defaultValue.status !== 6 \"  type=\"info\" class=\"is-round\"  @click=\"tryToCancel\">取消</el-button>\n        <!-- <el-button class=\"is-round\" @click=\"updateMode('edit')\">編輯訂單</el-button> -->\n      </template>\n    </Portal>\n\n    <SignatureDialog :key=\"signDialogKey\" :visible.sync=\"signDialogVisible\" :order=\"{ ...defaultValue }\" @update=\"handleStore\" />\n    <el-dialog title=\"請說明未報到情況\" :visible.sync=\"noShowDialogVisible\" top=\"0\" append-to-body>\n      <el-form ref=\"form\" :model=\"submitData\" :rules=\"{ note: [{ required: true, message: '請輸入情況！', trigger: 'blur' }] }\">\n        <el-form-item prop=\"note\">\n          <el-input v-model=\"submitData.note\" type=\"textarea\" class=\"is-round is-light is-border\" :rows=\"4\" placeholder=\"請輸入備註\"></el-input>\n        </el-form-item>\n      </el-form>\n      <el-row :gutter=\"20\" style=\"margin-top: 20px\">\n        <el-col :span=\"12\">\n          <el-button class=\"is-round is-fullwidth\" @click=\"noShowDialogVisible = false\">返回</el-button>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-button :loading=\"tryingNoShow\" :disabled=\"tryingNoShow\" type=\"danger\" class=\"is-round is-fullwidth\" @click=\"onClickNoShow\">未報到</el-button>\n        </el-col>\n      </el-row>\n    </el-dialog>\n    <el-dialog  :title=\"'請選擇付款方式'\" :visible.sync=\"paidDialogVisible\" top=\"0\" append-to-body>\n      <div class=\"bottom-btn-center\">\n        <el-button v-for=\"(item,key) in payMethods\" :key=\"key\" class=\"is-round\" @click=\"tryToPayOrder(key)\">{{item}}</el-button>\n      \n      </div>\n    </el-dialog>\n\n    <el-dialog v-if=\"defaultValue.scheduleItem\" :title=\"'確認將此訂單改為「已報到」'\" :visible.sync=\"checkDialogVisible\" top=\"0\" append-to-body>\n      <el-form ref=\"beauticianForm\" :model=\"check\" :rules=\"submitRules\" class=\"el-form-item--normal-margin\" label-width=\"100px\" label-position=\"left\">\n        <el-form-item label=\"美容師\" class=\"el-form-item--normal-margin\">\n          {{ defaultValue.scheduleItem ? defaultValue.scheduleItem.name : '' }}\n          <!-- <el-select v-model=\"check.beautician\">\n            <el-option v-for=\"item in beauticianList\" :key=\"item.value\" :value=\"item.value\" :label=\"item.label\"></el-option>\n          </el-select> -->\n        </el-form-item>\n        \n        <div v-loading=\"tryingAssign\" element-loading-background=\"rgba(0, 0, 0,0)\">\n        <el-form-item v-if=\"assignList.length > 0\" label=\"助理\" prop=\"assistant\" class=\"el-form-item--normal-margin\">\n          <el-select v-model=\"check.helperId\">\n            <el-option label=\"不指派\" value></el-option>\n            <el-option v-for=\"(item, index) in assignList\" :key=\"index\" :value=\"item.id\" :label=\"`${item.name} ${item.sameStore ? '(同分店)' : '(不同分店)'}`\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item v-if=\"assignList.length === 0 && !tryingAssign\" label=\"助理\" prop=\"assistant\" class=\"el-form-item--normal-margin\">\n          <el-alert title=\"目前無人員可指派\" type=\"warning\" :closable=\"false\"></el-alert>\n        </el-form-item>\n        </div>\n\n      </el-form>\n\n      <div class=\"bottom-btn-center\">\n        <el-button class=\"is-round\" @click=\"checkDialogVisible = false\">取消</el-button>\n        <el-button class=\"is-round\" type=\"primary\" @click=\"tryToStoreAssignAndCheckIn\">確認</el-button>\n      </div>\n    </el-dialog>\n    <!-- <BaseCollapse v-if=\"!isEmptyBySizeExtrafields\" title=\"參與人資訊\">\n        <div v-for=\"(customerInfo, index) in defaultValue.customerInfos\" :key=\"`customerInfo-${index}`\" :class=\"$style['question-list']\">\n          <div class=\"customer\">\n            <BaseIcon name=\"user\" icon-style=\"fas\" />\n            {{ `參與人 ${index + 1}` }}\n          </div>\n          <ul v-for=\"(field, bySizeIndex) in customerInfo.bySizeExtrafields\" :key=\"`customerInfo-${index}-${bySizeIndex}`\" :class=\"$style.question\">\n            <li class=\"title\">{{ field.title }}</li>\n            <li>{{ field.value }}</li>\n          </ul>\n        </div>\n      </BaseCollapse> -->\n    <!-- <div :class=\"$style.buttons\" >\n        <BaseButton icon=\"clipboard-list\" @click=\"showMemberDialog\"\n          >查看客戶資訊</BaseButton\n        >\n        <template v-if=\"defaultValue.status !== 0\">\n          <BaseButton icon=\"mail-bulk\" @click=\"writeDialogVisible = true\"\n            >撰寫通知</BaseButton\n          >\n          <BaseButton\n            icon=\"paper-plane\"\n            :loading=\"tryingSendEmail\"\n            @click=\"tryToSendEmail\"\n            >發送{{ isPaid ? ' QR Code ' : '付款' }}連結至使用人\n            Email</BaseButton\n          >\n          <BaseButton icon=\"share-alt\" @click=\"showShareDialog\"\n            >分享{{ isPaid ? 'QR Code' : '付款' }}頁面連結</BaseButton\n          >\n          <BaseButton icon=\"edit\" @click=\"updateMode('edit')\"\n            >編輯訂單</BaseButton\n          >\n          <BaseButton icon=\"ban\" @click=\"showCancelDialog\">取消訂單</BaseButton>\n        </template>\n      </div> -->\n      <OrderChangeStatusDialog :visible.sync=\"statusDialogVisible\"  :order=\"{ ...defaultValue,status: 0 }\"  @cancelled=\"emitStore\" />\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@design';\n.meta {\n  display: flex;\n  justify-content: space-between;\n}\n.header {\n  margin-bottom: 15px;\n}\n.title:not(:first-child) {\n  margin-top: 30px;\n}\n.info {\n  padding-inline-start: 0;\n  > li {\n    padding: 5px 0;\n  }\n}\n.params {\n  padding: 5px 15px;\n  font-size: 14px;\n  line-height: 40px;\n  background: white;\n\n  &:not(:last-child) {\n    margin-bottom: 10px;\n  }\n  &__item {\n    display: flex;\n    justify-content: space-between;\n\n    &:first-child {\n      color: $color-text-placeholder;\n    }\n    > * {\n      flex: 1;\n      &:first-child {\n        flex: 2;\n      }\n      &:not(:first-child) {\n        text-align: right;\n      }\n    }\n  }\n}\n.total {\n  border-top: 1px solid $color-border-base;\n  &__item {\n    display: flex;\n    justify-content: space-between;\n\n    &--discount {\n      color: $color-state-danger;\n    }\n    &:not(.total__item--discount) > *:first-child {\n      color: $color-text-placeholder;\n    }\n  }\n}\n\n.buttons {\n  margin-top: 30px;\n  border-top: 1px solid $color-border-base;\n  border-bottom: 1px solid $color-border-base;\n}\n\n.info-byOrder {\n  margin-bottom: 15px;\n  margin-top: 35px;\n}\n.question-list {\n  border-bottom: 1px solid lightgrey;\n  margin-bottom: 20px;\n  padding-bottom: 20px;\n  :global {\n    .customer {\n      margin: 0 0 16px 0;\n      color: #53c2cc;\n      vertical-align: middle;\n      svg {\n        margin-right: 8px;\n        margin-left: 2px;\n        font-size: 11px;\n        vertical-align: baseline;\n      }\n    }\n    ul:last-child {\n      padding-bottom: 0;\n      margin-bottom: 0;\n    }\n  }\n  &:last-child {\n    border-bottom: none;\n    margin-bottom: 0px;\n  }\n}\n.question {\n  padding-left: 24.2px;\n  padding-bottom: 10px;\n  margin-bottom: 15px;\n  :global {\n    .title {\n      margin-bottom: 10px;\n      color: darkgray;\n    }\n  }\n}\n.payment {\n  :global {\n    li {\n      line-height: 40px;\n    }\n    .title {\n      margin-right: 20px;\n      color: darkgray;\n    }\n  }\n}\n.chat {\n  padding: 0 !important;\n  :global {\n    li {\n      margin: 0;\n      &:before {\n        height: 0 !important;\n      }\n    }\n    .title {\n      pointer-events: none;\n      font-weight: 400;\n      color: #808080;\n      letter-spacing: 2.4px;\n    }\n    .message {\n      max-width: 390px;\n      overflow: hidden;\n      padding-top: 10px;\n      min-width: 320px;\n      border: 1px solid #ebeef5;\n      margin: 20px 0 0;\n      padding: 10px;\n      cursor: pointer;\n      div {\n        line-height: 24px;\n      }\n      .name-date {\n        display: flex;\n        justify-content: inherit;\n        flex-direction: row-reverse;\n        color: #031d1d;\n        .name {\n          font-size: 14px;\n          color: black;\n          font-weight: 400;\n        }\n        .date {\n          color: #9b9b9b;\n          font-size: 12px;\n        }\n      }\n      .phone {\n        font-weight: 400;\n        letter-spacing: 1.3px;\n        color: black;\n      }\n      .text {\n        color: #333;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: inline-block;\n        white-space: nowrap;\n        width: 100%;\n      }\n      &.unread {\n        background-color: lighten($color: $color-primary, $amount: 38%);\n      }\n      &:hover {\n        background-color: rgb(247 227 196 / 0.3);\n      }\n    }\n    .view-all {\n      text-align: center;\n      color: $color-primary;\n      padding: 5px 20px;\n      letter-spacing: 2.3px;\n    }\n  }\n}\n.tabs {\n  position: sticky;\n  top: 82px;\n  background: #f2f2f2;\n  margin: 0 -30px;\n  margin-bottom: 30px;\n  z-index: 2;\n  :global {\n    .el-tabs__header {\n      margin-bottom: 0;\n      .el-tabs__nav {\n        width: 100%;\n        display: flex;\n        .el-tabs__active-bar {\n          background-color: #41695b;\n        }\n        .el-tabs__item {\n          flex: 1 1 auto;\n          padding: 0;\n          text-align: center;\n          letter-spacing: 3.2px;\n          height: 50px;\n          line-height: 50px;\n          font-size: 16px;\n        }\n      }\n    }\n  }\n}\n.tab-content {\n  :global {\n    .icon-text {\n      padding: 31px 18px;\n      background-color: transparent;\n      border: none;\n      border-bottom: 1px solid #c6c6ba;\n      width: 100%;\n      text-align: left;\n      svg {\n        font-size: 20px;\n        margin-right: 20px;\n      }\n      & + .icon-text {\n        margin: 0;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderDetail.vue?vue&type=template&id=ca5314b4&\"\nimport script from \"./OrderDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderDetail.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"OrderDetail_slide_Ig5DM\",\"slide-reverse\":\"OrderDetail_slide-reverse_Ma5RR\",\"meta\":\"OrderDetail_meta_1Crwb\",\"header\":\"OrderDetail_header_2WXNo\",\"title\":\"OrderDetail_title_2-n-L\",\"info\":\"OrderDetail_info_1It2v\",\"params\":\"OrderDetail_params_Dn2KN\",\"params__item\":\"OrderDetail_params__item_2KK1f\",\"total\":\"OrderDetail_total_3X0_J\",\"total__item\":\"OrderDetail_total__item_BlIaP\",\"total__item--discount\":\"OrderDetail_total__item--discount_2CsKK\",\"buttons\":\"OrderDetail_buttons_SKGpb\",\"info-byOrder\":\"OrderDetail_info-byOrder_2d14i\",\"question-list\":\"OrderDetail_question-list_2Idrc\",\"question\":\"OrderDetail_question_KT0VY\",\"payment\":\"OrderDetail_payment_99XFO\",\"chat\":\"OrderDetail_chat_2WBgi\",\"tabs\":\"OrderDetail_tabs_ULRa1\",\"tab-content\":\"OrderDetail_tab-content_wn00l\"};","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderDetail.vue?vue&type=style&index=0&lang=scss&module=true&\""],"sourceRoot":""}