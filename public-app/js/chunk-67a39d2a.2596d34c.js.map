{"version":3,"sources":["webpack:///./src/router/views/prepaid/components/Step3Available.vue?c36b","webpack:///./src/router/views/prepaid/components/Step3Available.vue?0fbe","webpack:///src/router/views/prepaid/components/Step3Available.vue","webpack:///./src/router/views/prepaid/components/Step3Available.vue?654c","webpack:///./src/router/views/prepaid/components/Step3Available.vue?8b2d","webpack:///./src/router/views/prepaid/components/Step3Available.vue?8020"],"names":["module","exports","slide","slide-reverse","box","services-wrap","services","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","gutter","span","class","$style","submitData","prices","_l","item","index","key","isActiveCheckBox","priceIndex","on","click","$event","selectAvaliable","_s","title","model","value","callback","$$v","$set","_n","expression","staticStyle","margin-right","slot","_e","creatAvaliable","name","placeholder","search","$hasHomeService","store","label","id","border","change","changeProductIds","productIds","visible","pricesDialogVisible","width","top","append-to-body","update:visible","label-position","min-height","margin-left","margin-top","margin-bottom","indeterminate","isIndeterminate","handleCheckAllChange","checkAll","catchPrices","price","priceGroupOrdering","cancelSelectPrices","type","saveSelectPrices","staticRenderFns","Step3Availablevue_type_script_lang_js_","components","props","products","Array","required","category","defaultValue","Object","default","data","computed","get","set","$emit","filterPrices","_this","list","filter","petCategoryId","categoryId","map","groupOrdering","maxTimes","filterProducts","_this2","console","log","length","isEditMode","created","getDefaultPrices","methods","_this3","newPrices","cloneDeep_default","havePriceIds","forEach","indexOf","push","add","find","i","checked","toConsumableArray","components_Step3Availablevue_type_script_lang_js_","injectStyles","context","Step3Availablevue_type_style_index_0_lang_scss_module_true_","locals","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Step3Available_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Step3Available_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-67a39d2a.2596d34c.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"Step3Available_slide_1qEst\",\"slide-reverse\":\"Step3Available_slide-reverse_33XRL\",\"box\":\"Step3Available_box_1Vtjw\",\"services-wrap\":\"Step3Available_services-wrap_QQv2O\",\"services\":\"Step3Available_services_2W1du\"};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h4',{staticClass:\"form-block-title\"},[_vm._v(\"適用項目\")]),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('h6',[_vm._v(\"可選服務項目(可複選)\")]),_c('div',{class:_vm.$style.box},[(_vm.submitData.prices[0].title)?_vm._l((_vm.submitData.prices),function(item,index){return _c('el-button',{key:index,staticClass:\"is-round is-fullwidth\",class:{ isActiveCheckBox: index === _vm.priceIndex },on:{\"click\":function($event){return _vm.selectAvaliable(index)}}},[_c('div',{staticClass:\"input-in-buttom\"},[_c('span',{staticClass:\"box__title\"},[_vm._v(_vm._s(item.title))]),_c('el-input',{model:{value:(item.maxTimes),callback:function ($$v) {_vm.$set(item, \"maxTimes\", _vm._n($$v))},expression:\"item.maxTimes\"}},[_c('span',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"suffix\"},slot:\"suffix\"},[_vm._v(\"次\")])])],1)])}):_vm._e(),_c('el-button',{staticClass:\"is-round is-fullwidth\",on:{\"click\":_vm.creatAvaliable}},[_c('BaseIcon',{attrs:{\"name\":\"plus\"}}),_vm._v(\" 選取適用服務\")],1)],2)]),_c('el-col',{attrs:{\"span\":12}},[_c('h6',[_vm._v(\"適用店家(可複選)\")]),_c('div',{class:_vm.$style.box},[(_vm.priceIndex !== null)?[_c('el-input',{staticClass:\"search-in-box\",attrs:{\"placeholder\":\"輸入關鍵字篩選項目\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('el-checkbox-group',{class:_vm.$style.services,model:{value:(_vm.submitData.prices[_vm.priceIndex].productIds),callback:function ($$v) {_vm.$set(_vm.submitData.prices[_vm.priceIndex], \"productIds\", $$v)},expression:\"submitData.prices[priceIndex].productIds\"}},[(_vm.$hasHomeService())?_vm._l((_vm.filterProducts),function(store,index){return _c('el-checkbox',{key:index,attrs:{\"label\":store.id,\"border\":\"\"}},[_vm._v(\"\\n                \"+_vm._s(store.name)+\"\\n              \")])}):_vm._l((_vm.filterProducts),function(store,index){return _c('el-radio',{key:index,attrs:{\"border\":\"\",\"label\":store.id},on:{\"change\":_vm.changeProductIds},model:{value:(_vm.submitData.prices[_vm.priceIndex].productIds[0]),callback:function ($$v) {_vm.$set(_vm.submitData.prices[_vm.priceIndex].productIds, 0, $$v)},expression:\"submitData.prices[priceIndex].productIds[0]\"}},[_vm._v(\"\\n                \"+_vm._s(store.name)+\"\\n              \")])})],2)]:_c('span',[_vm._v(\"請先選擇服務項目\")])],2)])],1),_c('el-dialog',{attrs:{\"title\":\"選取適用服務\",\"visible\":_vm.pricesDialogVisible,\"width\":\"80%\",\"top\":\"0\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.pricesDialogVisible=$event}}},[_c('el-form',{staticClass:\"isWrap\",attrs:{\"label-position\":\"top\"}},[_c('el-form-item',{class:_vm.$style['services-wrap'],staticStyle:{\"min-height\":\"250px\"}},[_c('el-checkbox',{staticStyle:{\"margin-left\":\"5px\",\"margin-top\":\"10px\",\"margin-bottom\":\"5px\"},attrs:{\"indeterminate\":_vm.isIndeterminate,\"border\":\"\"},on:{\"change\":_vm.handleCheckAllChange},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全 選\")]),_c('el-checkbox-group',{class:_vm.$style.services,model:{value:(_vm.catchPrices),callback:function ($$v) {_vm.catchPrices=$$v},expression:\"catchPrices\"}},_vm._l((_vm.filterPrices),function(price,index){return _c('el-checkbox',{key:index,attrs:{\"label\":price.priceGroupOrdering,\"border\":\"\"}},[_vm._v(\"\\n            \"+_vm._s(price.title)+\"\\n            \")])}),1)],1)],1),_c('div',{staticClass:\"btn-group-inline\"},[_c('el-button',{staticClass:\"is-round\",on:{\"click\":_vm.cancelSelectPrices}},[_vm._v(\"取消\")]),_c('el-button',{staticClass:\"is-round\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveSelectPrices}},[_vm._v(\"儲存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport cloneDeep from 'lodash/cloneDeep'\n\nexport default {\n  components: {},\n  props: {\n    products: {\n      type: Array,\n      required: true,\n    },\n    category: {\n      type: Array,\n      required: true,\n    },\n    prices: {\n      type: Array,\n      required: true,\n    },\n    defaultValue: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      pricesDialogVisible: false,\n      catchPrices: [],\n      checkAll: false,\n      priceIndex: null,\n      search: '',\n      // submitData: this.defaultValue,\n    }\n  },\n  computed: {\n    submitData: {\n      get() {\n        return this.defaultValue\n      },\n      set(value) {\n        this.$emit('update:defaultValue', value)\n      },\n    },\n    filterPrices() {\n      let list = this.prices.filter((item) => {\n        return item.petCategoryId === this.submitData.categoryId\n      })\n\n      list = list.map((item) => {\n        return {\n          title: item.title,\n          priceGroupOrdering: item.groupOrdering,\n          maxTimes: 1,\n          productIds: [],\n        }\n      })\n      return list\n    },\n    filterProducts() {\n      let list = []\n      if (this.search) {\n        list = this.products.filter((item) => {\n          console.log(item.name.search(this.search))\n          // return products\n          return item.name.search(this.search) !== -1\n        })\n      } else {\n        list = this.products\n      }\n      return list\n    },\n    isIndeterminate() {\n      this.checkAll = this.filterPrices.length === this.catchPrices.length\n      if (this.catchPrices.length === 0) return false\n      return this.catchPrices.length > 0 && this.catchPrices.length < this.filterPrices.length\n    },\n    isEditMode() {\n      return !!this.defaultValue.groupOrdering\n    },\n  },\n  created() {\n    if (this.isEditMode) {\n      this.getDefaultPrices()\n    }\n    // this.submitData.categoryId = 1 //\n  },\n  methods: {\n    creatAvaliable() {\n      this.pricesDialogVisible = true\n    },\n    selectAvaliable(index) {\n      this.priceIndex = index\n    },\n    getDefaultPrices() {\n      this.catchPrices = this.submitData.prices.map((item) => item.priceGroupOrdering)\n      this.priceIndex = 0\n      // this.catchPrices = this.submitData.prices.map((item) => {\n      //   return {\n      //     ...item,\n      //     maxTimes: 1,\n      //     productIds: [],\n      //   }\n      // })\n      // const list = cloneDeep(this.submitData.prices)\n      // this.catchPrices = list.map(item =>{\n      //   return{\n      //     maxTimes:1,\n\n      //   }\n      // })\n    },\n    saveSelectPrices() {\n      //  要檢查這次儲存沒有變更的項目，不更新\n      if (this.catchPrices.length === 0) {\n        this.pricesDialogVisible = false\n        return\n      }\n      const newPrices = []\n      const catchPrices = cloneDeep(this.catchPrices)\n      const havePriceIds = this.submitData.prices.map((item) => item.priceGroupOrdering)\n      catchPrices.forEach((item) => {\n        // this.submitData.prices.forEach(i=>{\n        //   if(item.priceGroupOrdering === i.priceGroupOrdering){\n        //     console.log(222)\n        //     newPrices.push(i)\n        //   }else{\n        //     console.log(444)\n        //     newPrices.push(item)\n        //   }\n        // })\n        const index = havePriceIds.indexOf(item)\n        if (index !== -1) {\n          newPrices.push(this.submitData.prices[index])\n        } else {\n          const add = this.filterPrices.find((i) => {\n            return i.priceGroupOrdering === item\n          })\n          newPrices.push(add)\n        }\n      })\n      // console.log(newPrices,catchPrices)\n      this.submitData.prices = newPrices\n      // this.submitData.prices = list.map(item =>{\n      //   return{\n      //     maxTimes:1,\n      //     priceGroupOrdering:item.priceGroupOrdering,\n      //     productIds:[],\n      //     title:item.title\n      //   }\n      // })\n      this.pricesDialogVisible = false\n      if(this.submitData.prices.length===1){\n        this.priceIndex = 0\n      }\n      \n    },\n    cancelSelectPrices() {\n      this.pricesDialogVisible = false\n    },\n    handleCheckAllChange(checked) {\n      // console.log(checked)\n      // this.catchPrices = checked ? [...this.filterPrices] : []\n      this.catchPrices = checked ? [...this.filterPrices.map((item) => item.priceGroupOrdering)] : []\n    },\n    changeProductIds(value) {\n      this.submitData.prices.forEach(item=>{\n        item.productIds=[value]\n      })\n      // console.log(value)\n    },\n  },\n}\n</script>\n\n<template>\n  <div>\n    <h4 class=\"form-block-title\">適用項目</h4>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"12\">\n        <h6>可選服務項目(可複選)</h6>\n        <div :class=\"$style.box\">\n          <template v-if=\"submitData.prices[0].title\">\n            <el-button v-for=\"(item, index) in submitData.prices\" :key=\"index\" :class=\"{ isActiveCheckBox: index === priceIndex }\" class=\"is-round is-fullwidth\" @click=\"selectAvaliable(index)\">\n              <div class=\"input-in-buttom\">\n                <span class=\"box__title\">{{ item.title }}</span>\n                <el-input v-model.number=\"item.maxTimes\"><span slot=\"suffix\" style=\"margin-right: 10px\">次</span> </el-input>\n              </div>\n            </el-button>\n          </template>\n          <el-button class=\"is-round is-fullwidth\" @click=\"creatAvaliable\"><BaseIcon name=\"plus\" /> 選取適用服務</el-button>\n        </div>\n      </el-col>\n      <el-col :span=\"12\">\n        <h6>適用店家(可複選)</h6>\n        <div :class=\"$style.box\">\n          <template v-if=\"priceIndex !== null\">\n            <el-input v-model=\"search\" placeholder=\"輸入關鍵字篩選項目\" class=\"search-in-box\"></el-input>\n            <el-checkbox-group v-model=\"submitData.prices[priceIndex].productIds\" :class=\"$style.services\">\n                \n              <template v-if=\"$hasHomeService()\">\n                <el-checkbox v-for=\"(store, index) in filterProducts\" :key=\"index\" :label=\"store.id\" border >\n                  {{ store.name }}\n                </el-checkbox>\n              </template>\n              <template v-else>\n                <el-radio v-for=\"(store, index) in filterProducts\" :key=\"index\" v-model=\"submitData.prices[priceIndex].productIds[0]\" border :label=\"store.id\" @change=\"changeProductIds\">\n                  {{ store.name }}\n                </el-radio>\n              </template>\n            </el-checkbox-group>\n          </template>\n          <span v-else>請先選擇服務項目</span>\n        </div>\n      </el-col>\n    </el-row>\n    <el-dialog title=\"選取適用服務\" :visible.sync=\"pricesDialogVisible\" width=\"80%\" top=\"0\" append-to-body>\n      <el-form label-position=\"top\" class=\"isWrap\">\n        <el-form-item style=\"min-height: 250px\" :class=\"$style['services-wrap']\">\n          <el-checkbox v-model=\"checkAll\" :indeterminate=\"isIndeterminate\" style=\"margin-left: 5px; margin-top: 10px; margin-bottom: 5px\" border @change=\"handleCheckAllChange\">全 選</el-checkbox>\n          <el-checkbox-group v-model=\"catchPrices\" :class=\"$style.services\">\n            <el-checkbox v-for=\"(price, index) in filterPrices\" :key=\"index\" :label=\"price.priceGroupOrdering\" border>\n              {{ price.title }}\n              <!-- <div class=\"content\">\n              <span v-if=\"service.state === 0\" class=\"side-icon\">已下架</span>\n              <span class=\"title\" style=\"font-size: 15px\">{{ service.title }}</span>\n              <span class=\"meta\">\n                <span style=\"font-size: 14px; margin-right: 10px\">{{ service.location }}</span>\n                <span>{{ service.categoryTitle }}</span>\n              </span>\n            </div> -->\n            </el-checkbox>\n          </el-checkbox-group>\n        </el-form-item>\n      </el-form>\n\n      <div class=\"btn-group-inline\">\n        <el-button class=\"is-round\" @click=\"cancelSelectPrices\">取消</el-button>\n        <el-button class=\"is-round\" type=\"primary\" @click=\"saveSelectPrices\">儲存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<style lang=\"scss\" module>\n:global{\n  .isWrap{\n    .el-checkbox-group{\n      display: flex;\n      flex-wrap: wrap;\n    }\n    .el-checkbox.is-bordered {\n      background-color: #fff;\n      .el-checkbox__label{\n        white-space: normal;\n      }\n    }\n  }\n}\n.box {\n  background-color: #f9f9f9;\n  // border: $color-border-base 1px solid;\n  padding: 15px;\n  border-radius: 6px;\n  :global {\n    .box{\n      &__title{\n        white-space: normal;\n        text-align: left;\n        line-height: 1.4;\n        max-width: calc(100% - 100px);\n      }\n    }\n    .el-checkbox-group{\n      display: flex;\n      flex-wrap: wrap;\n    }\n    .el-checkbox.is-bordered {\n      background-color: #fff;\n      .el-checkbox__label{\n        white-space: normal;\n      }\n    }\n    .search-in-box {\n      .el-input__inner {\n        background-color: #fff;\n        margin-left: 5px;\n        margin-right: 5px;\n        margin-bottom: 10px;\n      }\n    }\n    .input-in-buttom {\n      display: flex;\n      width: 100%;\n      justify-content: space-between;\n      align-items: center;\n    }\n    .el-form-item {\n      margin-bottom: 15px;\n    }\n    .el-button {\n      .el-input {\n        width: 100px;\n      }\n      .el-input__inner {\n        background-color: #fff;\n        border-color: $color-border-base;\n        height: 30px;\n        &:focus {\n          // border-color: $color-primary;\n        }\n      }\n      .el-input__suffix {\n        top: 7px;\n      }\n    }\n\n    .inline-section {\n      display: flex;\n      margin-bottom: 15px;\n    }\n    .el-button.is-no-border {\n      border: 0;\n    }\n  }\n}\n.services-wrap {\n  margin: 0 -5px 30px;\n}\n.services {\n  :global {\n    label.el-checkbox.is-bordered {\n      width: calc(50% - 10px);\n      display: inline-flex;\n      margin: 5px;\n      align-items: center;\n      height: auto;\n      padding: 15px 20px 15px 15px;\n\n      @include max-sm {\n        width: 100%;\n      }\n\n      .el-checkbox__inner {\n        border-radius: 10px;\n        width: 18px;\n        height: 18px;\n        &:after {\n          left: 5px;\n          top: 2px;\n          height: 8px;\n          width: 4px;\n          border-width: 2px;\n        }\n      }\n      .el-checkbox__label {\n        padding-left: 15px;\n        width: 100%;\n      }\n      & + .el-checkbox.is-bordered {\n        margin-left: 5px;\n      }\n\n      .title,\n      .meta {\n        width: calc(100% - 20px);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: block;\n      }\n\n      .content {\n        width: 100%;\n      }\n    }\n     label.el-radio.is-bordered {\n      width: calc(50% - 10px);\n      display: inline-flex;\n      margin: 5px;\n      align-items: center;\n      height: auto;\n      padding: 15px 20px 15px 15px;\n      background: #fff;\n\n      @include max-sm {\n        width: 100%;\n      }\n\n      // .el-radio__inner {\n      //   border-radius: 10px;\n      //   width: 18px;\n      //   height: 18px;\n      //   &:after {\n      //     left: 5px;\n      //     top: 2px;\n      //     height: 8px;\n      //     width: 4px;\n      //     border-width: 2px;\n      //   }\n      // }\n      .el-radio__label {\n        padding-left: 15px;\n        width: 100%;\n        \n      }\n      & + .el-radio.is-bordered {\n        margin-left: 5px;\n      }\n\n      .title,\n      .meta {\n        width: calc(100% - 20px);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: block;\n      }\n\n      .content {\n        width: 100%;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Step3Available.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Step3Available.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Step3Available.vue?vue&type=template&id=34ce9ec2&\"\nimport script from \"./Step3Available.vue?vue&type=script&lang=js&\"\nexport * from \"./Step3Available.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Step3Available.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Step3Available.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Step3Available.vue?vue&type=style&index=0&lang=scss&module=true&\""],"sourceRoot":""}