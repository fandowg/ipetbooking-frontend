(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-848b58ec","chunk-177d8412","chunk-177d8412","chunk-177d8412"],{5285:function(t,e,i){"use strict";var s=i("d7466"),a=i.n(s);e["default"]=a.a},5602:function(t,e,i){t.exports={slide:"BaseButtonDialog_slide_1oaPh","slide-reverse":"BaseButtonDialog_slide-reverse_2oPsW",floating:"BaseButtonDialog_floating_1ftAD","floating--active":"BaseButtonDialog_floating--active_3j2JZ",floating__order2:"BaseButtonDialog_floating__order2_1fFr3",floating__wrapper:"BaseButtonDialog_floating__wrapper_2aAl-"}},"62d4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.floating?i("div",{class:t.$style["floating__wrapper"]},[t.onlyDialog?t._e():[i("el-tooltip",{attrs:{effect:"dark",content:t.tooltipText,placement:"left"}},[i("el-button",t._b({class:t.floatingClass,attrs:{type:t.buttonType,circle:t.floating},on:{click:t.manualOpen}},"el-button",t.$attrs,!1),[i("BaseIcon",{attrs:{name:t.buttonIconName}}),t._t("trigger")],2)],1)],t.onlyButton?t._e():i("el-dialog",t._b({attrs:{visible:t.dialogVisible,title:t.title,top:"0",width:t.width,"append-to-body":"","destroy-on-close":t.destroy},on:{close:t.handleClose,opened:t.dialogOpened}},"el-dialog",t.dialogProps,!1),[t._t("default")],2)],2):i("span",[t.onlyDialog?t._e():[i("el-button",t._b({attrs:{type:t.buttonType},on:{click:t.manualOpen}},"el-button",t.$attrs,!1),[i("BaseIcon",{attrs:{name:t.buttonIconName}}),t._t("trigger")],2)],t.onlyButton?t._e():i("el-dialog",t._b({attrs:{visible:t.dialogVisible,title:t.title,top:"0",width:t.width,"append-to-body":"","destroy-on-close":t.destroy},on:{close:t.handleClose,opened:t.dialogOpened}},"el-dialog",t.dialogProps,!1),[t._t("default")],2)],2)},a=[],n=i("88d8"),l={inheritAttrs:!1,props:{floating:{type:Boolean,default:!1},title:{type:String,default:""},dialogVisible:{type:Boolean,default:!1},dialogProps:{type:Object,default:function(){}},buttonTooltip:{type:String,default:""},buttonType:{type:String,default:"primary"},buttonIconName:{type:String,default:"plus"},order:{type:String,default:"1"},onlyDialog:{type:Boolean,default:!1},onlyButton:{type:Boolean,default:!1},destroy:{type:Boolean,default:!1},width:{type:String,default:"830px"}},computed:{floatingClass:function(){return[this.$style.floating,Object(n["a"])({},this.$style["floating--active"],"plus"===this.buttonIconName&&this.dialogVisible),this.$style["floating__order".concat(this.order)]]},tooltipText:function(){return this.buttonTooltip?this.buttonTooltip:this.title}},methods:{manualOpen:function(){this.onlyButton||this.$emit("update:dialogVisible",!0),this.$emit("opened")},dialogOpened:function(){this.onlyButton||this.$emit("update:dialogVisible",!0),this.$emit("dialog-opened")},handleClose:function(){this.onlyButton||this.$emit("update:dialogVisible",!1),this.$emit("closed")}}},o=l,r=i("be7b"),c=i("2877");function d(t){this["$style"]=r["default"].locals||r["default"]}var u=Object(c["a"])(o,s,a,!1,d,null,null);e["default"]=u.exports},"7b53":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Layout",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.tryingFetchDetail,expression:"tryingFetchDetail",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"取得人員資訊中"}},[t.visibleDetail||t.visibleEdit?t._e():i("div",[i("div",{staticClass:"btn-top-box p-0 mb-4",staticStyle:{background:"transparent"}},[i("span",[i("el-button",{staticClass:"is-round",attrs:{type:"primary"},on:{click:function(e){return t.openEdit("add")}}},[i("BaseIcon",{attrs:{name:"plus"}}),i("span",[t._v("新增")])],1)],1),i("span",[i("el-button",{staticClass:"is-round",on:{click:t.openSelectUser}},[i("BaseIcon",{attrs:{name:"user-plus"}}),i("span",[t._v("從管理人員新增")])],1)],1)]),i("div",{class:[t.$style["item__list"],t.$style["item__list--last-"+t.staffs.length%5]]},t._l(t.staffs,function(e){return i("ListItem",{key:e.id,class:t.$style.item,attrs:{data:e},on:{view:function(e){t.tryToFetchDetail(e.id)},edit:function(e){t.openEdit("edit",e)}}})}),1),i("el-dialog",{attrs:{title:"從管理人員新增",visible:t.selectUserVisible,top:"0",width:"450px","append-to-body":""},on:{"update:visible":function(e){t.selectUserVisible=e}}},[t.userList.length>0?[i("p",{staticStyle:{"margin-top":"0","margin-bottom":"25px"}},[t._v("請從下方選取您欲新增的排班人員")]),i("div",{staticClass:"el-radio-wrapper"},[i("div",{staticClass:"el-radio-wrapper__title"},[i("span",[t._v("管理人員")]),i("span",[t._v("帳號狀態")])]),i("el-radio-group",{directives:[{name:"loading",rawName:"v-loading",value:t.tryingGetUser,expression:"tryingGetUser"}],staticClass:"vertical-radio",model:{value:t.selectUser,callback:function(e){t.selectUser=e},expression:"selectUser"}},t._l(t.userList,function(e){return i("el-radio",{key:e.id,attrs:{border:"",label:e}},[t._v("\n                "+t._s(e.firstName)+"\n                "),i("span",{staticClass:"select__option--meta"},[i("span",{style:"color: "+(e.block?"#e35d5d":"#60a32f")},[t._v(t._s(e.block?"停權中":"啟用中"))])])])}),1)],1)]:i("el-alert",{attrs:{title:"目前沒有可以新增的帳號",type:"warning",closable:!1}}),i("div",{staticClass:"bottom-btn-center"},[i("el-button",{staticClass:"is-round",on:{click:function(e){t.selectUserVisible=!1}}},[t._v("取消")]),i("el-button",{staticClass:"is-round",attrs:{type:"primary",disabled:!t.selectUser.id},on:{click:t.sendLinkUser}},[t._v("確認")])],1)],2)],1),t.visibleDetail&&!t.visibleEdit?i("ScheduleStaffDetail",{attrs:{"default-value":t.staffDetail},on:{"update:defaultValue":function(e){t.staffDetail=e},"update:default-value":function(e){t.staffDetail=e},back:t.backTolist}}):t._e(),t.visibleEdit?i("StaffForm",{attrs:{"default-value":t.dialogItem,"account-id":t.accountId},on:{store:t.updateList,close:t.closeEdit}}):t._e()],1)},a=[],n=i("4795"),l=i.n(n),o=i("cb0c"),r=i("a315"),c=i("444f"),d=i("62d4"),u=i("6bea"),f=function(){return{block:0,canBlock:1,email:"",firstName:"",groupIds:[],id:"",lastName:""}},p={page:{title:"排班人員",meta:[{name:"description",content:"Staff List"}]},components:{Layout:c["a"],ListItem:function(){return Object(r["a"])(i.e("chunk-4deaa738").then(i.bind(null,"144d")))},BaseButtonDialog:d["default"],StaffForm:function(){return Object(r["a"])(i.e("chunk-a0f32da0").then(i.bind(null,"b062")))},ScheduleStaffDetail:function(){return Object(r["a"])(i.e("chunk-7338d540").then(i.bind(null,"eba9")))}},data:function(){return{staffs:[],dialogVisible:!1,dialogItem:{},dialogMode:"edit",visibleDetail:!1,staffDetail:{},tryingFetchDetail:!1,visibleEdit:!1,selectUserVisible:!1,tryingGetUser:!1,selectUser:f(),addUserToStaffData:{},userList:[],accountId:0}},computed:{dialogTitle:function(){var t={add:"創建人員",edit:"編輯人員",view:"項目人員"};return t[this.dialogMode]}},watch:{selectUserVisible:function(t){t||(this.selectUser=f())}},created:function(){this.tryToFetchList()},methods:{tryToFetchList:function(){var t=Object(o["a"])(l.a.mark(function t(){return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("schedule/fetchStaff");case 2:this.staffs=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),tryToFetchDetail:function(){var t=Object(o["a"])(l.a.mark(function t(e){return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tryingFetchDetail=!0,t.next=3,this.$store.dispatch("schedule/fetchStaffDetail",{id:e,page:1,limit:10,date:Object(u["a"])(new Date,"YYYY-MM")});case 3:this.staffDetail=t.sent,this.visibleDetail=!0,this.tryingFetchDetail=!1;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateList:function(){this.tryToFetchList(),this.closeEdit()},openDialog:function(t,e){this.dialogVisible=!0,this.dialogMode=t,this.$set(this.$data,"dialogItem",e)},openEdit:function(){var t=Object(o["a"])(l.a.mark(function t(e,i){var s;return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.accountId=0,s="add"===e?"創建人員":"編輯人員",this.$store.commit("title/SET_TITLE",s),this.dialogMode=e,"add"!==e){t.next=9;break}this.$set(this.$data,"dialogItem",i),this.visibleEdit=!0,t.next=14;break;case 9:return t.next=11,this.tryToFetchDetail(i.id);case 11:this.visibleEdit=!0,this.visibleDetail=!1,this.$set(this.$data,"dialogItem",this.staffDetail);case 14:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),closeEdit:function(){this.visibleEdit=!1,this.$store.commit("title/SET_TITLE","")},openSelectUser:function(){this.tryToSearchUser(),this.selectUserVisible=!0},tryToSearchUser:function(){var t=Object(o["a"])(l.a.mark(function t(){return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.tryingGetUser=!0,t.next=3,this.$store.dispatch("merchant/fetchUsersForStaff",{onlyConnectableUser:1});case 3:this.userList=t.sent,this.tryingGetUser=!1;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),sendLinkUser:function(){var t=Object(o["a"])(l.a.mark(function t(){return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$store.commit("title/SET_TITLE","新增人員"),this.dialogMode="add",this.staffDetail={name:this.selectUser.firstName,email:this.selectUser.email,userGroupIds:this.selectUser.groupIds},this.accountId=this.selectUser.id,this.selectUserVisible=!1,this.visibleEdit=!0,this.visibleDetail=!1,this.$set(this.$data,"dialogItem",this.staffDetail);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),backTolist:function(){this.visibleDetail=!1,this.tryToFetchList()}}},h=p,b=i("5285"),_=i("2877");function g(t){this["$style"]=b["default"].locals||b["default"]}var m=Object(_["a"])(h,s,a,!1,g,null,null);e["default"]=m.exports},be7b:function(t,e,i){"use strict";var s=i("5602"),a=i.n(s);e["default"]=a.a},d7466:function(t,e,i){t.exports={slide:"list_slide_2tLXm","slide-reverse":"list_slide-reverse_1NKGX",item:"list_item_1SJM7",item__list:"list_item__list_1RCSG","item__list--last-2":"list_item__list--last-2_3ojJ_","item__list--last-3":"list_item__list--last-3_1uhb8","item__list--last-4":"list_item__list--last-4_Q1Jdj"}}}]);
//# sourceMappingURL=chunk-848b58ec.76f719a2.js.map