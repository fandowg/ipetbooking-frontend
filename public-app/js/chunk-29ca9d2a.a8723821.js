(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29ca9d2a"],{"3fa5":function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var a=n("5c96");function r(t){"add"===t&&Object(a["Message"])({message:"已新增",type:"success"}),"edit"===t&&Object(a["Message"])({message:"已儲存",type:"success"})}function i(){Object(a["Message"])({message:"已刪除",type:"success"})}},"755f":function(t,e,n){"use strict";var a=n("ae7d"),r=n.n(a);e["default"]=r.a},ae7d:function(t,e,n){t.exports={slide:"add_slide_2SIJ7","slide-reverse":"add_slide-reverse_4ejMR",page:"add_page_38tQm","card-wrapper":"add_card-wrapper_1a39v",footer:"add_footer_1cU1o"}},df73:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var a=n("5c96");function r(t){return a["MessageBox"].confirm("尚未完成新增，請問是否確定離開新增".concat(t),"您將離開此頁面",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}function i(t){return a["MessageBox"].confirm("您確定要刪除".concat(t,"嗎？"),"確認刪除",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}},ea40:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",[n("BaseSteps",{attrs:{active:t.activeStep,list:t.stepList}}),n("el-card",{class:t.$style["card-wrapper"]},[n("keep-alive",[n(t.stepList[t.activeStep-1].component,{ref:"step",tag:"component",attrs:{"default-value":t.submitData,products:t.products,category:t.category,prices:t.prices},on:{"update:defaultValue":function(e){t.submitData=e},"update:default-value":function(e){t.submitData=e}}})],1)],1),n("div",{class:t.$style.footer},[n("el-button",{staticClass:"is-round",attrs:{"data-tour-text":"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。"},on:{click:t.onClickLeave}},[t._v("離開")]),1!==t.activeStep?n("el-button",{staticClass:"is-round",attrs:{"data-tour-text":"若不想新增此活動，請按「離開」跳出。注意：我們將不會保留此步驟填寫的資料。"},on:{click:t.goBack}},[t._v("上一步")]):t._e(),n("el-button",{staticClass:"is-round",attrs:{"data-tour-text":"若欄位皆已填寫完成，點擊「下一步」儲存此步驟填寫的資料，前往下一步",type:"primary",loading:t.tryingNextStep},on:{click:function(e){return t.onClickNextStep(t.activeStep)}}},[t._v(t._s(4!==t.activeStep?"下一步":"儲存"))])],1)],1)},r=[],i=n("4795"),s=n.n(i),c=n("9395"),u=n("cb0c"),o=n("444f"),p=n("3fa5"),d=n("df73"),l=function(){return{groupOrdering:0,groupAlias:"",title:"",categoryId:"",times:1,infinity:0,inventory:100,expireDays:90,slogan:"",description:"",notice:"",images:[],usageRules:[],prices:[{maxTimes:5,priceGroupOrdering:null,productIds:[]}],prepaids:[{sizeId:null,basePrice:0,price:0,state:0}]}},f={page:{title:"新增包月方案",meta:[{name:"description",content:"Add Prepaid"}]},components:{Layout:o["a"],BaseSteps:function(){return n.e("chunk-b75e1fe6").then(n.bind(null,"f49e"))}},props:{products:{type:Array,required:!0},category:{type:Array,required:!0},prices:{type:Array,required:!0}},data:function(){return{activeStep:1,stepList:Object.freeze([{title:"基本資訊",description:"請填寫下方欄位",component:function(){return n.e("chunk-7acdfb4f").then(n.bind(null,"6e31"))}},{title:"限制設定",description:"請選取可抵扣的購買方案",component:function(){return n.e("chunk-2d1d9647").then(n.bind(null,"dd5d"))}},{title:"適用設定",description:"請填寫下方欄位",component:function(){return Promise.all([n.e("chunk-f55c2908"),n.e("chunk-67a39d2a")]).then(n.bind(null,"80d9"))}},{title:"價格設定",description:"請選取可抵扣的購買方案",component:function(){return n.e("chunk-8b9823b0").then(n.bind(null,"31d7"))}}]),tryingNextStep:!1,nextStepButtonVisible:!1,submitData:Object.assign({},l())}},computed:{pagination:function(){return this.$route.params.pagination},filterData:function(){return this.$route.params.filterData}},created:function(){},methods:{onClickNextStep:function(){var t=Object(u["a"])(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.tryingNextStep=!0,t.prev=1,t.t0=e,t.next=1===t.t0?5:2===t.t0?10:3===t.t0?15:4===t.t0?30:38;break;case 5:return t.next=7,this.$refs.step.validate();case 7:return this.activeStep++,this.tryingNextStep=!1,t.abrupt("break",38);case 10:return t.next=12,this.$refs.step.validate();case 12:return this.activeStep++,this.tryingNextStep=!1,t.abrupt("break",38);case 15:if(0!==this.submitData.prices[0].productIds.length){t.next=22;break}return t.next=18,this.$confirm("請至少選擇一個服務項目，並設定適用店家","提示",{confirmButtonText:"確定",showCancelButton:!1,type:"warning",center:!0});case 18:return this.tryingNextStep=!1,t.abrupt("return");case 22:if(!this.submitData.prices.some(function(t){return 0===t.productIds.length})){t.next=27;break}return t.next=25,this.$confirm("有適用項目尚無選擇適用店家","提示",{confirmButtonText:"確定",showCancelButton:!1,type:"warning",center:!0});case 25:return this.tryingNextStep=!1,t.abrupt("return");case 27:return this.activeStep++,this.tryingNextStep=!1,t.abrupt("break",38);case 30:return t.next=32,this.$refs.step.validate();case 32:return this.submitData=Object(c["a"])({},this.submitData,{images:this.submitData.images.map(function(t,e){return Object(c["a"])({},t,{default:0===e?1:0})})}),t.next=35,this.$store.dispatch("prepaid/storeGroup",this.submitData);case 35:return Object(p["b"])("add"),this.$router.push({name:"prepaid",params:{pagination:this.pagination,filterData:this.filterData}}),t.abrupt("break",38);case 38:t.next=43;break;case 40:t.prev=40,t.t1=t["catch"](1),this.tryingNextStep=!1;case 43:case"end":return t.stop()}},t,this,[[1,40]])}));return function(e){return t.apply(this,arguments)}}(),goBack:function(){this.activeStep--},onClickLeave:function(){var t=Object(u["a"])(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d["b"])("包月方案");case 3:this.$router.push({name:"prepaid",params:{pagination:this.pagination,filterData:this.filterData}}),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:return t.prev=8,t.finish(8);case 10:case"end":return t.stop()}},t,this,[[0,6,8,10]])}));return function(){return t.apply(this,arguments)}}()}},h=f,b=n("755f"),m=n("2877");function g(t){this["$style"]=b["default"].locals||b["default"]}var v=Object(m["a"])(h,a,r,!1,g,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-29ca9d2a.a8723821.js.map