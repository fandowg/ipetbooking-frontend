(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c19219c"],{"136d":function(t,e,a){"use strict";var n=a("d59c"),i=a.n(n);e["default"]=i.a},d59c:function(t,e,a){t.exports={slide:"ListItem_slide_qYgUz","slide-reverse":"ListItem_slide-reverse_UGhUl",title:"ListItem_title_2-HEU",label:"ListItem_label_hihKD",container:"ListItem_container_2u-XA","container--active":"ListItem_container--active_3Z0kK",image:"ListItem_image_j4Bh2",buttons:"ListItem_buttons_oDzQL"}},f93b:function(t,e,a){"use strict";a.r(e);var n=function(){var t,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{class:[e.$style.container,(t={},t[e.$style["container--active"]]=e.dialogVisible,t)],on:{click:function(t){return e.onClickButton("edit")}}},[n("el-image",{staticClass:"image-default",attrs:{src:e.data.image,fit:"cover"}},[n("div",{staticClass:"image--error",attrs:{slot:"error"},slot:"error"},[n("BaseIcon",{attrs:{name:"image"}})],1)]),n("div",{class:e.$style.title},[n("h5",[e._v(e._s(e.data.name))])]),n("BaseStateLabel",{class:e.$style.label,attrs:{state:e._f("productStateFilter")(e.data.state,"color")}},[e._v(e._s(e._f("productStateFilter")(e.data.state,"text")))]),n("div",{class:e.$style.buttons},e._l(e.buttons,function(t,a){var i=t.icon,o=t.label,c=t.actionName;return n("BaseButton",{directives:[{name:"can",rawName:"v-can:api",value:c,expression:"actionName",arg:"api"}],key:a,attrs:{icon:i},on:{click:function(t){return t.stopPropagation(),e.onClickButton(a)}}},[e._v(e._s(o))])}),1),n("el-dialog",{attrs:{title:e.data.name,visible:e.dialogVisible,top:"0",width:"300px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{class:e.$style.buttons},e._l(e.buttons,function(t,a){var i=t.icon,o=t.label,c=t.actionName;return n("BaseButton",{directives:[{name:"can",rawName:"v-can:api",value:c,expression:"actionName",arg:"api"}],key:a,attrs:{icon:i},on:{click:function(t){return e.onClickButton(a)}}},[e._v(e._s(o))])}),1)]),n("el-dialog",{attrs:{title:e.$t("PRODUCT."+e.data.type+".NAME")+"行事曆",visible:e.dialogCalendarVisible,"append-to-body":!0,top:"0",width:"680px"},on:{"update:visible":function(t){e.dialogCalendarVisible=t}}},[n("el-input",{ref:"CalendarUrlInput",attrs:{value:e.productCalendarURL,readonly:!0}},[n("el-button",{attrs:{slot:"append"},on:{click:e.copyCalendarUrl},slot:"append"},[e._v("複製此網址")])],1),n("p",{staticStyle:{"margin-top":"50px"}},[e._v("行事曆設定教學")]),n("div",{staticStyle:{"margin-bottom":"15px"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.openExternal("https://support.apple.com/zh-tw/guide/iphone/iph3d1110d4/ios")}}},[e._v("設定於 Apple 行事曆")])],1),n("div",[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.openExternal("https://support.google.com/calendar/answer/37100?co=GENIE.Platform%3DDesktop&hl=zh-Hant")}}},[e._v("設定於 Google 行事曆")])],1)],1)],1)},i=[],o=a("9395"),c=a("a315"),s=a("ed08"),r=a("4d77"),d=a("7e02"),l=function(t){return{add:{page:"add",icon:"edit",label:"繼續新增步驟",actionName:"editProduct"},edit:{page:"edit",icon:"edit",label:"編輯".concat(t),actionName:"editProduct"},on:{function:"updateState",icon:"eye",label:"上架".concat(t),actionName:"updateProductState"},off:{function:"updateState",icon:"eye-slash",label:"下架".concat(t),actionName:"updateProductState"},orders:{page:"orders",icon:"clipboard-list",label:"查看訂單",actionName:"searchOrder"}}},u={components:{BaseButton:function(){return Object(c["a"])(a.e("chunk-3016093c").then(a.bind(null,"82ea")))},BaseStateLabel:function(){return Object(c["a"])(a.e("chunk-12bed50d").then(a.bind(null,"38d1")))}},filters:{productStateFilter:d["w"]},props:{data:{type:Object,required:!0}},data:function(){return{dialogVisible:!1,dialogCalendarVisible:!1}},mounted:function(){this.$emit("ready",this.data.id)},computed:Object(o["a"])({},r["b"],{buttons:function(){var t=d["x"][this.data.state].buttons;return Object(s["c"])(l(this.$t("PRODUCT.".concat(this.data.type,".NAME"))),t)},enabledDeleteButton:function(){return 0===this.data.activeOrders},productCalendarURL:function(){return"".concat(window.location.origin,"/api/").concat(this.currentUser.merchantAlias,"/").concat(this.currentUser.merchantId,"/product/").concat(this.data.alias,"/ical")}}),methods:{emitUpdated:function(){this.$emit("updated"),this.dialogVisible=!1},handleUpdateState:function(t){var e=this,a={ids:[this.data.id],state:"off"===t?0:1},n={0:{message:this.$t("PRODUCT.STATE_OFF_CONFIRM_MESSAGE",{name:this.$t("PRODUCT.".concat(this.data.type,".NAME"))}),confirmText:"立即下架"},1:{message:this.$t("PRODUCT.STATE_ON_CONFIRM_MESSAGE",{name:this.$t("PRODUCT.".concat(this.data.type,".NAME"))}),confirmText:"上架分店"}},i=n[a.state];this.$confirm(i.message,"提示",{confirmButtonText:i.confirmText,cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.$store.dispatch("product/updateState",a).then(function(){e.emitUpdated()})})},handleRemove:function(){var t=this;this.$confirm(this.$t("PRODUCT.DELETE_CONFIRM_MESSAGE",{name:this.$t("PRODUCT.".concat(this.data.type,".NAME"))}),"提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.$store.dispatch("product/remove",{ids:[t.data.id]}).then(function(){t.emitUpdated()})})},handleToPage:function(t){var e={add:{name:"add-product",params:{productId:this.data.id},query:{type:this.data.type}},edit:{name:"edit-product",params:{productId:this.data.id}},orders:{name:"orders",query:{productId:this.data.id}}};this.$router.push(e[t])},onClickButton:function(t){switch(t){case"on":case"off":this.handleUpdateState(t);break;case"calendarUrl":this.dialogCalendarVisible=!0;break;default:this.handleToPage(t);break}},copyCalendarUrl:function(){this.$refs.CalendarUrlInput.select(),document.execCommand("copy"),this.$message("連結複製成功")},openExternal:function(t){window.open(t,"_blank")}}},p=u,h=a("136d"),m=a("2877");function f(t){this["$style"]=h["default"].locals||h["default"]}var b=Object(m["a"])(p,n,i,!1,f,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-3c19219c.e25191c4.js.map