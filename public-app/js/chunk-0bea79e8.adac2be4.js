(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bea79e8"],{"4f38":function(t,e,a){t.exports={slide:"TabInfo_slide_LEIfZ","slide-reverse":"TabInfo_slide-reverse_2_jnY",page:"TabInfo_page_1pL6F","card-wrapper":"TabInfo_card-wrapper_3uMz6",footer:"TabInfo_footer_3yxOA",header:"TabInfo_header_2bNlz",header__title:"TabInfo_header__title_2wRP0",switcher:"TabInfo_switcher_18ur0","form-item--split":"TabInfo_form-item--split_39iJr","form-item--separator":"TabInfo_form-item--separator_3ppy8","price-qty":"TabInfo_price-qty_1K77t"}},"67f4":function(t,e,a){"use strict";var r=a("4f38"),i=a.n(r);e["default"]=i.a},6924:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.$style.content},[a("el-form",{ref:"form",staticClass:"el-form--floating",attrs:{model:t.submitData,rules:t.submitRules,"label-position":"top"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{sm:12,span:24}},[a("el-form-item",{attrs:{label:"名稱",prop:"title","data-tour-step":"1","data-tour-text":"給此方案一個名稱，讓客戶可以了解不同方案的差異性。"}},[a("el-input",{model:{value:t.submitData.title,callback:function(e){t.$set(t.submitData,"title",e)},expression:"submitData.title"}})],1)],1),a("el-col",{attrs:{sm:12,span:24}},[a("el-form-item",{attrs:{label:"寵物類別"}},[a("el-select",{attrs:{disabled:!!t.isEditMode},on:{change:t.onChangeCategory},model:{value:t.parentCategoryId,callback:function(e){t.parentCategoryId=e},expression:"parentCategoryId"}},t._l(t.currentCategory,function(t,e){return a("el-option",{key:"category-"+e,attrs:{label:t.title,value:t.id}})}),1)],1)],1),t.isService?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"服務網址別名",prop:"alias"}},[a("el-input",{attrs:{placeholder:"請使用英文字母與數字組合"},model:{value:t.submitData.alias,callback:function(e){t.$set(t.submitData,"alias",e)},expression:"submitData.alias"}})],1)],1):t._e(),t.isService?a("el-col",{staticStyle:{"margin-bottom":"20px","font-size":"12px",color:"darkgray"},attrs:{span:24}},[t._v("\n        服務項目網址範例："+t._s(""+t.serviceBaseUrl)+"\n      ")]):t._e(),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"項目描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.submitData.description,callback:function(e){t.$set(t.submitData,"description",e)},expression:"submitData.description"}})],1)],1),t.isService?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"預約內容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.submitData.content,callback:function(e){t.$set(t.submitData,"content",e)},expression:"submitData.content"}})],1)],1):t._e(),t.isService?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"注意事項",prop:"notice"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.submitData.notice,callback:function(e){t.$set(t.submitData,"notice",e)},expression:"submitData.notice"}})],1)],1):t._e()],1)],1)],1)},i=[],n=a("4795"),s=a.n(n),o=a("cb0c"),c=a("f210"),u=a("9395"),l=(a("a315"),a("4d77")),p={components:{},props:{products:{type:Array,required:!0},category:{type:Array,required:!0},categoryIndex:{type:Number,default:0},categoryId:{type:Number,default:0},defaultValue:{type:Object,default:function(){}}},data:function(){return{canSetPrice:!1,pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},tryingToStore:!1,tryingToRemove:!1}},computed:Object(u["a"])({},l["g"],l["b"],{submitData:{get:function(){return this.defaultValue},set:function(t){this.$emit("update:defaultValue",t)}},parentCategoryIndex:{get:function(){return this.categoryIndex},set:function(t){this.$emit("update:categoryIndex",t)}},parentCategoryId:{get:function(){return this.categoryId},set:function(t){this.$emit("update:categoryId",t)}},productBaseBookingUrl:function(){var t="";if("local"===window.globalData.APP_ENV)t=this.merchantUrl;else{var e=this.merchantUrl.split("//",2);t="".concat(e[0],"//").concat(this.currentMerchant.alias,".").concat(e[1])}return t},serviceBaseUrl:function(){return this.$hasHomeService()?"".concat(this.productBaseBookingUrl,"/store/分店別名/reservation/服務網址別名＋系統產生數字"):"".concat(this.productBaseBookingUrl,"/reservation/服務網址別名＋系統產生數字")},submitRules:function(){return{alias:[{required:!0,message:"請填寫別名",trigger:"blur"},{pattern:/^[a-zA-Z0-9-]+$/,message:"請使用英文大小寫字母、數字或英文半形連字號組合",trigger:"blur"}],title:[{required:!0,message:"請填寫服務名稱",trigger:"blur"}],description:[{required:!0,message:"請填寫服務內容",trigger:"blur"}]}},availableAmount:function(){var t=this.submitData.inventory-this.defaultValue.qty;return t<0?0:t},isEditMode:function(){return this.defaultValue.groupOrdering},introtextOption:function(){var t=this,e=[];return this.category.forEach(function(a){t.submitData.categoryIds===a.id&&e.push.apply(e,Object(c["a"])(a.params))}),e},currentProductAlias:function(){var t=this,e="";return this.products.some(function(a){return a.id===t.submitData.productId&&(e=a.alias)}),e},isService:function(){return"addition"!==this.$route.params.type},currentCategory:function(){return this.category.filter(function(t){return t.children.length>0})}}),watch:{parentCategoryId:function(){this.getParentCategoryIndex()}},created:function(){this.checkCanSetPrice(),this.getParentCategoryIndex(),this.isEditMode||(this.parentCategoryId=this.category[0].id)},methods:{checkCanSetPrice:function(){var t=Object(o["a"])(s.a.mark(function t(){var e,a;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$can("api","setPrice")){t.next=8;break}if(e=this.currentMerchant,""!==e&&1===e.cashflowSetting){t.next=8;break}return t.next=5,this.$store.dispatch("merchant/fetchSingle");case 5:return a=t.sent,this.canSetPrice=1===a.cashflowSetting,t.abrupt("return");case 8:this.canSetPrice=this.$can("api","setPrice");case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onChangeCategory:function(){this.$nextTick(function(){this.submitData.categoryIds=[]})},getParentCategoryIndex:function(){var t=this;this.category.forEach(function(e,a){t.parentCategoryId===e.id&&(t.parentCategoryIndex=a)})},validate:function(){return this.$refs.form.validate()}}},d=p,f=a("67f4"),m=a("2877");function h(t){this["$style"]=f["default"].locals||f["default"]}var b=Object(m["a"])(d,r,i,!1,h,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-0bea79e8.adac2be4.js.map