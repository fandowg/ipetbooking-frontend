(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-616ee468"],{"0b06":function(e,t,n){"use strict";var a=n("255e"),r=n.n(a);t["default"]=r.a},"255e":function(e,t,n){e.exports={slide:"DetailEdit_slide_c8wWY","slide-reverse":"DetailEdit_slide-reverse_3bui6",page:"DetailEdit_page_1aUkP","card-wrapper":"DetailEdit_card-wrapper_2deBl",footer:"DetailEdit_footer_fGoQR"}},"3fa5":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var a=n("5c96");function r(e){"add"===e&&Object(a["Message"])({message:"已新增",type:"success"}),"edit"===e&&Object(a["Message"])({message:"已儲存",type:"success"})}function i(){Object(a["Message"])({message:"已刪除",type:"success"})}},b5fb:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.page},[n("BasePageHeader",{attrs:{title:"編輯包月方案"}}),n("el-tabs",{attrs:{type:"border-card",stretch:"","before-leave":e.beforeTabSwitch},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabList,function(t,a){return n("el-tab-pane",{key:a,attrs:{label:t.title,name:""+(a+1)}},[n(t.component,{ref:"step"+(a+1),refInFor:!0,tag:"component",attrs:{"default-value":e.submitData,products:e.products,category:e.category,prices:e.prices},on:{"update:defaultValue":function(t){e.submitData=t},"update:default-value":function(t){e.submitData=t},update:function(t){return e.onClickSave("image")}}}),n("div",{class:e.$style.footer},[n("el-button",{staticClass:"is-round",attrs:{type:"danger",loading:e.tryingToRemove,disabled:e.tryingToRemove},on:{click:e.tryToRemove}},[e._v("刪除")]),n("el-button",{staticClass:"is-round",attrs:{loading:e.tryingToSave},on:{click:function(t){return e.$router.push({name:"prepaid"})}}},[e._v("取消")]),n("el-button",{staticClass:"is-round",attrs:{type:"primary",loading:e.tryingToSave},on:{click:e.onClickSave}},[e._v("儲存變更")])],1)],1)}),1)],1)},r=[],i=n("4795"),s=n.n(i),c=n("9395"),u=n("cb0c"),o=n("3fa5"),p=n("df73"),l=n("0644"),d=n.n(l),f={page:{title:"編輯包月方案",meta:[{name:"description",content:"Edit Prepaid"}]},props:{products:{type:Array,required:!0},category:{type:Array,required:!0},prices:{type:Array,required:!0},defaultValue:{type:Object,default:function(){}}},data:function(){return{activeTab:"1",tabList:Object.freeze([{title:"基本資訊",component:function(){return n.e("chunk-7acdfb4f").then(n.bind(null,"6e31"))}},{title:"限制設定",component:function(){return n.e("chunk-57315fce").then(n.bind(null,"dd5d"))}},{title:"適用設定",component:function(){return n.e("chunk-67a39d2a").then(n.bind(null,"80d9"))}},{title:"價格設定",component:function(){return n.e("chunk-8b9823b0").then(n.bind(null,"31d7"))}}]),submitData:d()(this.defaultValue),tryingToSave:!1,tryingToRemove:!1}},computed:{pagination:function(){return this.$route.params.pagination},filterData:function(){return this.$route.params.filterData}},created:function(){},methods:{onClickSave:function(){var e=Object(u["a"])(s.a.mark(function e(t){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.tryingToSave=!0,e.prev=1,!this.submitData.prices.some(function(e){return 0===e.productIds.length})){e.next=7;break}return e.next=5,this.$confirm("還有適用項目沒選擇適用店家","提示",{confirmButtonText:"確定",showCancelButton:!1,type:"warning",center:!0});case 5:return this.tryingNextStep=!1,e.abrupt("return");case 7:return e.next=9,this.$refs.step1[0].validate();case 9:return e.next=11,this.$refs.step2[0].saveSingleUsageRule();case 11:return this.submitData=Object(c["a"])({},this.submitData,{images:this.submitData.images.map(function(e,t){return Object(c["a"])({},e,{default:0===t?1:0})})}),e.next=14,this.$store.dispatch("prepaid/storeGroup",this.submitData);case 14:Object(o["b"])("edit"),"image"!==t&&this.$router.push({name:"prepaid",params:{pagination:this.pagination,filterData:this.filterData}}),e.next=20;break;case 18:e.prev=18,e.t0=e["catch"](1);case 20:return e.prev=20,this.tryingToSave=!1,e.finish(20);case 23:case"end":return e.stop()}},e,this,[[1,18,20,23]])}));return function(t){return e.apply(this,arguments)}}(),tryToRemove:function(){var e=Object(u["a"])(s.a.mark(function e(){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["a"])("該包月方案");case 3:return e.prev=3,this.tryingToRemove=!0,e.next=7,this.$store.dispatch("prepaid/removeGroup",{groupOrderings:[this.defaultValue.groupOrdering]});case 7:Object(o["a"])(),this.$router.push({name:"prepaid"});case 9:return e.prev=9,this.tryingToRemove=!1,e.finish(9);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:case"end":return e.stop()}},e,this,[[0,14],[3,,9,12]])}));return function(){return e.apply(this,arguments)}}(),beforeTabSwitch:function(){var e=Object(u["a"])(s.a.mark(function e(t,n){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("2"!==n){e.next=3;break}return e.next=3,this.$refs.step2[0].saveSingleUsageRule();case 3:if("1"!==n){e.next=6;break}return e.next=6,this.$refs.step1[0].validate();case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},b=f,h=n("0b06"),m=n("2877");function v(e){this["$style"]=h["default"].locals||h["default"]}var g=Object(m["a"])(b,a,r,!1,v,null,null);t["default"]=g.exports},df73:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var a=n("5c96");function r(e){return a["MessageBox"].confirm("尚未完成新增，請問是否確定離開新增".concat(e),"您將離開此頁面",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}function i(e){return a["MessageBox"].confirm("您確定要刪除".concat(e,"嗎？"),"確認刪除",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1})}}}]);
//# sourceMappingURL=chunk-616ee468.d11f53c4.js.map