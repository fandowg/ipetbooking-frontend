{"version":3,"sources":["webpack:///./src/components/ScheduleStaffServiceForm.vue?90e0","webpack:///./src/components/ScheduleStaffServiceForm.vue?36f3","webpack:///src/components/ScheduleStaffServiceForm.vue","webpack:///./src/components/ScheduleStaffServiceForm.vue?0f0d","webpack:///./src/components/ScheduleStaffServiceForm.vue?f227","webpack:///./src/components/ScheduleStaffServiceForm.vue?9b6b"],"names":["module","exports","slide","slide-reverse","repeat","services-wrap","services","footer","render","_vm","this","_h","$createElement","_c","_self","ref","staticStyle","margin-top","attrs","model","submitData","rules","submitRules","label-position","label","prop","value-key","multiple","placeholder","popper-append-to-body","on","change","onLocationChange","value","callback","$$v","$set","expression","_l","site","key","id","name","categoryList","length","staticClass","slot","_v","indeterminate","isIndeterminateCategory","handleCheckAllCategory","checkAllCategory","item","categoryTitle","_e","class","$style","min-height","availableService","margin-left","margin-bottom","isIndeterminate","border","handleCheckAllChange","checkAll","title","type","closable","service","state","font-size","_s","margin-right","location","staticRenderFns","initData","storeIds","serviceCategoryIds","productPriceIds","ScheduleStaffServiceFormvue_type_script_lang_js_","components","props","defaultValue","Object","default","data","priceList","locations","computed","isEditMode","undefined","_this","list","forEach","price","product","productId","category","petSizeId","push","objectSpread","filterSubmitData","map","_this2","repeatIsEmpty","repeatIsWeekMode","required","message","trigger","description","startTime","validator","rule","Error","endTime","$refs","form","validateField","minutesOfTime","repeatWith","repeatEndDate","maxCollision","$nextTick","clearValidate","watch","created","tryToFetchPrices","getDefaultSubmitData","methods","_getDefaultSubmitData","asyncToGenerator","regenerator_default","a","mark","_callee","categoryAll","newArray","_this$defaultValue","wrap","_context","prev","next","tryToSearchProduct","$store","dispatch","sent","itemParent","children","filter","includes","stop","apply","arguments","_tryToFetchPrices","_callee2","_ref","items","_context2","limit","page","_tryToSearchProduct","_callee3","_ref2","_context3","selectedItem","checkValidServices","validPrice","toConsumableArray","serviceId","checked","validate","components_ScheduleStaffServiceFormvue_type_script_lang_js_","injectStyles","context","ScheduleStaffServiceFormvue_type_style_index_0_lang_scss_module_true_","locals","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ScheduleStaffServiceForm_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ScheduleStaffServiceForm_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-22c004d0.f33cf680.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"ScheduleStaffServiceForm_slide_3eMma\",\"slide-reverse\":\"ScheduleStaffServiceForm_slide-reverse_1o1yh\",\"repeat\":\"ScheduleStaffServiceForm_repeat_Lhi2v\",\"services-wrap\":\"ScheduleStaffServiceForm_services-wrap_Dapr6\",\"services\":\"ScheduleStaffServiceForm_services_2T7YT\",\"footer\":\"ScheduleStaffServiceForm_footer_3euLW\"};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"form\",staticStyle:{\"margin-top\":\"30px\"},attrs:{\"model\":_vm.submitData,\"rules\":_vm.submitRules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"設定此時段可服務的地點\",\"prop\":\"storeIds\"}},[_c('el-select',{attrs:{\"value-key\":\"id\",\"multiple\":\"\",\"placeholder\":\"請選擇\",\"popper-append-to-body\":true},on:{\"change\":_vm.onLocationChange},model:{value:(_vm.submitData.storeIds),callback:function ($$v) {_vm.$set(_vm.submitData, \"storeIds\", $$v)},expression:\"submitData.storeIds\"}},_vm._l((_vm.locations),function(site){return _c('el-option',{key:site.id,attrs:{\"label\":site.name,\"value\":site}})}),1)],1),(_vm.categoryList.length > 0)?_c('el-form-item',{attrs:{\"prop\":\"serviceCategoryIds\"}},[_c('span',{staticClass:\"clickOk\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"此時段可服務的寵物類別與體型 \"),_c('el-checkbox',{staticClass:\"check-by-head\",attrs:{\"indeterminate\":_vm.isIndeterminateCategory},on:{\"change\":_vm.handleCheckAllCategory},model:{value:(_vm.checkAllCategory),callback:function ($$v) {_vm.checkAllCategory=$$v},expression:\"checkAllCategory\"}},[_vm._v(\"全選\")])],1),_c('el-select',{attrs:{\"value-key\":\"id\",\"multiple\":\"\",\"placeholder\":\"請選擇\",\"popper-append-to-body\":true},model:{value:(_vm.submitData.serviceCategoryIds),callback:function ($$v) {_vm.$set(_vm.submitData, \"serviceCategoryIds\", $$v)},expression:\"submitData.serviceCategoryIds\"}},_vm._l((_vm.categoryList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.categoryTitle,\"value\":item.id}})}),1)],1):_vm._e(),_c('el-form-item',{class:_vm.$style['services-wrap'],staticStyle:{\"min-height\":\"250px\"},attrs:{\"label\":\"可受理的服務項目\",\"prop\":\"productPriceIds\"}},[(_vm.availableService.length)?_c('el-checkbox',{staticStyle:{\"margin-left\":\"5px\",\"margin-top\":\"10px\",\"margin-bottom\":\"5px\"},attrs:{\"indeterminate\":_vm.isIndeterminate,\"border\":\"\"},on:{\"change\":_vm.handleCheckAllChange},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全 選\")]):_c('el-alert',{attrs:{\"title\":\"請選擇分店與寵物體型\",\"type\":\"warning\",\"closable\":false}}),_c('el-checkbox-group',{class:_vm.$style.services,model:{value:(_vm.submitData.productPriceIds),callback:function ($$v) {_vm.$set(_vm.submitData, \"productPriceIds\", $$v)},expression:\"submitData.productPriceIds\"}},_vm._l((_vm.availableService),function(service){return _c('el-checkbox',{key:(\"free-\" + (service.id)),attrs:{\"label\":service.id,\"border\":\"\"}},[_c('div',{staticClass:\"content\"},[(service.state === 0)?_c('span',{staticClass:\"side-icon\"},[_vm._v(\"已下架\")]):_vm._e(),_c('span',{staticClass:\"title\",staticStyle:{\"font-size\":\"15px\"}},[_vm._v(_vm._s(service.title))]),_c('span',{staticClass:\"meta\"},[_c('span',{staticStyle:{\"font-size\":\"14px\",\"margin-right\":\"10px\"}},[_vm._v(_vm._s(service.location))]),_c('span',[_vm._v(_vm._s(service.categoryTitle))])])])])}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nfunction initData() {\n  return {\n    storeIds: [],\n    serviceCategoryIds: [],\n    productPriceIds: [],\n  }\n}\nexport default {\n  components: {},\n  props: {\n    defaultValue: {\n      type: Object,\n      default: () => initData(),\n    },\n  },\n  data() {\n    return {\n      submitData: {\n        storeIds: [],\n        serviceCategoryIds: [],\n        productPriceIds: [],\n      },\n      categoryList: [],\n      priceList: [],\n      locations: [],\n      checkAll: false,\n      checkAllCategory: false,\n    }\n  },\n  computed: {\n    isEditMode() {\n      return this.defaultValue.id !== undefined\n    },\n    availableService() {\n      let list = []\n      this.priceList.forEach((price) => {\n        this.submitData.storeIds.forEach((product) => {\n          if (price.productId === product.id) {\n            this.submitData.serviceCategoryIds.forEach((category) => {\n              if (price.petSizeId === category) {\n                list.push({\n                  ...price,\n                  location: product.name,\n                })\n              }\n            })\n          }\n          // list.push({\n          //   ...price,\n          //   location: product.name,\n          // })\n        })\n      })\n      // console.log(list)\n      // list = list.filter(item=>{\n      //   return item.state === 1\n      // })\n      return list\n    },\n    isIndeterminate() {\n      this.checkAll = this.submitData.productPriceIds.length === this.availableService.length\n      if (this.submitData.productPriceIds.length === 0) return false\n      return this.submitData.productPriceIds.length > 0 && this.submitData.productPriceIds.length < this.availableService.length\n    },\n    isIndeterminateCategory() {\n      this.checkAllCategory = this.submitData.serviceCategoryIds.length === this.categoryList.length\n      if (this.submitData.serviceCategoryIds.length === 0) return false\n      return this.submitData.serviceCategoryIds.length > 0 && this.submitData.serviceCategoryIds.length < this.categoryList.length\n    },\n    filterSubmitData() {\n      const storeIds = this.submitData.storeIds.map((item) => item.id)\n      return {\n        ...this.submitData,\n        storeIds,\n      }\n    },\n    submitRules() {\n      const repeatIsEmpty = this.submitData.repeat === ''\n      const repeatIsWeekMode = this.submitData.repeat === 'week'\n      return {\n        title: [\n          {\n            required: true,\n            message: '請填寫方案名稱',\n            trigger: 'blur',\n          },\n        ],\n        description: [\n          {\n            required: true,\n            message: '請填寫方案內容',\n            trigger: 'blur',\n          },\n        ],\n        startTime: [\n          {\n            required: true,\n            validator: (rule, value, callback) => {\n              if (!value) return callback(new Error('請選擇時段開始時間'))\n              if (this.submitData.endTime) this.$refs.form.validateField('endTime')\n\n              callback()\n            },\n            trigger: 'change',\n          },\n        ],\n        endTime: [\n          {\n            required: true,\n            validator: (rule, value, callback) => {\n              if (!value) return callback(new Error('請選擇時段結束時間'))\n              if (minutesOfTime(this.submitData.startTime) >= minutesOfTime(value)) return callback(new Error('結束時間不可早於開始時間'))\n              callback()\n            },\n            trigger: 'change',\n          },\n        ],\n        repeatWith: [\n          {\n            type: 'array',\n            required: repeatIsWeekMode,\n            message: '請選擇重複的星期',\n            trigger: 'change',\n          },\n        ],\n        repeatEndDate: [\n          {\n            required: !repeatIsEmpty,\n            message: '請選擇重複結束日期',\n            trigger: 'change',\n          },\n        ],\n        maxCollision: [\n          {\n            required: true,\n            message: '請輸入人數',\n          },\n          { type: 'number', message: '人數必須為數字' },\n        ],\n        storeIds: [\n          {\n            required: true,\n            validator: (rule, value, callback) => {\n              if (!value.length) {\n                this.$nextTick(() => {\n                  this.$refs.form.clearValidate('productPriceIds')\n                })\n                return callback(new Error('請選擇服務地點'))\n              }\n              callback()\n            },\n            trigger: 'change',\n          },\n        ],\n        productPriceIds: [\n          {\n            required: true,\n            message: '請選擇服務項目',\n            trigger: 'change',\n          },\n        ],\n        serviceCategoryIds:[\n          {\n            required: true,\n            message: '請選擇寵物類別與體型',\n            trigger: 'change',\n          },\n        ],\n      }\n    },\n  },\n  watch: {},\n  created() {\n    this.tryToFetchPrices()\n    // this.tryToSearchProduct()\n    this.getDefaultSubmitData()\n    // console.log(456)\n    // this.submitData.productIds.push(this.locations[0])\n  },\n  methods: {\n    async getDefaultSubmitData() {\n      // const { items } = await this.$store.dispatch('product/fetchList', { limit: 10000, page: 1 })\n      await this.tryToSearchProduct()\n      let categoryAll = await this.$store.dispatch('product/fetchServiceCategory')\n      let newArray = []\n      categoryAll.forEach((itemParent) => {\n        itemParent.children.forEach((item) => {\n          newArray.push(item)\n        })\n      })\n      this.categoryList = newArray\n\n      if (this.isEditMode) {\n        const { storeIds, serviceCategoryIds, productPriceIds } = this.defaultValue\n        // this.locations = items\n        // storeIds = this.locations.filter((location) => productIds.includes(location.id))\n        this.submitData = {\n          storeIds: this.locations.filter((location) => storeIds.includes(location.id)),\n          serviceCategoryIds,\n          productPriceIds,\n        }\n      }else{\n        this.submitData = {\n          storeIds:[],\n          serviceCategoryIds:[],\n          productPriceIds:[],\n        }\n      }\n    },\n    async tryToFetchPrices() {\n      const { items } = await this.$store.dispatch('product/fetchServicePrices', {\n        limit: 10000,\n        page: 1,\n      })\n      this.priceList = items\n    },\n    async tryToSearchProduct() {\n      const { items } = await this.$store.dispatch('product/fetchList', { limit: 10000, page: 1 })\n      this.locations = items\n    },\n    onLocationChange(selectedItem) {\n      this.checkValidServices()\n    },\n    checkValidServices() {\n      const storeIds = this.submitData.storeIds.map((product) => product.id)\n      const validPrice = this.priceList.filter((price) => storeIds.includes(price.productId)).map((price) => price.id)\n      this.submitData.productPriceIds = [...this.submitData.productPriceIds.filter((serviceId) => validPrice.includes(serviceId))]\n    },\n    handleCheckAllChange(checked) {\n      this.submitData.productPriceIds = checked ? this.availableService.map((price) => price.id) : []\n    },\n    handleCheckAllCategory(checked) {\n      this.submitData.serviceCategoryIds = checked ? this.categoryList.map((category) => category.id) : []\n    },\n    validate() {\n      return this.$refs.form.validate()\n    },\n  },\n}\n</script>\n\n<template>\n  <div>\n    <el-form ref=\"form\" :model=\"submitData\" :rules=\"submitRules\" label-position=\"top\" style=\"margin-top: 30px\">\n      <el-form-item label=\"設定此時段可服務的地點\" prop=\"storeIds\">\n        <el-select v-model=\"submitData.storeIds\" value-key=\"id\" multiple placeholder=\"請選擇\" :popper-append-to-body=\"true\" @change=\"onLocationChange\">\n          <el-option v-for=\"site in locations\" :key=\"site.id\" :label=\"site.name\" :value=\"site\"> </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item v-if=\"categoryList.length > 0\" prop=\"serviceCategoryIds\">\n        <span slot=\"label\" class=\"clickOk\"\n          >此時段可服務的寵物類別與體型 <el-checkbox v-model=\"checkAllCategory\" class=\"check-by-head\" :indeterminate=\"isIndeterminateCategory\" @change=\"handleCheckAllCategory\">全選</el-checkbox></span\n        >\n        <el-select v-model=\"submitData.serviceCategoryIds\" value-key=\"id\" multiple placeholder=\"請選擇\" :popper-append-to-body=\"true\">\n          <el-option v-for=\"item in categoryList\" :key=\"item.id\" :label=\"item.categoryTitle\" :value=\"item.id\"> </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"可受理的服務項目\" style=\"min-height:250px\" :class=\"$style['services-wrap']\" prop=\"productPriceIds\">\n        <el-checkbox\n          v-if=\"availableService.length\"\n          v-model=\"checkAll\"\n          :indeterminate=\"isIndeterminate\"\n          style=\"margin-left: 5px; margin-top: 10px; margin-bottom: 5px\"\n          border\n          @change=\"handleCheckAllChange\"\n          >全 選</el-checkbox\n        >\n        <el-alert v-else title=\"請選擇分店與寵物體型\" type=\"warning\" :closable=\"false\"></el-alert>\n        <el-checkbox-group v-model=\"submitData.productPriceIds\" :class=\"$style.services\">\n          <el-checkbox v-for=\"service in availableService\" :key=\"`free-${service.id}`\" :label=\"service.id\" border>\n            <div class=\"content\">\n              <span v-if=\"service.state === 0\" class=\"side-icon\">已下架</span>\n              <span class=\"title\" style=\"font-size: 15px\">{{ service.title }}</span>\n              <span class=\"meta\">\n                <span style=\"font-size: 14px; margin-right: 10px\">{{ service.location }}</span>\n                <span>{{ service.categoryTitle }}</span>\n              </span>\n            </div>\n          </el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<style lang=\"scss\" module>\n.repeat {\n  :global {\n    .el-checkbox-button {\n      .el-checkbox-button__inner {\n        border-radius: 8px;\n        padding: 14px 15px;\n        border-color: $color-primary;\n      }\n      &.is-checked {\n        .el-checkbox-button__inner {\n          background: $color-primary;\n        }\n      }\n      & + .el-checkbox-button {\n        margin-left: 5px;\n        .el-checkbox-button__inner {\n          border-left: 1px solid $color-primary;\n        }\n      }\n    }\n  }\n}\n.services-wrap {\n  margin: 0 -5px 30px;\n}\n.services {\n  :global {\n    label.el-checkbox.is-bordered {\n      width: calc(50% - 10px);\n      display: inline-flex;\n      margin: 5px;\n      align-items: center;\n      height: auto;\n      padding: 15px 20px 15px 15px;\n\n      @include max-sm {\n        width: 100%;\n      }\n\n      .el-checkbox__inner {\n        border-radius: 10px;\n        width: 18px;\n        height: 18px;\n        &:after {\n          left: 5px;\n          top: 2px;\n          height: 8px;\n          width: 4px;\n          border-width: 2px;\n        }\n      }\n      .el-checkbox__label {\n        padding-left: 15px;\n        width: 100%;\n      }\n      & + .el-checkbox.is-bordered {\n        margin-left: 5px;\n      }\n\n      .title, .meta {\n        width: calc(100% - 20px);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: block;\n      }\n\n      .content {\n        width: 100%;\n      }\n    }\n  }\n}\n.footer {\n  display: flex;\n  :global {\n    button {\n      flex: 1 0 auto;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScheduleStaffServiceForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScheduleStaffServiceForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScheduleStaffServiceForm.vue?vue&type=template&id=66d8e17d&\"\nimport script from \"./ScheduleStaffServiceForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ScheduleStaffServiceForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ScheduleStaffServiceForm.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScheduleStaffServiceForm.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScheduleStaffServiceForm.vue?vue&type=style&index=0&lang=scss&module=true&\""],"sourceRoot":""}