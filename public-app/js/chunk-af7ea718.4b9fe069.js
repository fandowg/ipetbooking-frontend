(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af7ea718","chunk-af7ea718"],{"0a10":function(e,t,a){"use strict";var s=a("11f0"),i=a.n(s);t["default"]=i.a},"11f0":function(e,t,a){e.exports={slide:"Info_slide_2PdUF","slide-reverse":"Info_slide-reverse_2MhuM",editOneLine:"Info_editOneLine_1vtlv",meta:"Info_meta_2ZIW4",header:"Info_header_3Mu_0",title:"Info_title_2PoK-",info:"Info_info_9rVcE"}},cb6f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.info},[a("h3",{staticClass:"Jost"},[e._v(e._s("#"+e.defaultValue.id))]),e.isEmployee?e._e():a("p",{class:e.$style.meta},[a("span",[e._v(e._s(e._f("formatDate")(e.defaultValue.created,"dateTime"))+" 成立訂單")]),a("BaseStateLabel",{attrs:{state:"info",text:""}},[e._v("訂單來源："+e._s(e._f("orderSourceFilter")(e.defaultValue.source)))])],1),a("BaseStateLabel",{attrs:{state:e._f("paymentStatusMapFilter")(e.defaultValue.paymentStatus,"color")}},[e._v(e._s(e._f("paymentStatusMapFilter")(e.defaultValue.paymentStatus,"text")))]),a("BaseStateLabel",{staticStyle:{padding:"0 18px",height:"25px"},attrs:{round:!0,state:e._f("bookingStatusFilter")(e.defaultValue.status,"color"),text:""}},[e._v(e._s(e._f("bookingStatusFilter")(e.defaultValue.status,"text")))]),a("br"),"Prepaid"===e.defaultValue.paymentMethod?a("BaseStateLabel",{staticStyle:{background:"#000","margin-left":"0","margin-top":"10px"}},[e._v("方案預約:"+e._s(e.defaultValue.prepaid.title))]):e._e(),a("div",{class:e.$style.header},[a("h5",{class:e.$style.title},[e._v(e._s(e.defaultValue.productName)+" "+e._s(e.defaultValue.params[0].title))]),a("h6",{staticStyle:{"margin-top":"-10px",color:"darkgrey"}},[e._v(e._s(e.defaultValue.params[0].introtext))]),a("h5",{staticClass:"Jost"},[e._v("預約時間："+e._s(e._f("formatDate")(e.defaultValue.date))+" "+e._s(e.defaultValue.time))]),e.isHomeService&&e.defaultValue.city?a("h5",{staticClass:"Jost"},[e._v("服務地址："+e._s(e.defaultValue.city)+e._s(e.defaultValue.district)+e._s(e.defaultValue.address))]):a("h5",{staticClass:"Jost"},[e._v("服務地點："+e._s(e.defaultValue.productName))]),e.defaultValue.scheduleItem?[e.defaultValue.scheduleItem&&!e.isEmployee?a("h5",{staticClass:"Jost"},[e._v("美容師："+e._s(e.defaultValue.scheduleItem.name))]):e._e(),e.isEmployee?a("div",{class:e.$style.editOneLine},[a("h5",{staticClass:"editOneLine__title"},[e._v("美容師：")]),a("span",{staticClass:"editOneLine__text"},[e._v(e._s(e.defaultValue.scheduleItem.name)+" ")])]):e._e(),6===e.defaultValue.status?a("div",{class:e.$style.editOneLine,staticStyle:{"margin-top":"15px padding:0  20px"}},[a("h5",{staticClass:"editOneLine__title"},[e._v("助理：")]),a("span",{staticClass:"editOneLine__text"},[e._v(e._s(e.defaultValue.helper?e.defaultValue.helper.name:"不指派")+" ")])]):a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],class:e.$style.editOneLine,staticStyle:{"margin-top":"15px padding:0  20px"},attrs:{"element-loading-background":"rgba(0, 0, 0,0)"}},[a("h5",{staticClass:"editOneLine__title"},[e._v("助理：")]),e.editAssistantEnabled?[a("el-form",{ref:"assistantForm",staticClass:"el-form--floating",staticStyle:{width:"200px"}},[a("el-form-item",{staticClass:"el-form-item--normal-margin",attrs:{label:""}},[a("el-select",{model:{value:e.submitData.helper.id,callback:function(t){e.$set(e.submitData.helper,"id",t)},expression:"submitData.helper.id"}},[a("el-option",{attrs:{label:"不指派",value:""}}),e._l(e.assignList,function(t,s){return a("el-option",{key:s,attrs:{value:t.id,label:t.name+" "+(t.sameStore?"(同分店)":"(不同分店)")}},[e._v("\n                  "+e._s(t.name)+" ("+e._s(t.sameStore?"同分店":"不同分店")+")\n                ")])})],2)],1)],1)]:e._e(),e.editAssistantEnabled?e._e():[e.assignList.length>0&&!e.defaultValue.helper?a("span",{staticClass:"editOneLine__text"},[e._v("請選擇")]):e._e(),e.loading||0!==e.assignList.length||e.defaultValue.helper?e._e():a("span",{staticClass:"editOneLine__text"},[e._v("目前無人員可指派 ")]),e.defaultValue.helper?a("span",{staticClass:"editOneLine__text"},[e._v(e._s(e.defaultValue.helper.name)+" ")]):e._e()],e.assignList.length>0?[e.editAssistantEnabled?[a("el-button",{staticClass:"is-round",on:{click:e.cancelEdit}},[e._v("\n              取消\n            ")]),a("el-button",{staticClass:"is-round",attrs:{type:"primary",loading:e.tryingAssign},on:{click:e.tryToStoreAssignHelper}},[e._v("\n              儲存\n            ")])]:[a("el-button",{staticClass:"is-round",attrs:{size:"mini"},on:{click:e.openEdit}},[a("BaseIcon",{attrs:{name:"edit"}}),a("span",[e._v("編輯")])],1)]]:e._e()],2)]:e._e(),e.defaultValue.prepaidOrderStatus?[2===e.defaultValue.prepaidOrderStatus?a("div",{class:e.$style.editOneLine},[a("h5",{staticClass:"editOneLine__title"},[e._v("包月方案：")]),a("span",{staticClass:"editOneLine__text"},[e._v("未付款")]),a("el-button",{staticClass:"is-round",attrs:{size:"mini"},on:{click:function(t){return e.goToPrepaidOrder(e.defaultValue.prepaidOrderUuid)}}},[a("BaseIcon",{attrs:{name:"edit"}}),a("span",[e._v("編輯")])],1)],1):e._e()]:e._e(),e.isEmployee?e._e():a("div",{staticClass:"total"},[a("div",[e._v("訂單總計")]),a("div",{staticClass:"Jost"},[e._v("$"+e._s(e.defaultValue.allTotal))])]),e.defaultValue.allUnpaidTotal>0?a("div",{staticClass:"unpaid"},[a("div",[e._v("未付款項目金額總計")]),a("div",{staticClass:"Jost"},[e._v("$"+e._s(e.defaultValue.allUnpaidTotal))])]):e._e()],2)],1)},i=[],l=a("4795"),n=a.n(l),d=a("cb0c"),u=a("9395"),r=a("a315"),o=a("7e02"),c=a("6bea"),_=a("4d77"),p={components:{BaseStateLabel:function(){return Object(r["a"])(a.e("chunk-12bed50d").then(a.bind(null,"38d1")))}},filters:{orderStatusFilter:o["o"],orderSourceFilter:o["m"],formatDate:c["a"],bookingStatusFilter:o["a"],paymentStatusMapFilter:o["q"]},props:{defaultValue:{type:Object,default:function(){}},assignList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{editAssistantEnabled:!1,IsFull:!1,submitData:Object(u["a"])({},this.defaultValue),tryingAssign:!1}},watch:{},computed:Object(u["a"])({},_["b"],{isEmployee:function(){return this.currentUserRoutes.includes("employee-calendar")},isHomeService:function(){return"home"===this.defaultValue.storeType}}),created:function(){},methods:{tryToStoreAssignHelper:function(){var e=Object(d["a"])(n.a.mark(function e(){return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tryingAssign=!0,this.$emit("update:loading",!0),e.next=4,this.$store.dispatch("order/storeAssignHelper",{id:this.defaultValue.id,itemId:this.submitData.helper.id});case 4:this.$emit("update"),this.tryingAssign=!1,this.$emit("update:loading",!1),this.editAssistantEnabled=!1;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),cancelEdit:function(){this.editAssistantEnabled=!1},openEdit:function(){this.editAssistantEnabled=!0,this.defaultValue.helper?this.submitData.helper=Object(u["a"])({},this.defaultValue.helper):this.submitData.helper={id:"",name:""}},goToPrepaidOrder:function(e){this.$router.push({name:"orders",query:{type:"prepaidOrder",id:e}})}}},f=p,m=a("0a10"),h=a("2877");function v(e){this["$style"]=m["default"].locals||m["default"]}var b=Object(h["a"])(f,s,i,!1,v,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-af7ea718.4b9fe069.js.map