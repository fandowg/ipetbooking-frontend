{"version":3,"sources":["webpack:///./src/router/views/prepaid/DetailEdit.vue?ffff","webpack:///./src/router/views/prepaid/DetailEdit.vue?4dc1","webpack:///./src/utils/message.js","webpack:///./src/router/views/prepaid/DetailEdit.vue?d17a","webpack:///src/router/views/prepaid/DetailEdit.vue","webpack:///./src/router/views/prepaid/DetailEdit.vue?0321","webpack:///./src/router/views/prepaid/DetailEdit.vue?d881","webpack:///./src/utils/message-box.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_DetailEdit_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_0_0_node_modules_css_loader_index_js_ref_8_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_0_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_DetailEdit_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","module","exports","slide","slide-reverse","page","card-wrapper","footer","d","messageStroe","messageDelete","element_ui__WEBPACK_IMPORTED_MODULE_0__","state","Message","message","type","render","_vm","this","_h","$createElement","_c","_self","class","$style","attrs","title","stretch","before-leave","beforeTabSwitch","model","value","callback","$$v","activeTab","expression","_l","tab","index","key","label","name","component","ref","refInFor","tag","default-value","submitData","products","category","prices","on","update:defaultValue","$event","update:default-value","update","onClickSave","staticClass","loading","tryingToRemove","disabled","click","tryToRemove","_v","tryingToSave","$router","push","staticRenderFns","DetailEditvue_type_script_lang_js_","meta","content","props","Array","required","defaultValue","Object","default","data","tabList","freeze","e","then","bind","cloneDeep_default","computed","pagination","$route","params","filterData","created","methods","_onClickSave","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","some","item","productIds","length","$confirm","confirmButtonText","showCancelButton","center","tryingNextStep","abrupt","$refs","step1","validate","step2","saveSingleUsageRule","objectSpread","images","map","image","$store","dispatch","t0","finish","stop","_x","apply","arguments","_tryToRemove","_callee2","_context2","message_box","groupOrderings","groupOrdering","_beforeTabSwitch","_callee3","activeName","oldActiveName","_context3","_x2","_x3","prepaid_DetailEditvue_type_script_lang_js_","injectStyles","context","DetailEditvue_type_style_index_0_lang_scss_module_true_","locals","componentNormalizer","messageBoxLeave","messageBoxDelete","pageTitle","MessageBox","confirm","concat","cancelButtonText","showClose","itemName"],"mappings":"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","file":"js/chunk-616ee468.d11f53c4.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEdit.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-0-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-0-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-0-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-0-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEdit.vue?vue&type=style&index=0&lang=scss&module=true&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slide\":\"DetailEdit_slide_c8wWY\",\"slide-reverse\":\"DetailEdit_slide-reverse_3bui6\",\"page\":\"DetailEdit_page_1aUkP\",\"card-wrapper\":\"DetailEdit_card-wrapper_2deBl\",\"footer\":\"DetailEdit_footer_fGoQR\"};","import { Message } from 'element-ui';\n\nexport function messageStroe(state){\n  if(state==='add'){\n    Message({\n      message:'已新增',\n      type:'success'\n    });\n  }\n  if(state==='edit'){\n    Message({\n      message:'已儲存',\n      type:'success'\n    });\n  }\n}\n\nexport function messageDelete(){\n\n    Message({\n      message:'已刪除',\n      type:'success'\n    });\n\n\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.page},[_c('BasePageHeader',{attrs:{\"title\":\"編輯包月方案\"}}),_c('el-tabs',{attrs:{\"type\":\"border-card\",\"stretch\":\"\",\"before-leave\":_vm.beforeTabSwitch},model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},_vm._l((_vm.tabList),function(tab,index){return _c('el-tab-pane',{key:index,attrs:{\"label\":tab.title,\"name\":(\"\" + (index + 1))}},[_c(tab.component,{ref:(\"step\" + (index + 1)),refInFor:true,tag:\"component\",attrs:{\"default-value\":_vm.submitData,\"products\":_vm.products,\"category\":_vm.category,\"prices\":_vm.prices},on:{\"update:defaultValue\":function($event){_vm.submitData=$event},\"update:default-value\":function($event){_vm.submitData=$event},\"update\":function($event){return _vm.onClickSave('image')}}}),_c('div',{class:_vm.$style.footer},[_c('el-button',{staticClass:\"is-round\",attrs:{\"type\":\"danger\",\"loading\":_vm.tryingToRemove,\"disabled\":_vm.tryingToRemove},on:{\"click\":_vm.tryToRemove}},[_vm._v(\"刪除\")]),_c('el-button',{staticClass:\"is-round\",attrs:{\"loading\":_vm.tryingToSave},on:{\"click\":function($event){return _vm.$router.push({ name: 'prepaid' })}}},[_vm._v(\"取消\")]),_c('el-button',{staticClass:\"is-round\",attrs:{\"type\":\"primary\",\"loading\":_vm.tryingToSave},on:{\"click\":_vm.onClickSave}},[_vm._v(\"儲存變更\")])],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { messageStroe, messageDelete } from '@utils/message'\nimport { messageBoxDelete } from '@utils/message-box'\nimport cloneDeep from 'lodash/cloneDeep'\n\nexport default {\n  page: {\n    title: '編輯包月方案',\n    meta: [{ name: 'description', content: 'Edit Prepaid' }],\n  },\n  props: {\n    products: {\n      type: Array,\n      required: true,\n    },\n    category: {\n      type: Array,\n      required: true,\n    },\n    prices: {\n      type: Array,\n      required: true,\n    },\n    defaultValue: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      activeTab: '1',\n      tabList: Object.freeze([\n        {\n          title: '基本資訊',\n          component: () => import('./components/Step1Basic'),\n        },\n        {\n          title: '限制設定',\n          component: () => import('./components/Step2Limit'),\n        },\n        {\n          title: '適用設定',\n          component: () => import('./components/Step3Available'),\n        },\n        {\n          title: '價格設定',\n          component: () => import('./components/Step4Prices'),\n        },\n      ]),\n      submitData: cloneDeep(this.defaultValue),\n      tryingToSave: false,\n      tryingToRemove: false,\n    }\n  },\n  computed: {\n    pagination() {\n      return this.$route.params.pagination\n    },\n    filterData(){\n      return this.$route.params.filterData\n    }\n  },\n  created() {\n    // console.log(this.$route.params.pagination)\n  },\n  methods: {\n    async onClickSave(type) {\n      this.tryingToSave = true\n      try {\n        if (\n          this.submitData.prices.some((item) => {\n            return item.productIds.length === 0\n          })\n        ) {\n          await this.$confirm('還有適用項目沒選擇適用店家', '提示', {\n            confirmButtonText: '確定',\n            showCancelButton: false,\n            type: 'warning',\n            center: true,\n          })\n          this.tryingNextStep = false\n          return\n        }\n        // if(this.submitData.prices[0].productIds.length===0){\n        //       await this.$confirm('請至少選擇一個服務項目，並設定適用店家', '提示', {\n        //           confirmButtonText: '確定',\n        //           showCancelButton: false,\n        //           type: 'warning',\n        //           center: true,\n        //         })\n        //         this.tryingNextStep = false\n        //         return\n        //     }\n        // if (this.$refs.step2[0].submitData.prices.length === 0) {\n        //  await this.$confirm('請至少選擇一個適用項目', '提示', {\n        //     confirmButtonText: '確定',\n        //     showCancelButton: false,\n        //     type: 'warning',\n        //     center: true,\n        //   })\n        //   this.tryingToSave = false\n        //   return\n        // }\n        // 檢查包月方案適用項目總數必須大於方案總抵用次數\n        // let allPricesMaxTimes = 0\n        // this.$refs.step2[0].submitData.prices.forEach(item => {\n        //  allPricesMaxTimes = allPricesMaxTimes + item.maxTimes\n        // });\n        // // console.log(allPricesMaxTimes)\n        // if (allPricesMaxTimes  < this.defaultValue.times) {\n        //   await this.$confirm('適用項目總抵扣次數不得小於方案抵扣次數', '提示', {\n        //     confirmButtonText: '確定',\n        //     showCancelButton: false,\n        //     type: 'warning',\n        //     center: true,\n        //   })\n        //   this.tryingToSave = false\n        //   return\n        // }\n        // const submitData = Object.assign({}, this.$refs.step1[0].submitData, this.$refs.step2[0].submitData)\n        // console.log(this.$refs.step2[0].submitData)\n        // 幫忙存限制\n        await this.$refs.step1[0].validate()\n        await this.$refs.step2[0].saveSingleUsageRule()\n  \n        this.submitData = {\n          ...this.submitData,\n          images: this.submitData.images.map((image, index) => {\n            return {\n              ...image,\n              default: index === 0 ? 1 : 0,\n            }\n          }),\n        }\n        await this.$store.dispatch('prepaid/storeGroup', this.submitData)\n        // await this.$store.dispatch('prepaid/store', submitData)\n        messageStroe('edit')\n        // this.tryingToSave = false\n        // 回到進來的頁數\n        if(type!=='image'){\n          this.$router.push({ name: 'prepaid', params: { pagination: this.pagination,filterData:this.filterData } })\n        }\n        \n      } catch (error) {\n      } finally {\n        this.tryingToSave = false\n      }\n    },\n    async tryToRemove() {\n      try {\n        await messageBoxDelete('該包月方案')\n        try {\n          this.tryingToRemove = true\n          // await this.$store.dispatch('prepaid/remove', { ids: [this.defaultValue.id] })\n          await this.$store.dispatch('prepaid/removeGroup', { groupOrderings: [this.defaultValue.groupOrdering] })\n          messageDelete()\n          this.$router.push({ name: 'prepaid' })\n        } finally {\n          this.tryingToRemove = false\n        }\n      } catch {}\n    },\n    async beforeTabSwitch(activeName, oldActiveName) {\n      // console.log(oldActiveName)\n      if(oldActiveName==='2'){\n        // console.log(333)\n        await this.$refs.step2[0].saveSingleUsageRule()\n      }\n      if(oldActiveName==='1'){\n        await this.$refs.step1[0].validate()\n      //  await this.$refs.step2[0].validate()\n      }\n    \n    }\n  },\n}\n</script>\n<template>\n  <div :class=\"$style.page\">\n    <BasePageHeader title=\"編輯包月方案\" />\n    <el-tabs v-model=\"activeTab\" type=\"border-card\" stretch :before-leave=\"beforeTabSwitch\">\n      <el-tab-pane v-for=\"(tab, index) in tabList\" :key=\"index\" :label=\"tab.title\" :name=\"`${index + 1}`\">\n        <component :is=\"tab.component\" :ref=\"`step${index + 1}`\" :default-value.sync=\"submitData\" :products=\"products\" :category=\"category\" :prices=\"prices\" @update=\"onClickSave('image')\" />\n\n        <div :class=\"$style.footer\">\n          <el-button class=\"is-round\" type=\"danger\" :loading=\"tryingToRemove\" :disabled=\"tryingToRemove\" @click=\"tryToRemove\">刪除</el-button>\n          <el-button class=\"is-round\" :loading=\"tryingToSave\" @click=\"$router.push({ name: 'prepaid' })\">取消</el-button>\n          <el-button class=\"is-round\" type=\"primary\" :loading=\"tryingToSave\" @click=\"onClickSave\">儲存變更</el-button>\n        </div>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<style lang=\"scss\" module>\n@import '@src/design/layout_detail_steps.scss';\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DetailEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DetailEdit.vue?vue&type=template&id=1315f0ea&\"\nimport script from \"./DetailEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DetailEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DetailEdit.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { MessageBox } from 'element-ui';\n\nexport function messageBoxLeave(pageTitle){\n return MessageBox.confirm(\n    `尚未完成新增，請問是否確定離開新增${pageTitle}`,\n    '您將離開此頁面',\n    {\n      confirmButtonText: '確定',\n      cancelButtonText: '取消',\n      type: 'warning',\n      center: true,\n      showClose: false,\n    }\n  )\n}\nexport function messageBoxDelete(itemName){\n  return MessageBox.confirm(\n     `您確定要刪除${itemName}嗎？`,\n     '確認刪除',\n     {\n       confirmButtonText: '刪除',\n       cancelButtonText: '取消',\n       type: 'warning',\n       center: true,\n       showClose: false,\n     }\n   )\n }\n"],"sourceRoot":""}